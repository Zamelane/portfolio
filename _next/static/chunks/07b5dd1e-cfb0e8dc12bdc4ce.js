"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69],{1386:(t,e,i)=>{let s,n,a,l;i.d(e,{$c:()=>tK,BS:()=>aE,BU:()=>Wk,CN:()=>Wv,Dq:()=>WO,Dz:()=>Wy,FK:()=>iv,G_:()=>S,HL:()=>m0,Hp:()=>th,Ip:()=>WW,Lu:()=>WP,N5:()=>W$,NQ:()=>Wp,Nw:()=>lh,OM:()=>WT,OR:()=>Ws,Of:()=>tY,P4:()=>Wf,PZ:()=>Wm,Q2:()=>tj,SY:()=>Wo,Sp:()=>WV,TB:()=>Y,Th:()=>We,Ty:()=>W_,VP:()=>Wx,V_:()=>Wr,W_:()=>Wl,X3:()=>m,Zg:()=>Wb,_k:()=>tq,a3:()=>Wn,as:()=>Ww,cf:()=>WL,d_:()=>te,e8:()=>nt,f:()=>Wa,hW:()=>Wi,jH:()=>t6,jc:()=>Wd,jx:()=>z,k0:()=>Z,kW:()=>io,kZ:()=>tD,kk:()=>Wc,m0:()=>E,mf:()=>WS,nV:()=>WG,pz:()=>b,rW:()=>b4,ri:()=>Wh,rv:()=>l4,sG:()=>WD,tH:()=>Wg,tN:()=>WM,to:()=>t$,wg:()=>Wu,xF:()=>X,zJ:()=>D,zn:()=>aU});var h,r,o=i(4971),u=i(4096),c=i(6266),d=i(6973),_=i(3169),p=i(3893),f=i(2115),v=i(8979),w=i(2475);function g(t){return!(0,v.isString)(t)&&"width"in t&&"height"in t&&(0,v.isNumber)(t.width)&&(0,v.isNumber)(t.height)}let m="undefined"==typeof document,k=m?"":(null==(h=navigator)?void 0:h.userAgent.toLowerCase())||"",b=!m&&/iphone|ipad|ipod|ios|crios|fxios/i.test(k),y=!m&&/(iphone|ipod)/gi.test((null==(r=navigator)?void 0:r.platform)||""),S=!m&&!!window.chrome,W=!m&&(!!window.safari||b);function $(){return!m&&!(0,v.isUndefined)(window.screen.orientation)&&!(0,v.isUndefined)(window.screen.orientation.lock)&&(0,v.isFunction)(screen.orientation.unlock)}function M(t,e){return!m&&(t||(t=document.createElement("audio")),t.canPlayType(e).length>0)}function x(t,e){return!m&&(t||(t=document.createElement("video")),t.canPlayType(e).length>0)}function T(t){return!m&&(t||(t=document.createElement("video")),t.canPlayType("application/vnd.apple.mpegurl").length>0)}function P(t){return!m&&!!document.pictureInPictureEnabled&&!(null==t?void 0:t.disablePictureInPicture)}function A(t){return!m&&(0,v.isFunction)(null==t?void 0:t.webkitSupportsPresentationMode)&&(0,v.isFunction)(null==t?void 0:t.webkitSetPresentationMode)}async function C(){let t=document.createElement("video");return t.volume=.5,await (0,v.waitTimeout)(0),.5===t.volume}function E(){var t,e,i,s,n,a,l,h;if(m)return!1;let r=m?void 0:null!=(n=null!=(s=null==(t=window)?void 0:t.ManagedMediaSource)?s:null==(e=window)?void 0:e.MediaSource)?n:null==(i=window)?void 0:i.WebKitMediaSource;if((0,v.isUndefined)(r))return!1;let o=r&&(0,v.isFunction)(r.isTypeSupported)&&r.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),u=m?void 0:null!=(h=null==(a=window)?void 0:a.SourceBuffer)?h:null==(l=window)?void 0:l.WebKitSourceBuffer,c=(0,v.isUndefined)(u)||!(0,v.isUndefined)(u.prototype)&&(0,v.isFunction)(u.prototype.appendBuffer)&&(0,v.isFunction)(u.prototype.remove);return!!o&&!!c}var q=new WeakMap;class D{get length(){return(0,o._)(this,q).length}start(t){var e;return null!=(e=(0,o._)(this,q)[t][0])?e:1/0}end(t){var e;return null!=(e=(0,o._)(this,q)[t][1])?e:1/0}constructor(t,e){(0,u._)(this,q,{writable:!0,value:void 0}),(0,v.isArray)(t)?(0,c._)(this,q,t):(0,v.isUndefined)(t)||(0,v.isUndefined)(e)?(0,c._)(this,q,[]):(0,c._)(this,q,[[t,e]])}}function O(t){if(!t.length)return null;let e=t.start(0);for(let i=1;i<t.length;i++){let s=t.start(i);s<e&&(e=s)}return e}function L(t){if(!t.length)return null;let e=t.end(0);for(let i=1;i<t.length;i++){let s=t.end(i);s>e&&(e=s)}return e}let I=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx|flac)($|\?)/i,F=new Set(["audio/mpeg","audio/ogg","audio/3gp","audio/mp3","audio/webm","audio/flac","audio/m4a","audio/m4b","audio/mp4a","audio/mp4"]),V=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,R=new Set(["video/mp4","video/webm","video/3gp","video/ogg","video/avi","video/mpeg"]),N=/\.(m3u8)($|\?)/i,G=/\.(mpd)($|\?)/i,j=new Set(["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"]),K=new Set(["application/dash+xml"]);function U(t){let{src:e,type:i}=t;return(0,v.isString)(e)?I.test(e)||F.has(i)||e.startsWith("blob:")&&"audio/object"===i:"audio/object"===i}function B(t){return(0,v.isString)(t.src)?V.test(t.src)||R.has(t.type)||t.src.startsWith("blob:")&&"video/object"===t.type||H(t)&&(m||T()):"video/object"===t.type}function H(t){let{src:e,type:i}=t;return(0,v.isString)(e)&&N.test(e)||j.has(i)}function Q(t){let{src:e,type:i}=t;return(0,v.isString)(e)&&G.test(e)||K.has(i)}function z(t){return(0,v.isString)(t.src)&&(U(t)||B(t)||H(t))}function X(t,e){let i=new URL(t);for(let t of Object.keys(e))i.searchParams.set(t,e[t]+"");return i.toString()}function Y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"preconnect";if(m)return!1;let i=document.querySelector('link[href="'.concat(t,'"]'));if(!(0,v.isNull)(i))return!0;let s=document.createElement("link");return s.rel=e,s.href=t,s.crossOrigin="true",document.head.append(s),!0}let J={};function Z(t){if(J[t])return J[t].promise;let e=(0,v.deferredPromise)(),i=document.querySelector('script[src="'.concat(t,'"]'));if(!(0,v.isNull)(i))return e.resolve(),e.promise;J[t]=e;let s=document.createElement("script");return s.src=t,s.onload=()=>{e.resolve(),delete J[t]},s.onerror=()=>{e.reject(),delete J[t]},setTimeout(()=>document.head.append(s),0),e.promise}function tt(t){return"use-credentials"===t?"include":(0,v.isString)(t)?"same-origin":void 0}function te(t){let{title:e,src:i,download:s}=t,n=(0,v.isBoolean)(s)||""===s?i.src:(0,v.isString)(s)?s:null==s?void 0:s.url;return!function(t){let{url:e,src:i,download:s}=t;return(0,v.isString)(e)&&(s&&!0!==s||U(i)||B(i))}({url:n,src:i,download:s})?null:{url:n,name:!(0,v.isBoolean)(s)&&!(0,v.isString)(s)&&(null==s?void 0:s.filename)||e.toLowerCase()||"media"}}let ti=Symbol(0),ts=Symbol(0),tn=Symbol(0),ta=Symbol(0),tl=Symbol(0),th={crossOrigin:ti,readyState:ts,updateActiveCues:tn,canLoad:ta,onModeChange:tl,native:Symbol(0),nativeHLS:Symbol(0)};function tr(t,e){return e>=t.startTime&&e<t.endTime}function to(t,e,i){let s=null,n=(0,v.getScope)();function a(){let a=(0,v.isString)(e)?[e]:e,l=t.toArray().find(t=>a.includes(t.kind)&&"showing"===t.mode);if(l!==s){if(!l){i(null),s=null;return}2==l.readyState?i(l):(i(null),(0,v.scoped)(()=>{let t=(0,v.listenEvent)(l,"load",()=>{i(l),t()},{once:!0})},n)),s=l}}return a(),(0,v.listenEvent)(t,"mode-change",a)}var tu=new WeakMap,tc=new WeakMap,td=new WeakMap,t_=new WeakMap,tp=new WeakMap,tf=new WeakMap,tv=new WeakMap,tw=new WeakSet,tg=new WeakSet,tm=new WeakSet,tk=new WeakSet,tb=new WeakSet,ty=new WeakSet;let tS=th.updateActiveCues,tW=th.canLoad;class t$ extends v.EventsTarget{static createId(t){var e,i;return"vds-".concat(t.type,"-").concat(t.kind,"-").concat(null!=(i=null!=(e=t.src)?e:t.label)?i:"?")}get metadata(){return(0,o._)(this,t_)}get regions(){return(0,o._)(this,tp)}get cues(){return(0,o._)(this,tf)}get activeCues(){return(0,o._)(this,tv)}get readyState(){return this[th.readyState]}get mode(){return(0,o._)(this,td)}set mode(t){this.setMode(t)}addCue(t,e){let i=0,s=(0,o._)(this,tf).length;for(i=0;i<s&&!(t.endTime<=(0,o._)(this,tf)[i].startTime);i++);if(i===s?(0,o._)(this,tf).push(t):(0,o._)(this,tf).splice(i,0,t),!(t instanceof TextTrackCue)){var n;null==(n=this[th.native])||n.track.addCue(t)}this.dispatchEvent(new v.DOMEvent("add-cue",{detail:t,trigger:e})),tr(t,(0,o._)(this,tc))&&this[th.updateActiveCues]((0,o._)(this,tc),e)}removeCue(t,e){let i=(0,o._)(this,tf).indexOf(t);if(i>=0){var s;let n=(0,o._)(this,tv).includes(t);(0,o._)(this,tf).splice(i,1),null==(s=this[th.native])||s.track.removeCue(t),this.dispatchEvent(new v.DOMEvent("remove-cue",{detail:t,trigger:e})),n&&this[th.updateActiveCues]((0,o._)(this,tc),e)}}setMode(t,e){var i;(0,o._)(this,td)!==t&&((0,c._)(this,td,t),"disabled"===t?((0,c._)(this,tv,[]),(0,_._)(this,ty,tC).call(this)):2===this.readyState?this[th.updateActiveCues]((0,o._)(this,tc),e):(0,_._)(this,tg,tx).call(this),this.dispatchEvent(new v.DOMEvent("mode-change",{detail:this,trigger:e})),null==(i=this[th.onModeChange])||i.call(this))}[tS](t,e){if((0,c._)(this,tc,t),"disabled"===this.mode||!(0,o._)(this,tf).length)return;let i=[];for(let e=0,s=(0,o._)(this,tf).length;e<s;e++){let s=(0,o._)(this,tf)[e];tr(s,t)&&i.push(s)}let s=i.length!==(0,o._)(this,tv).length;if(!s){for(let t=0;t<i.length;t++)if(!(0,o._)(this,tv).includes(i[t])){s=!0;break}}(0,c._)(this,tv,i),s&&(0,_._)(this,ty,tC).call(this,e)}[tW](){(0,c._)(this,tu,!0),"disabled"!==(0,o._)(this,td)&&(0,_._)(this,tg,tx).call(this)}constructor(t){for(let e of(super(),(0,p._)(this,tw),(0,p._)(this,tg),(0,p._)(this,tm),(0,p._)(this,tk),(0,p._)(this,tb),(0,p._)(this,ty),(0,u._)(this,tu,{writable:!0,value:void 0}),(0,u._)(this,tc,{writable:!0,value:void 0}),(0,u._)(this,td,{writable:!0,value:void 0}),(0,u._)(this,t_,{writable:!0,value:void 0}),(0,u._)(this,tp,{writable:!0,value:void 0}),(0,u._)(this,tf,{writable:!0,value:void 0}),(0,u._)(this,tv,{writable:!0,value:void 0}),this.id="",this.label="",this.language="",this.default=!1,(0,c._)(this,tu,!1),(0,c._)(this,tc,0),(0,c._)(this,td,"disabled"),(0,c._)(this,t_,{}),(0,c._)(this,tp,[]),(0,c._)(this,tf,[]),(0,c._)(this,tv,[]),this[s]=0,this[n]=null,this[a]=null,Object.keys(t)))this[e]=t[e];this.type||(this.type="vtt"),!m&&t.content?(0,_._)(this,tw,tM).call(this,t):t.src||(this[th.readyState]=2)}}function tM(t){i.e(298).then(i.bind(i,1298)).then(e=>{let{parseText:i,VTTCue:s,VTTRegion:n}=e;(0,v.isString)(t.content)&&"json"!==t.type?i(t.content,{type:t.type}).then(t=>{let{cues:e,regions:i}=t;(0,c._)(this,tf,e),(0,c._)(this,tp,i),(0,_._)(this,tm,tT).call(this)}):((0,_._)(this,tb,tA).call(this,t.content,s,n),3!==this.readyState&&(0,_._)(this,tm,tT).call(this))})}async function tx(){if((0,o._)(this,tu)&&!(this[th.readyState]>0)){if(this[th.readyState]=1,this.dispatchEvent(new v.DOMEvent("load-start")),!this.src)return void(0,_._)(this,tm,tT).call(this);try{var t,e;let{parseResponse:s,VTTCue:n,VTTRegion:a}=await i.e(298).then(i.bind(i,1298)),l=null==(t=this[th.crossOrigin])?void 0:t.call(this),h=fetch(this.src,{headers:"json"===this.type?{"Content-Type":"application/json"}:void 0,credentials:tt(l)});if("json"===this.type)(0,_._)(this,tb,tA).call(this,await (await h).text(),n,a);else{let{errors:t,metadata:i,regions:n,cues:a}=await s(h,{type:this.type,encoding:this.encoding});if((null==(e=t[0])?void 0:e.code)===0)throw t[0];(0,c._)(this,t_,i),(0,c._)(this,tp,n),(0,c._)(this,tf,a)}(0,_._)(this,tm,tT).call(this)}catch(t){(0,_._)(this,tk,tP).call(this,t)}}}function tT(){if(this[th.readyState]=2,!this.src||"vtt"!==this.type){let t=this[th.native];if(t&&!t.managed)for(let e of(0,o._)(this,tf))t.track.addCue(e)}let t=new v.DOMEvent("load");this[th.updateActiveCues]((0,o._)(this,tc),t),this.dispatchEvent(t)}function tP(t){this[th.readyState]=3,this.dispatchEvent(new v.DOMEvent("error",{detail:t}))}function tA(t,e,i){try{let{regions:s,cues:n}=function(t,e,i){let s=(0,v.isString)(t)?JSON.parse(t):t,n=[],a=[];return s.regions&&i&&(n=s.regions.map(t=>Object.assign(new i,t))),(s.cues||(0,v.isArray)(s))&&(a=((0,v.isArray)(s)?s:s.cues).filter(t=>(0,v.isNumber)(t.startTime)&&(0,v.isNumber)(t.endTime)).map(t=>Object.assign(new e(0,0,""),t))),{regions:n,cues:a}}(t,e,i);(0,c._)(this,tp,s),(0,c._)(this,tf,n)}catch(t){(0,_._)(this,tk,tP).call(this,t)}}function tC(t){this.dispatchEvent(new v.DOMEvent("cue-change",{trigger:t}))}s=th.readyState,th.crossOrigin,n=th.onModeChange,a=th.native;let tE=/captions|subtitles/;function tq(t){return tE.test(t.kind)}let tD=new v.State({artist:"",artwork:null,audioTrack:null,audioTracks:[],autoPlay:!1,autoPlayError:null,audioGain:null,buffered:new D,canLoad:!1,canLoadPoster:!1,canFullscreen:!1,canOrientScreen:$(),canPictureInPicture:!1,canPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,get iOSControls(){return y&&"video"===this.mediaType&&(!this.playsInline||!v.fscreen.fullscreenEnabled&&this.fullscreen)},get nativeControls(){return this.controls||this.iOSControls},controlsVisible:!1,get controlsHidden(){return!this.controlsVisible},crossOrigin:null,ended:!1,error:null,fullscreen:!1,get loop(){return this.providedLoop||this.userPrefersLoop},logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:new D,playing:!1,playsInline:!1,pictureInPicture:!1,preload:"metadata",playbackRate:1,qualities:[],quality:null,autoQuality:!1,canSetQuality:!0,canSetPlaybackRate:!0,canSetVolume:!1,canSetAudioGain:!1,seekable:new D,seeking:!1,source:{src:"",type:""},sources:[],started:!1,textTracks:[],textTrack:null,get hasCaptions(){return this.textTracks.filter(tq).length>0},volume:1,waiting:!1,realCurrentTime:0,get currentTime(){return this.ended?this.duration:this.clipStartTime>0?Math.max(0,Math.min(this.realCurrentTime-this.clipStartTime,this.duration)):this.realCurrentTime},providedDuration:-1,intrinsicDuration:0,get duration(){return this.seekableWindow},get title(){return this.providedTitle||this.inferredTitle},get poster(){return this.providedPoster||this.inferredPoster},get viewType(){return"unknown"!==this.providedViewType?this.providedViewType:this.inferredViewType},get streamType(){return"unknown"!==this.providedStreamType?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){var tO;return Math.max(null!=(tO=O(this.buffered))?tO:0,this.clipStartTime)},get bufferedEnd(){var tL;let t=null!=(tL=L(this.buffered))?tL:0;return Math.min(this.seekableEnd,Math.max(0,t-this.clipStartTime))},get bufferedWindow(){return Math.max(0,this.bufferedEnd-this.bufferedStart)},get seekableStart(){var tI;if(this.isLiveDVR&&this.liveDVRWindow>0)return Math.max(0,this.seekableEnd-this.liveDVRWindow);return Math.max(null!=(tI=O(this.seekable))?tI:0,this.clipStartTime)},get seekableEnd(){var tF;if(this.providedDuration>0)return this.providedDuration;let t=this.liveSyncPosition>0?this.liveSyncPosition:this.canPlay?null!=(tF=L(this.seekable))?tF:1/0:0;return this.clipEndTime>0?Math.min(this.clipEndTime,t):t},get seekableWindow(){let t=this.seekableEnd-this.seekableStart;return isNaN(t)?1/0:Math.max(0,t)},canAirPlay:!1,canGoogleCast:!1,remotePlaybackState:"disconnected",remotePlaybackType:"none",remotePlaybackLoader:null,remotePlaybackInfo:null,get isAirPlayConnected(){return"airplay"===this.remotePlaybackType&&"connected"===this.remotePlaybackState},get isGoogleCastConnected(){return"google-cast"===this.remotePlaybackType&&"connected"===this.remotePlaybackState},pointer:"fine",orientation:"landscape",width:0,height:0,mediaWidth:0,mediaHeight:0,lastKeyboardAction:null,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return/unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.duration)&&(!this.isLiveDVR||this.duration>=this.liveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.duration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,this.seekableEnd-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},get isLiveDVR(){return/:dvr/.test(this.streamType)},get liveDVRWindow(){return Math.max(this.inferredLiveDVRWindow,this.minLiveDVRWindow)},autoPlaying:!1,providedTitle:"",inferredTitle:"",providedLoop:!1,userPrefersLoop:!1,providedPoster:"",inferredPoster:"",inferredViewType:"unknown",providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null,inferredLiveDVRWindow:0,savedState:null}),tV=new Set(["autoPlayError","autoPlaying","buffered","canPlay","error","paused","played","playing","seekable","seeking","waiting"]),tR=new Set([...tV,"ended","inferredPoster","inferredStreamType","inferredTitle","intrinsicDuration","inferredLiveDVRWindow","liveSyncPosition","realCurrentTime","savedState","started","userBehindLiveEdge"]);function tN(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e?tV:tR;tD.reset(t,t=>i.has(t)),(0,v.tick)()}function tG(t,e){let i=t+e.clipStartTime(),s=Math.floor(t)===Math.floor(e.seekableStart()),n=Math.floor(i)===Math.floor(e.seekableEnd());return s?e.seekableStart():n?e.seekableEnd():e.isLiveDVR()&&e.liveDVRWindow()>0&&i<e.seekableEnd()-e.liveDVRWindow()?e.bufferedStart():Math.min(Math.max(e.seekableStart()+.1,i),e.seekableEnd()-.1)}let tj=(0,v.createContext)();function tK(){return(0,v.useContext)(tj)}var tU=new WeakMap,tB=new WeakMap,tH=new WeakMap,tQ=new WeakMap,tz=new WeakSet,tX=new WeakSet;class tY{setTarget(t){(0,c._)(this,tU,t)}getPlayer(t){var e;return(0,o._)(this,tB)||null==(e=null!=t?t:(0,o._)(this,tU))||e.dispatchEvent(new v.DOMEvent("find-media-player",{detail:t=>void(0,c._)(this,tB,t),bubbles:!0,composed:!0})),(0,o._)(this,tB)}setPlayer(t){(0,c._)(this,tB,t)}startLoading(t){(0,_._)(this,tz,tJ).call(this,"media-start-loading",t)}startLoadingPoster(t){(0,_._)(this,tz,tJ).call(this,"media-poster-start-loading",t)}requestAirPlay(t){(0,_._)(this,tz,tJ).call(this,"media-airplay-request",t)}requestGoogleCast(t){(0,_._)(this,tz,tJ).call(this,"media-google-cast-request",t)}play(t){(0,_._)(this,tz,tJ).call(this,"media-play-request",t)}pause(t){(0,_._)(this,tz,tJ).call(this,"media-pause-request",t)}mute(t){(0,_._)(this,tz,tJ).call(this,"media-mute-request",t)}unmute(t){(0,_._)(this,tz,tJ).call(this,"media-unmute-request",t)}enterFullscreen(t,e){(0,_._)(this,tz,tJ).call(this,"media-enter-fullscreen-request",e,t)}exitFullscreen(t,e){(0,_._)(this,tz,tJ).call(this,"media-exit-fullscreen-request",e,t)}lockScreenOrientation(t,e){(0,_._)(this,tz,tJ).call(this,"media-orientation-lock-request",e,t)}unlockScreenOrientation(t){(0,_._)(this,tz,tJ).call(this,"media-orientation-unlock-request",t)}enterPictureInPicture(t){(0,_._)(this,tz,tJ).call(this,"media-enter-pip-request",t)}exitPictureInPicture(t){(0,_._)(this,tz,tJ).call(this,"media-exit-pip-request",t)}seeking(t,e){(0,_._)(this,tz,tJ).call(this,"media-seeking-request",e,t)}seek(t,e){(0,_._)(this,tz,tJ).call(this,"media-seek-request",e,t)}seekToLiveEdge(t){(0,_._)(this,tz,tJ).call(this,"media-live-edge-request",t)}changeDuration(t,e){(0,_._)(this,tz,tJ).call(this,"media-duration-change-request",e,t)}changeClipStart(t,e){(0,_._)(this,tz,tJ).call(this,"media-clip-start-change-request",e,t)}changeClipEnd(t,e){(0,_._)(this,tz,tJ).call(this,"media-clip-end-change-request",e,t)}changeVolume(t,e){(0,_._)(this,tz,tJ).call(this,"media-volume-change-request",e,Math.max(0,Math.min(1,t)))}changeAudioTrack(t,e){(0,_._)(this,tz,tJ).call(this,"media-audio-track-change-request",e,t)}changeQuality(t,e){(0,_._)(this,tz,tJ).call(this,"media-quality-change-request",e,t)}requestAutoQuality(t){this.changeQuality(-1,t)}changeTextTrackMode(t,e,i){(0,_._)(this,tz,tJ).call(this,"media-text-track-change-request",i,{index:t,mode:e})}changePlaybackRate(t,e){(0,_._)(this,tz,tJ).call(this,"media-rate-change-request",e,t)}changeAudioGain(t,e){(0,_._)(this,tz,tJ).call(this,"media-audio-gain-change-request",e,t)}resumeControls(t){(0,_._)(this,tz,tJ).call(this,"media-resume-controls-request",t)}pauseControls(t){(0,_._)(this,tz,tJ).call(this,"media-pause-controls-request",t)}togglePaused(t){let e=this.getPlayer(null==t?void 0:t.target);e&&(e.state.paused?this.play(t):this.pause(t))}toggleControls(t){let e=this.getPlayer(null==t?void 0:t.target);e&&(e.controls.showing?e.controls.hide(0,t):e.controls.show(0,t))}toggleMuted(t){let e=this.getPlayer(null==t?void 0:t.target);e&&(e.state.muted?this.unmute(t):this.mute(t))}toggleFullscreen(t,e){let i=this.getPlayer(null==e?void 0:e.target);i&&(i.state.fullscreen?this.exitFullscreen(t,e):this.enterFullscreen(t,e))}togglePictureInPicture(t){let e=this.getPlayer(null==t?void 0:t.target);e&&(e.state.pictureInPicture?this.exitPictureInPicture(t):this.enterPictureInPicture(t))}showCaptions(t){let e=this.getPlayer(null==t?void 0:t.target);if(!e)return;let i=e.state.textTracks,s=(0,o._)(this,tH);i[s]&&tq(i[s])||(s=-1),-1===s&&(s=i.findIndex(t=>tq(t)&&t.default)),-1===s&&(s=i.findIndex(t=>tq(t))),s>=0&&this.changeTextTrackMode(s,"showing",t),(0,c._)(this,tH,-1)}disableCaptions(t){let e=this.getPlayer(null==t?void 0:t.target);if(!e)return;let i=e.state.textTracks,s=e.state.textTrack;if(s){let e=i.indexOf(s);this.changeTextTrackMode(e,"disabled",t),(0,c._)(this,tH,e)}}toggleCaptions(t){let e=this.getPlayer(null==t?void 0:t.target);e&&(e.state.textTrack?this.disableCaptions():this.showCaptions())}userPrefersLoopChange(t,e){(0,_._)(this,tz,tJ).call(this,"media-user-loop-change-request",e,t)}constructor(t){(0,p._)(this,tz),(0,p._)(this,tX),(0,u._)(this,tU,{writable:!0,value:void 0}),(0,u._)(this,tB,{writable:!0,value:void 0}),(0,u._)(this,tH,{writable:!0,value:void 0}),(0,u._)(this,tQ,{writable:!0,value:void 0}),(0,c._)(this,tU,null),(0,c._)(this,tB,null),(0,c._)(this,tH,-1),(0,c._)(this,tQ,t)}}function tJ(t,e,i){var s,n,a;let l=new v.DOMEvent(t,{bubbles:!0,composed:!0,cancelable:!0,detail:i,trigger:e}),h=(null==e?void 0:e.target)||null;h&&h instanceof v.Component&&(h=h.el),h=!h||h===document||h===window||h===document.body||(null==(s=(0,o._)(this,tB))?void 0:s.el)&&h instanceof Node&&!(0,o._)(this,tB).el.contains(h)?null!=(a=(0,o._)(this,tU))?a:null==(n=this.getPlayer())?void 0:n.el:null!=h?h:(0,o._)(this,tU),(0,o._)(this,tB)&&("media-play-request"!==t||(0,o._)(this,tB).state.canLoad)?(0,o._)(this,tB).canPlayQueue.enqueue(t,()=>null==h?void 0:h.dispatchEvent(l)):null==h||h.dispatchEvent(l)}var tZ=new WeakMap;class t0{async getVolume(){return(0,o._)(this,tZ).volume}async setVolume(t){(0,o._)(this,tZ).volume=t,this.save()}async getMuted(){return(0,o._)(this,tZ).muted}async setMuted(t){(0,o._)(this,tZ).muted=t,this.save()}async getTime(){return(0,o._)(this,tZ).time}async setTime(t,e){let i=t<0;(0,o._)(this,tZ).time=i?null:t,i||e?this.saveTime():this.saveTimeThrottled()}async getLang(){return(0,o._)(this,tZ).lang}async setLang(t){(0,o._)(this,tZ).lang=t,this.save()}async getCaptions(){return(0,o._)(this,tZ).captions}async setCaptions(t){(0,o._)(this,tZ).captions=t,this.save()}async getPlaybackRate(){return(0,o._)(this,tZ).rate}async setPlaybackRate(t){(0,o._)(this,tZ).rate=t,this.save()}async getAudioGain(){return(0,o._)(this,tZ).audioGain}async setAudioGain(t){(0,o._)(this,tZ).audioGain=t,this.save()}async getVideoQuality(){return(0,o._)(this,tZ).quality}async setVideoQuality(t){(0,o._)(this,tZ).quality=t,this.save()}onChange(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vds-player",s=i?localStorage.getItem(i):null,n=e?localStorage.getItem(e):null;this.playerId=i,this.mediaId=e,(0,c._)(this,tZ,{volume:null,muted:null,audioGain:null,lang:null,captions:null,rate:null,quality:null,...s?JSON.parse(s):{},time:n?+n:null})}save(){if(m||!this.playerId)return;let t=JSON.stringify({...(0,o._)(this,tZ),time:void 0});localStorage.setItem(this.playerId,t)}saveTime(){var t;if(m||!this.mediaId)return;let e=(null!=(t=(0,o._)(this,tZ).time)?t:0).toString();localStorage.setItem(this.mediaId,e)}constructor(){(0,u._)(this,tZ,{writable:!0,value:void 0}),this.playerId="vds-player",this.mediaId=null,(0,c._)(this,tZ,{volume:null,muted:null,audioGain:null,time:null,lang:null,captions:null,rate:null,quality:null}),this.saveTimeThrottled=(0,v.functionThrottle)(this.saveTime.bind(this),1e3)}}let t1=Symbol(0),t2=Symbol(0),t3=Symbol(0),t5=Symbol(0),t4=Symbol(0),t9=Symbol(0),t8=Symbol(0),t6={add:t1,remove:t2,reset:t3,select:t5,readonly:t4,setReadonly:t9,onReset:t8,onRemove:Symbol(0),onUserSelect:Symbol(0)},t7=t6.add,et=t6.remove,ee=t6.reset,ei=t6.setReadonly;class es extends v.EventsTarget{get length(){return this.items.length}get readonly(){return this[t6.readonly]}indexOf(t){return this.items.indexOf(t)}getById(t){var e;return""===t?null:null!=(e=this.items.find(e=>e.id===t))?e:null}toArray(){return[...this.items]}[Symbol.iterator](){return this.items.values()}[t7](t,e){let i=this.items.length;""+i in this||Object.defineProperty(this,i,{get(){return this.items[i]}}),this.items.includes(t)||(this.items.push(t),this.dispatchEvent(new v.DOMEvent("add",{detail:t,trigger:e})))}[et](t,e){let i=this.items.indexOf(t);if(i>=0){var s;null==(s=this[t6.onRemove])||s.call(this,t,e),this.items.splice(i,1),this.dispatchEvent(new v.DOMEvent("remove",{detail:t,trigger:e}))}}[ee](t){var e;for(let e of[...this.items])this[t6.remove](e,t);this.items=[],this[t6.setReadonly](!1,t),null==(e=this[t6.onReset])||e.call(this)}[ei](t,e){this[t6.readonly]!==t&&(this[t6.readonly]=t,this.dispatchEvent(new v.DOMEvent("readonly-change",{detail:t,trigger:e})))}constructor(...t){super(...t),this.items=[],this[l]=!1}}l=t6.readonly;let en=Symbol(0);class ea extends es{get selected(){var t;return null!=(t=this.items.find(t=>t.selected))?t:null}get selectedIndex(){return this.items.findIndex(t=>t.selected)}[t6.onRemove](t,e){this[t6.select](t,!1,e)}[t6.add](t,e){t[en]=!1,Object.defineProperty(t,"selected",{get(){return this[en]},set:e=>{var i;this.readonly||(null==(i=this[t6.onUserSelect])||i.call(this),this[t6.select](t,e))}}),super[t6.add](t,e)}[t6.select](t,e,i){if(e===(null==t?void 0:t[en]))return;let s=this.selected;t&&(t[en]=e),(e?s!==t:s===t)&&(s&&(s[en]=!1),this.dispatchEvent(new v.DOMEvent("change",{detail:{prev:s,current:this.selected},trigger:i})))}}class el extends ea{}function eh(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(t.toFixed(e))}function er(t){var e,i;return null!=(i=null==(e=String(t).split(".")[1])?void 0:e.length)?i:0}function eo(t,e,i){return Math.max(t,Math.min(i,e))}function eu(t,e){let i=e.composedPath()[0];return(0,v.isDOMNode)(i)&&t.contains(i)}let ec=new Set;if(!m){let t=function(){for(let t of ec)try{t()}catch(t){}window.requestAnimationFrame(t)};t()}function ed(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}function e_(t,e){if(!(t.hasAttribute("aria-label")||t.hasAttribute("data-no-label"))){if(!(0,v.isFunction)(e))return void(0,v.setAttribute)(t,"aria-label",e);m?i():(0,v.effect)(i)}function i(){(0,v.setAttribute)(t,"aria-label",e())}}function ep(t){let e=getComputedStyle(t);return"none"!==e.display&&parseInt(e.opacity)>0}function ef(t,e){var i;return i=()=>e(!!t&&("checkVisibility"in t?t.checkVisibility({checkOpacity:!0,checkVisibilityCSS:!0}):ep(t))),ec.add(i),()=>ec.delete(i)}function ev(t,e,i){for(;e;)if(e===t)return!0;else if(null==i?void 0:i(e))break;else e=e.parentElement;return!1}function ew(t,e){return new v.EventsController(t).add("pointerup",t=>{0!==t.button||t.defaultPrevented||e(t)}).add("keydown",t=>{(0,v.isKeyboardClick)(t)&&e(t)})}function eg(t){return(0,v.isTouchEvent)(t)&&(t.touches.length>1||t.changedTouches.length>1)}function em(t){if(m)return t();let e=(0,v.getScope)(),i=window.requestAnimationFrame(()=>{(0,v.scoped)(t,e),i=-1});return()=>void window.cancelAnimationFrame(i)}function ek(t,e,i,s){let{offsetVarName:n,xOffset:a,yOffset:l,...h}=s;if(!t)return;let r=i.replace(" ","-").replace("-center","");if((0,v.setStyle)(t,"visibility",e?null:"hidden"),!e)return;let o=i.includes("top");return(0,w.ll)(e,t,()=>{var s;(0,w.rD)(e,t,{placement:r,middleware:[...null!=(s=h.middleware)?s:[],(0,w.UU)({fallbackAxisSideDirection:"start",crossAxis:!1}),(0,w.BN)()],...h}).then(e=>{var s;let h,r,{x:u,y:c,middlewareData:d}=e,_=!!(null==(s=d.flip)?void 0:s.index);o=i.includes(_?"bottom":"top"),t.setAttribute("data-placement",_?i.startsWith("top")?i.replace("top","bottom"):i.replace("bottom","top"):i),Object.assign(t.style,{top:"calc(".concat(c+"px"," + ").concat((h=l?l+"px":"var(--".concat(n,"-y-offset, 0px)"),o?"calc(-1 * ".concat(h,")"):h),")"),left:"calc(".concat(u+"px"," + ").concat((r=a?a+"px":"var(--".concat(n,"-x-offset, 0px)"),i.includes("left")?"calc(-1 * ".concat(r,")"):r),")")})})})}function eb(t){return t instanceof HTMLElement}var ey=new WeakMap,eS=new WeakMap,eW=new WeakMap,e$=new WeakMap,eM=new WeakSet,ex=new WeakSet,eT=new WeakSet,eP=new WeakSet;class eA{canRender(t,e){return!!e}attach(t){(0,c._)(this,eS,t),t&&(t.textTracks.onchange=(0,_._)(this,eP,eD).bind(this))}addTrack(t){(0,o._)(this,e$).add(t),(0,_._)(this,eM,eC).call(this,t)}removeTrack(t){var e,i;null==(i=t[th.native])||null==(e=i.remove)||e.call(i),t[th.native]=null,(0,o._)(this,e$).delete(t)}changeTrack(t){let e=null==t?void 0:t[th.native];e&&"showing"!==e.track.mode&&(e.track.mode="showing"),(0,c._)(this,eW,t)}setDisplay(t){(0,c._)(this,ey,t),(0,_._)(this,eP,eD).call(this)}detach(){for(let t of((0,o._)(this,eS)&&((0,o._)(this,eS).textTracks.onchange=null),(0,o._)(this,e$)))this.removeTrack(t);(0,o._)(this,e$).clear(),(0,c._)(this,eS,null),(0,c._)(this,eW,null)}constructor(){(0,p._)(this,eM),(0,p._)(this,ex),(0,p._)(this,eT),(0,p._)(this,eP),(0,u._)(this,ey,{writable:!0,value:void 0}),(0,u._)(this,eS,{writable:!0,value:void 0}),(0,u._)(this,eW,{writable:!0,value:void 0}),(0,u._)(this,e$,{writable:!0,value:void 0}),this.priority=0,(0,c._)(this,ey,!0),(0,c._)(this,eS,null),(0,c._)(this,eW,null),(0,c._)(this,e$,new Set)}}function eC(t){var e,i;if(!(0,o._)(this,eS))return;let s=null!=(i=t[e=th.native])?i:t[e]=(0,_._)(this,ex,eE).call(this,t);eb(s)&&((0,o._)(this,eS).append(s),s.track.mode=s.default?"showing":"disabled")}function eE(t){let e=document.createElement("track"),i=t.default||"showing"===t.mode,s=t.src&&"vtt"===t.type;return e.id=t.id,e.src=s?t.src:"",e.label=t.label,e.kind=t.kind,e.default=i,t.language&&(e.srclang=t.language),i&&!s&&(0,_._)(this,eT,eq).call(this,t,e.track),e}function eq(t,e){var i;if((!t.src||"vtt"!==t.type)&&(null==(i=e.cues)||!i.length))for(let i of t.cues)e.addCue(i)}function eD(t){for(let e of(0,o._)(this,e$)){let i=e[th.native];if(!i)continue;if(!(0,o._)(this,ey)){i.track.mode=i.managed?"hidden":"disabled";continue}let s="showing"===i.track.mode;s&&(0,_._)(this,eT,eq).call(this,e,i.track),e.setMode(s?"showing":"disabled",t)}}var eO=new WeakMap,eL=new WeakMap,eI=new WeakMap,eF=new WeakMap,eV=new WeakMap,eR=new WeakMap,eN=new WeakMap,eG=new WeakSet,ej=new WeakSet,eK=new WeakSet,eU=new WeakSet,eB=new WeakSet,eH=new WeakSet,eQ=new WeakSet;class ez{add(t){(0,o._)(this,eI).push(t),(0,v.untrack)((0,_._)(this,eH,e1).bind(this))}remove(t){t.detach(),(0,o._)(this,eI).splice((0,o._)(this,eI).indexOf(t),1),(0,v.untrack)((0,_._)(this,eH,e1).bind(this))}attachVideo(t){requestAnimationFrame(()=>{if((0,c._)(this,eO,t),t)for(let e of((0,c._)(this,eR,new eA),(0,o._)(this,eR).attach(t),(0,o._)(this,eL)))(0,_._)(this,ej,eY).call(this,e);(0,_._)(this,eH,e1).call(this)})}constructor(t){(0,p._)(this,eG),(0,p._)(this,ej),(0,p._)(this,eK),(0,p._)(this,eU),(0,p._)(this,eB),(0,p._)(this,eH),(0,p._)(this,eQ),(0,u._)(this,eO,{writable:!0,value:void 0}),(0,u._)(this,eL,{writable:!0,value:void 0}),(0,u._)(this,eI,{writable:!0,value:void 0}),(0,u._)(this,eF,{writable:!0,value:void 0}),(0,u._)(this,eV,{writable:!0,value:void 0}),(0,u._)(this,eR,{writable:!0,value:void 0}),(0,u._)(this,eN,{writable:!0,value:void 0}),(0,c._)(this,eO,null),(0,c._)(this,eI,[]),(0,c._)(this,eV,!1),(0,c._)(this,eR,null),(0,c._)(this,eN,null),(0,c._)(this,eF,t);let e=t.textTracks;(0,c._)(this,eL,e),(0,v.effect)((0,_._)(this,eG,eX).bind(this)),(0,v.onDispose)((0,_._)(this,eQ,e2).bind(this)),new v.EventsController(e).add("add",(0,_._)(this,eU,eZ).bind(this)).add("remove",(0,_._)(this,eB,e0).bind(this)).add("mode-change",(0,_._)(this,eH,e1).bind(this))}}function eX(){let{nativeControls:t}=(0,o._)(this,eF).$state;(0,c._)(this,eV,t()),(0,_._)(this,eH,e1).call(this)}function eY(t){var e;tq(t)&&(null==(e=(0,o._)(this,eR))||e.addTrack(t))}function eJ(t){var e;tq(t)&&(null==(e=(0,o._)(this,eR))||e.removeTrack(t))}function eZ(t){(0,_._)(this,ej,eY).call(this,t.detail)}function e0(t){(0,_._)(this,eK,eJ).call(this,t.detail)}function e1(){var t,e,i,s,n,a,l;let h=(0,o._)(this,eL).selected;if((0,o._)(this,eO)&&((0,o._)(this,eV)||(null==h?void 0:h[th.nativeHLS]))){null==(i=(0,o._)(this,eN))||i.changeTrack(null),null==(s=(0,o._)(this,eR))||s.setDisplay(!0),null==(n=(0,o._)(this,eR))||n.changeTrack(h);return}if(null==(t=(0,o._)(this,eR))||t.setDisplay(!1),null==(e=(0,o._)(this,eR))||e.changeTrack(null),!h){null==(a=(0,o._)(this,eN))||a.changeTrack(null);return}let r=(0,o._)(this,eI).sort((t,e)=>t.priority-e.priority).find(t=>t.canRender(h,(0,o._)(this,eO)));(0,o._)(this,eN)!==r&&(null==(l=(0,o._)(this,eN))||l.detach(),null==r||r.attach((0,o._)(this,eO)),(0,c._)(this,eN,null!=r?r:null)),null==r||r.changeTrack(h)}function e2(){var t,e;null==(t=(0,o._)(this,eR))||t.detach(),(0,c._)(this,eR,null),null==(e=(0,o._)(this,eN))||e.detach(),(0,c._)(this,eN,null)}var e3=new WeakMap,e5=new WeakMap,e4=new WeakMap,e9=new WeakMap,e8=new WeakMap,e6=new WeakMap,e7=new WeakMap,it=new WeakSet,ie=new WeakSet,ii=new WeakSet;let is=th.canLoad;class ia extends es{get selected(){let t=this.items.find(t=>"showing"===t.mode&&tq(t));return null!=t?t:null}get selectedIndex(){let t=this.selected;return t?this.indexOf(t):-1}get preferredLang(){return(0,o._)(this,e9)}set preferredLang(t){(0,c._)(this,e9,t),(0,_._)(this,ii,ir).call(this,t)}add(t,e){let i=t instanceof t$?t:new t$(t),s="captions"===t.kind||"subtitles"===t.kind?"captions":t.kind;return(0,o._)(this,e5)[s]&&t.default&&delete t.default,i.addEventListener("mode-change",(0,o._)(this,e7)),this[t6.add](i,e),i[th.crossOrigin]=this[th.crossOrigin],(0,o._)(this,e3)&&i[th.canLoad](),t.default&&((0,o._)(this,e5)[s]=i),(0,o._)(this,e8).call(this),this}remove(t,e){if((0,c._)(this,e6,t),this.items.includes(t))return t===(0,o._)(this,e5)[t.kind]&&delete(0,o._)(this,e5)[t.kind],t.mode="disabled",t[th.onModeChange]=null,t.removeEventListener("mode-change",(0,o._)(this,e7)),this[t6.remove](t,e),(0,c._)(this,e6,null),this}clear(t){for(let e of[...this.items])this.remove(e,t);return this}getByKind(t){let e=Array.isArray(t)?t:[t];return this.items.filter(t=>e.includes(t.kind))}[is](){if(!(0,o._)(this,e3)){for(let t of this.items)t[th.canLoad]();(0,c._)(this,e3,!0),(0,o._)(this,e8).call(this)}}setStorage(t){(0,c._)(this,e4,t)}constructor(){super(),(0,p._)(this,it),(0,p._)(this,ie),(0,p._)(this,ii),(0,u._)(this,e3,{writable:!0,value:void 0}),(0,u._)(this,e5,{writable:!0,value:void 0}),(0,u._)(this,e4,{writable:!0,value:void 0}),(0,u._)(this,e9,{writable:!0,value:void 0}),(0,u._)(this,e8,{writable:!0,value:void 0}),(0,u._)(this,e6,{writable:!0,value:void 0}),(0,u._)(this,e7,{writable:!0,value:void 0}),(0,c._)(this,e3,!1),(0,c._)(this,e5,{}),(0,c._)(this,e4,null),(0,c._)(this,e9,null),(0,c._)(this,e8,(0,v.functionDebounce)(async()=>{var t;if(!(0,o._)(this,e3))return;!(0,o._)(this,e9)&&(0,o._)(this,e4)&&(0,c._)(this,e9,await (0,o._)(this,e4).getLang());let e=await (null==(t=(0,o._)(this,e4))?void 0:t.getCaptions());for(let t of[["captions","subtitles"],"chapters","descriptions","metadata"]){let i=this.getByKind(t);if(i.find(t=>"showing"===t.mode))continue;let s=(0,o._)(this,e9)?i.find(t=>t.language===(0,o._)(this,e9)):null,n=(0,v.isArray)(t)?(0,o._)(this,e5)[t.find(t=>(0,o._)(this,e5)[t])||""]:(0,o._)(this,e5)[t],a=null!=s?s:n,l=a&&tq(a);a&&(!l||!1!==e)&&(a.mode="showing",l&&(0,_._)(this,ie,ih).call(this,a))}},300)),(0,c._)(this,e6,null),(0,c._)(this,e7,(0,_._)(this,it,il).bind(this))}}function il(t){let e=t.detail;if((0,o._)(this,e4)&&tq(e)&&e!==(0,o._)(this,e6)&&(0,_._)(this,ie,ih).call(this,e),"showing"===e.mode){let t=tq(e)?["captions","subtitles"]:[e.kind];for(let i of this.items)"showing"===i.mode&&i!=e&&t.includes(i.kind)&&(i.mode="disabled")}this.dispatchEvent(new v.DOMEvent("mode-change",{detail:t.detail,trigger:t}))}function ih(t){var e,i;"disabled"!==t.mode&&(0,_._)(this,ii,ir).call(this,t.language),null==(i=(0,o._)(this,e4))||null==(e=i.setCaptions)||e.call(i,"showing"===t.mode)}function ir(t){var e,i;null==(i=(0,o._)(this,e4))||null==(e=i.setLang)||e.call(i,(0,c._)(this,e9,t))}th.crossOrigin;let io={setAuto:Symbol(0),enableAuto:Symbol(0)};var iu=new WeakMap;let ic=t6.onUserSelect,id=t6.onReset,i_=io.setAuto;class ip extends ea{get auto(){return(0,o._)(this,iu)||this.readonly}[ic](){this[io.setAuto](!1)}[id](t){this[io.enableAuto]=void 0,this[io.setAuto](!1,t)}autoSelect(t){var e;!(this.readonly||(0,o._)(this,iu))&&this[io.enableAuto]&&(null==(e=this[io.enableAuto])||e.call(this,t),this[io.setAuto](!0,t))}getBySrc(t){return this.items.find(e=>e.src===t)}[i_](t,e){(0,o._)(this,iu)!==t&&((0,c._)(this,iu,t),this.dispatchEvent(new v.DOMEvent("auto-change",{detail:t,trigger:e})))}constructor(...t){super(...t),(0,u._)(this,iu,{writable:!0,value:void 0}),(0,c._)(this,iu,!1),this.switch="current"}}function iv(t,e){return[...t].sort(e?ig:iw)}function iw(t,e){var i,s;return t.height===e.height?(null!=(i=t.bitrate)?i:0)-(null!=(s=e.bitrate)?s:0):t.height-e.height}function ig(t,e){var i,s;return e.height===t.height?(null!=(i=e.bitrate)?i:0)-(null!=(s=t.bitrate)?s:0):e.height-t.height}io.enableAuto;class im extends v.ViewController{}let ik=new Set(["Shift","Alt","Meta","Ctrl"]),ib='input, textarea, select, [contenteditable], [role^="menuitem"], [role="timer"]';var iy=new WeakMap,iS=new WeakSet,iW=new WeakSet,i$=new WeakSet,iM=new WeakSet,ix=new WeakSet,iT=new WeakMap,iP=new WeakSet,iA=new WeakMap,iC=new WeakSet,iE=new WeakSet;class iq extends im{onConnect(){(0,v.effect)((0,_._)(this,iS,iD).bind(this))}constructor(t){super(),(0,p._)(this,iS),(0,p._)(this,iW),(0,p._)(this,i$),(0,p._)(this,iM),(0,p._)(this,ix),(0,p._)(this,iP),(0,p._)(this,iC),(0,p._)(this,iE),(0,u._)(this,iy,{writable:!0,value:void 0}),(0,u._)(this,iT,{writable:!0,value:void 0}),(0,u._)(this,iA,{writable:!0,value:void 0}),(0,c._)(this,iA,null),(0,c._)(this,iy,t)}}function iD(){let{keyDisabled:t,keyTarget:e}=this.$props;if(t())return;let i="player"===e()?this.el:document,s=(0,v.signal)(!1);i===this.el?new v.EventsController(this.el).add("focusin",()=>s.set(!0)).add("focusout",t=>{this.el.contains(t.target)||s.set(!1)}):((0,v.peek)(s)||s.set(document.querySelector("[data-media-player]")===this.el),(0,v.listenEvent)(document,"focusin",t=>{let e=t.composedPath().find(t=>t instanceof Element&&"media-player"===t.localName);void 0!==e&&s.set(this.el===e)})),(0,v.effect)(()=>{s()&&new v.EventsController(i).add("keyup",(0,_._)(this,iW,iO).bind(this)).add("keydown",(0,_._)(this,i$,iL).bind(this)).add("keydown",(0,_._)(this,iM,iI).bind(this),{capture:!0})})}function iO(t){let e=document.activeElement;if(!t.key||!this.$state.canSeek()||(null==e?void 0:e.matches(ib)))return;let{method:i,value:s}=(0,_._)(this,ix,iF).call(this,t);if(!(0,v.isString)(s)&&!(0,v.isArray)(s)){var n,a;null==s||null==(n=s.onKeyUp)||n.call(s,{event:t,player:(0,o._)(this,iy).player,remote:(0,o._)(this,iy).remote}),null==s||null==(a=s.callback)||a.call(s,t,(0,o._)(this,iy).remote);return}if((null==i?void 0:i.startsWith("seek"))&&(t.preventDefault(),t.stopPropagation(),(0,o._)(this,iA)?((0,_._)(this,iC,iR).call(this,t,"seekForward"===i),(0,c._)(this,iA,null)):((0,o._)(this,iy).remote.seek((0,o._)(this,iT),t),(0,c._)(this,iT,void 0))),null==i?void 0:i.startsWith("volume")){let e=this.el.querySelector("[data-media-volume-slider]");null==e||e.dispatchEvent(new KeyboardEvent("keyup",{key:"volumeUp"===i?"Up":"Down",shiftKey:t.shiftKey,trigger:t}))}}function iL(t){var e,i,s,n;if(!t.key||ik.has(t.key))return;let a=document.activeElement;if((null==a?void 0:a.matches(ib))||(0,v.isKeyboardClick)(t)&&(null==a?void 0:a.matches('button, [role="button"]')))return;let{method:l,value:h}=(0,_._)(this,ix,iF).call(this,t),r=!t.metaKey&&/^[0-9]$/.test(t.key);if(!(0,v.isString)(h)&&!(0,v.isArray)(h)&&!r){null==h||null==(e=h.onKeyDown)||e.call(h,{event:t,player:(0,o._)(this,iy).player,remote:(0,o._)(this,iy).remote}),null==h||null==(i=h.callback)||i.call(h,t,(0,o._)(this,iy).remote);return}if(!l&&r&&!function(t){for(let e of ik)if(t[e.toLowerCase()+"Key"])return!0;return!1}(t)){t.preventDefault(),t.stopPropagation(),(0,o._)(this,iy).remote.seek(this.$state.duration()/10*Number(t.key),t);return}if(l){switch(t.preventDefault(),t.stopPropagation(),l){case"seekForward":case"seekBackward":(0,_._)(this,iE,iN).call(this,t,l,"seekForward"===l);break;case"volumeUp":case"volumeDown":let e=this.el.querySelector("[data-media-volume-slider]");if(e)e.dispatchEvent(new KeyboardEvent("keydown",{key:"volumeUp"===l?"Up":"Down",shiftKey:t.shiftKey,trigger:t}));else{let e=t.shiftKey?.1:.05;(0,o._)(this,iy).remote.changeVolume(this.$state.volume()+("volumeUp"===l?+e:-e),t)}break;case"toggleFullscreen":(0,o._)(this,iy).remote.toggleFullscreen("prefer-media",t);break;case"speedUp":case"slowDown":let i=this.$state.playbackRate();(0,o._)(this,iy).remote.changePlaybackRate(Math.max(.25,Math.min(2,i+("speedUp"===l?.25:-.25))),t);break;default:null==(s=(n=(0,o._)(this,iy).remote)[l])||s.call(n,t)}this.$state.lastKeyboardAction.set({action:l,event:t})}}function iI(t){var e,i;i=e=t.target,(!m&&i instanceof HTMLAudioElement||!m&&e instanceof HTMLVideoElement)&&(0,_._)(this,ix,iF).call(this,t).method&&t.preventDefault()}function iF(t){let e={...this.$props.keyShortcuts(),...(0,o._)(this,iy).ariaKeys},i=Object.keys(e).find(i=>{var s;let n=e[i],a=(0,v.isArray)(n)?n.join(" "):(0,v.isString)(n)?n:null==n?void 0:n.keys,l=null==(s=(0,v.isArray)(a)?a:null==a?void 0:a.split(" "))?void 0:s.map(t=>t.replace(/Shift\+(\d)/g,(t,e)=>iG[e-1]).replace(/Control/g,"Ctrl").split("+"));return null==l?void 0:l.some(e=>{let i=new Set(e.filter(t=>ik.has(t)));for(let e of ik){let s=e.toLowerCase()+"Key";if(!i.has(e)&&t[s])return!1}return e.every(e=>ik.has(e)?t[e.toLowerCase()+"Key"]:t.key===e.replace("Space"," "))})});return{method:i,value:i?e[i]:null}}function iV(t,e){var i;let s=t.shiftKey?10:5;return(0,c._)(this,iT,Math.max(0,Math.min((null!=(i=(0,o._)(this,iT))?i:this.$state.currentTime())+("seekForward"===e?+s:-s),this.$state.duration())))}function iR(t,e){var i;null==(i=(0,o._)(this,iA))||i.dispatchEvent(new KeyboardEvent(t.type,{key:e?"Right":"Left",shiftKey:t.shiftKey,trigger:t}))}function iN(t,e,i){this.$state.canSeek()&&((0,o._)(this,iA)||(0,c._)(this,iA,this.el.querySelector("[data-media-time-slider]")),(0,o._)(this,iA)?(0,_._)(this,iC,iR).call(this,t,i):(0,o._)(this,iy).remote.seeking((0,_._)(this,iP,iV).call(this,t,e),t))}let iG=["!","@","#","$","%","^","&","*","(",")"];var ij=new WeakMap;class iK extends v.ViewController{onAttach(t){let{$props:e,ariaKeys:i}=tK(),s=t.getAttribute("aria-keyshortcuts");if(s){i[(0,o._)(this,ij)]=s,m||(0,v.onDispose)(()=>{delete i[(0,o._)(this,ij)]});return}let n=e.keyShortcuts()[(0,o._)(this,ij)];if(n){let e=(0,v.isArray)(n)?n.join(" "):(0,v.isString)(n)?n:null==n?void 0:n.keys;t.setAttribute("aria-keyshortcuts",(0,v.isArray)(e)?e.join(" "):e)}}constructor(t){super(),(0,u._)(this,ij,{writable:!0,value:void 0}),(0,c._)(this,ij,t)}}var iU=new WeakMap,iB=new WeakMap,iH=new WeakMap,iQ=new WeakMap,iz=new WeakMap,iX=new WeakMap,iY=new WeakSet,iJ=new WeakSet,iZ=new WeakSet,i0=new WeakSet,i1=new WeakSet,i2=new WeakSet,i3=new WeakSet,i5=new WeakSet,i4=new WeakSet,i9=new WeakSet,i8=new WeakSet,i6=new WeakSet;class i7 extends im{get canIdle(){return(0,o._)(this,iX).call(this)}set canIdle(t){(0,o._)(this,iX).set(t)}get hideOnMouseLeave(){let{hideControlsOnMouseLeave:t}=this.$props;return(0,o._)(this,iH).call(this)||t()}set hideOnMouseLeave(t){(0,o._)(this,iH).set(t)}get showing(){return this.$state.controlsVisible()}show(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;(0,_._)(this,i4,sr).call(this),(0,o._)(this,iB)||(0,_._)(this,i8,su).call(this,!0,t,e)}hide(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultDelay,e=arguments.length>1?arguments[1]:void 0;(0,_._)(this,i4,sr).call(this),(0,o._)(this,iB)||(0,_._)(this,i8,su).call(this,!1,t,e)}pause(t){(0,c._)(this,iB,!0),(0,_._)(this,i4,sr).call(this),(0,_._)(this,i8,su).call(this,!0,0,t)}resume(t){(0,c._)(this,iB,!1),this.$state.paused()||(0,_._)(this,i8,su).call(this,!1,this.defaultDelay,t)}onConnect(){(0,v.effect)((0,_._)(this,iY,st).bind(this))}constructor(...t){super(...t),(0,p._)(this,iY),(0,p._)(this,iJ),(0,p._)(this,iZ),(0,p._)(this,i0),(0,p._)(this,i1),(0,p._)(this,i2),(0,p._)(this,i3),(0,p._)(this,i5),(0,p._)(this,i4),(0,p._)(this,i9),(0,p._)(this,i8),(0,p._)(this,i6),(0,u._)(this,iU,{writable:!0,value:void 0}),(0,u._)(this,iB,{writable:!0,value:void 0}),(0,u._)(this,iH,{writable:!0,value:void 0}),(0,u._)(this,iQ,{writable:!0,value:void 0}),(0,u._)(this,iz,{writable:!0,value:void 0}),(0,u._)(this,iX,{writable:!0,value:void 0}),(0,c._)(this,iU,-2),(0,c._)(this,iB,!1),(0,c._)(this,iH,(0,v.signal)(!1)),(0,c._)(this,iQ,(0,v.signal)(!1)),(0,c._)(this,iz,null),(0,c._)(this,iX,(0,v.signal)(!0)),this.defaultDelay=2e3}}function st(){let{viewType:t}=this.$state;if(!this.el||!(0,o._)(this,iX).call(this))return;if("audio"===t())return void this.show();(0,v.effect)((0,_._)(this,iJ,se).bind(this)),(0,v.effect)((0,_._)(this,iZ,si).bind(this));let e=(0,_._)(this,i0,ss).bind(this),i=(0,_._)(this,i1,sn).bind(this),s=(0,_._)(this,i2,sa).bind(this);new v.EventsController(this.el).add("can-play",t=>this.show(0,t)).add("play",e).add("pause",i).add("end",s).add("auto-play-fail",i)}function se(){if(!this.el)return;let{started:t,pointer:e,paused:i}=this.$state;if(!t()||"fine"!==e())return;let s=new v.EventsController(this.el),n=this.hideOnMouseLeave;n&&(0,o._)(this,iQ).call(this)||(0,v.effect)(()=>{i()||s.add("pointermove",(0,_._)(this,i9,so).bind(this))}),n&&s.add("mouseenter",(0,_._)(this,i3,sl).bind(this)).add("mouseleave",(0,_._)(this,i5,sh).bind(this))}function si(){let{paused:t,started:e,autoPlayError:i}=this.$state;if(t()||i()&&!e())return;let s=(0,_._)(this,i9,so).bind(this);(0,v.effect)(()=>{if(!this.el)return;let t=this.$state.pointer(),e=new v.EventsController(this.el);for(let i of["coarse"===t?"touchend":"pointerup","keydown"])e.add(i,s,{passive:!1})})}function ss(t){t.triggers.hasType("ended")||(this.show(0,t),this.hide(void 0,t))}function sn(t){this.show(0,t)}function sa(t){let{loop:e}=this.$state;e()&&this.hide(0,t)}function sl(t){(0,o._)(this,iQ).set(!1),this.show(0,t),this.hide(void 0,t)}function sh(t){(0,o._)(this,iQ).set(!0),this.hide(0,t)}function sr(){window.clearTimeout((0,o._)(this,iU)),(0,c._)(this,iU,-1)}function so(t){if(!(t.MEDIA_GESTURE||(0,o._)(this,iB)||eg(t))){if((0,v.isKeyboardEvent)(t))if("Escape"===t.key){var e;null==(e=this.el)||e.focus(),(0,c._)(this,iz,null)}else(0,o._)(this,iz)&&(t.preventDefault(),requestAnimationFrame(()=>{var t;null==(t=(0,o._)(this,iz))||t.focus(),(0,c._)(this,iz,null)}));this.show(0,t),this.hide(this.defaultDelay,t)}}function su(t,e,i){if(0===e)return void(0,_._)(this,i6,sc).call(this,t,i);(0,c._)(this,iU,window.setTimeout(()=>{this.scope&&(0,_._)(this,i6,sc).call(this,t&&!(0,o._)(this,iB),i)},e))}function sc(t,e){var i;this.$state.controlsVisible()!==t&&(this.$state.controlsVisible.set(t),!t&&document.activeElement&&(null==(i=this.el)?void 0:i.contains(document.activeElement))&&((0,c._)(this,iz,document.activeElement),requestAnimationFrame(()=>{var t;null==(t=this.el)||t.focus({preventScroll:!0})})),this.dispatch("controls-change",{detail:t,trigger:e}))}let sd=v.fscreen.fullscreenEnabled;var s_=new WeakMap,sp=new WeakMap,sf=new WeakSet,sv=new WeakSet,sw=new WeakSet;class sg extends v.ViewController{get active(){return(0,o._)(this,sp)}get supported(){return sd}onConnect(){new v.EventsController(v.fscreen).add("fullscreenchange",(0,_._)(this,sv,sk).bind(this)).add("fullscreenerror",(0,_._)(this,sw,sb).bind(this)),(0,v.onDispose)((0,_._)(this,sf,sm).bind(this))}async enter(){try{if((0,c._)(this,s_,!0),!this.el||sy(this.el))return;return sS(),v.fscreen.requestFullscreen(this.el)}catch(t){throw(0,c._)(this,s_,!1),t}}async exit(){if(this.el&&sy(this.el))return sS(),v.fscreen.exitFullscreen()}constructor(...t){super(...t),(0,p._)(this,sf),(0,p._)(this,sv),(0,p._)(this,sw),(0,u._)(this,s_,{writable:!0,value:void 0}),(0,u._)(this,sp,{writable:!0,value:void 0}),(0,c._)(this,s_,!1),(0,c._)(this,sp,!1)}}async function sm(){sd&&await this.exit()}function sk(t){let e=sy(this.el);e!==(0,o._)(this,sp)&&(e||(0,c._)(this,s_,!1),(0,c._)(this,sp,e),this.dispatch("fullscreen-change",{detail:e,trigger:t}))}function sb(t){(0,o._)(this,s_)&&(this.dispatch("fullscreen-error",{detail:null,trigger:t}),(0,c._)(this,s_,!1))}function sy(t){if(v.fscreen.fullscreenElement===t)return!0;try{return t.matches(v.fscreen.fullscreenPseudoClass)}catch(t){return!1}}function sS(){if(!sd)throw Error("[vidstack] no fullscreen API")}var sW=new WeakMap,s$=new WeakMap,sM=new WeakMap,sx=new WeakSet,sT=new WeakSet,sP=new WeakSet,sA=new WeakSet;class sC extends v.ViewController{get type(){return(0,o._)(this,sW).call(this)}get locked(){return(0,o._)(this,s$).call(this)}get portrait(){return(0,o._)(this,sW).call(this).startsWith("portrait")}get landscape(){return(0,o._)(this,sW).call(this).startsWith("landscape")}get supported(){return sC.supported}onConnect(){if(this.supported)(0,v.listenEvent)(screen.orientation,"change",(0,_._)(this,sT,sq).bind(this));else{let t=window.matchMedia("(orientation: landscape)");t.onchange=(0,_._)(this,sT,sq).bind(this),(0,v.onDispose)(()=>t.onchange=null)}(0,v.onDispose)((0,_._)(this,sx,sE).bind(this))}async lock(t){(0,v.peek)((0,o._)(this,s$))||(0,o._)(this,sM)===t||((0,_._)(this,sP,sD).call(this),await screen.orientation.lock(t),(0,o._)(this,s$).set(!0),(0,c._)(this,sM,t))}async unlock(){(0,v.peek)((0,o._)(this,s$))&&((0,_._)(this,sP,sD).call(this),(0,c._)(this,sM,void 0),await screen.orientation.unlock(),(0,o._)(this,s$).set(!1))}constructor(...t){super(...t),(0,p._)(this,sx),(0,p._)(this,sT),(0,p._)(this,sP),(0,p._)(this,sA),(0,u._)(this,sW,{writable:!0,value:void 0}),(0,u._)(this,s$,{writable:!0,value:void 0}),(0,u._)(this,sM,{writable:!0,value:void 0}),(0,c._)(this,sW,(0,v.signal)((0,_._)(this,sA,sO).call(this))),(0,c._)(this,s$,(0,v.signal)(!1))}}async function sE(){this.supported&&(0,o._)(this,s$).call(this)&&await this.unlock()}function sq(t){(0,o._)(this,sW).set((0,_._)(this,sA,sO).call(this)),this.dispatch("orientation-change",{detail:{orientation:(0,v.peek)((0,o._)(this,sW)),lock:(0,o._)(this,sM)},trigger:t})}function sD(){if(!this.supported)throw Error("[vidstack] no orientation API")}function sO(){return m?"portrait-primary":this.supported?window.screen.orientation.type:window.innerWidth>=window.innerHeight?"landscape-primary":"portrait-primary"}sC.supported=$();class sL{canPlay(t){return!!U(t)&&(m||!(0,v.isString)(t.src)||"?"===t.type||M(this.target,t.type))}mediaType(){return"audio"}async load(t){if(m)throw Error("[vidstack] can not load audio provider server-side");return new(await i.e(187).then(i.bind(i,3187))).AudioProvider(this.target,t)}constructor(){this.name="audio"}}class sI{canPlay(t){return!!B(t)&&(m||!(0,v.isString)(t.src)||"?"===t.type||x(this.target,t.type))}mediaType(){return"video"}async load(t){if(m)throw Error("[vidstack] can not load video provider server-side");return new(await Promise.resolve().then(function(){return lr})).VideoProvider(this.target,t)}constructor(){this.name="video"}}class sF extends sI{canPlay(t){return sF.supported&&H(t)}async load(t){if(m)throw Error("[vidstack] can not load hls provider server-side");return new(await i.e(11).then(i.bind(i,9011))).HLSProvider(this.target,t)}constructor(...t){super(...t),this.name="hls"}}sF.supported=E();let sV=null,sR=[],sN=[];function sG(){return null!=sV?sV:sV=new AudioContext}function sj(){sV&&0===sR.length&&0===sN.length&&sV.close().then(()=>{sV=null})}var sK=new WeakMap,sU=new WeakMap,sB=new WeakMap,sH=new WeakMap,sQ=new WeakSet,sz=new WeakSet;class sX{get currentGain(){var t,e,i;return null!=(i=null==(e=(0,o._)(this,sB))||null==(t=e.gain)?void 0:t.value)?i:null}get supported(){return!0}setGain(t){let e=this.currentGain;if(t!==this.currentGain){if(1===t&&1!==e)return void this.removeGain();!(0,o._)(this,sB)&&((0,c._)(this,sB,function(){let t=sG(),e=t.createGain();return e.connect(t.destination),sR.push(e),e}()),(0,o._)(this,sH)&&(0,o._)(this,sH).connect((0,o._)(this,sB))),(0,o._)(this,sH)||(0,c._)(this,sH,function(t,e){let i=sG().createMediaElementSource(t);return e&&i.connect(e),sN.push(i),i}((0,o._)(this,sK),(0,o._)(this,sB))),(0,o._)(this,sB).gain.value=t,(0,o._)(this,sU).call(this,t)}}removeGain(){(0,o._)(this,sB)&&((0,o._)(this,sH)&&(0,o._)(this,sH).connect(sG().destination),(0,_._)(this,sz,sJ).call(this),(0,o._)(this,sU).call(this,null))}destroy(){(0,_._)(this,sQ,sY).call(this),(0,_._)(this,sz,sJ).call(this)}constructor(t,e){(0,p._)(this,sQ),(0,p._)(this,sz),(0,u._)(this,sK,{writable:!0,value:void 0}),(0,u._)(this,sU,{writable:!0,value:void 0}),(0,u._)(this,sB,{writable:!0,value:void 0}),(0,u._)(this,sH,{writable:!0,value:void 0}),(0,c._)(this,sB,null),(0,c._)(this,sH,null),(0,c._)(this,sK,t),(0,c._)(this,sU,e)}}function sY(){if((0,o._)(this,sH))try{var t=(0,o._)(this,sH);let e=sN.indexOf(t);-1!==e&&(sN.splice(e,1),t.disconnect(),sj())}catch(t){}finally{(0,c._)(this,sH,null)}}function sJ(){if((0,o._)(this,sB))try{var t=(0,o._)(this,sB);let e=sR.indexOf(t);-1!==e&&(sR.splice(e,1),t.disconnect(),sj())}catch(t){}finally{(0,c._)(this,sB,null)}}let sZ=["focus","blur","visibilitychange","pageshow","pagehide"];var s0=new WeakMap,s1=new WeakMap,s2=new WeakMap,s3=new WeakSet;class s5{connect(){let t=new v.EventsController(window),e=(0,_._)(this,s3,s4).bind(this);for(let i of sZ)t.add(i,e);W&&t.add("beforeunload",t=>{(0,c._)(this,s2,setTimeout(()=>{t.defaultPrevented||t.returnValue.length>0||((0,o._)(this,s0).set("hidden"),(0,o._)(this,s1).set("hidden"))},0))})}get pageState(){return(0,o._)(this,s0).call(this)}get visibility(){return(0,o._)(this,s1).call(this)}constructor(){(0,p._)(this,s3),(0,u._)(this,s0,{writable:!0,value:void 0}),(0,u._)(this,s1,{writable:!0,value:void 0}),(0,u._)(this,s2,{writable:!0,value:void 0}),(0,c._)(this,s0,(0,v.signal)(s9())),(0,c._)(this,s1,(0,v.signal)(m?"visible":document.visibilityState))}}function s4(t){W&&window.clearTimeout((0,o._)(this,s2)),("blur"!==t.type||"active"===(0,o._)(this,s0).call(this))&&((0,o._)(this,s0).set(s9(t)),(0,o._)(this,s1).set("hidden"==document.visibilityState?"hidden":"visible"))}function s9(t){return m||(null==t?void 0:t.type)==="blur"||"hidden"===document.visibilityState?"hidden":document.hasFocus()?"active":"passive"}var s8=new WeakMap,s6=new WeakMap,s7=new WeakSet;class nt{start(){(0,v.isUndefined)((0,o._)(this,s8))&&(0,_._)(this,s7,ne).call(this)}stop(){(0,v.isNumber)((0,o._)(this,s8))&&window.cancelAnimationFrame((0,o._)(this,s8)),(0,c._)(this,s8,void 0)}constructor(t){(0,p._)(this,s7),(0,u._)(this,s8,{writable:!0,value:void 0}),(0,u._)(this,s6,{writable:!0,value:void 0}),(0,c._)(this,s6,t)}}function ne(){(0,c._)(this,s8,window.requestAnimationFrame(()=>{(0,v.isUndefined)((0,o._)(this,s8))||((0,o._)(this,s6).call(this),(0,_._)(this,s7,ne).call(this))}))}var ni=new WeakMap,ns=new WeakMap,nn=new WeakMap,na=new WeakMap,nl=new WeakMap,nh=new WeakMap,nr=new WeakMap,no=new WeakMap,nu=new WeakMap,nc=new WeakSet,nd=new WeakMap,n_=new WeakMap,np=new WeakSet,nf=new WeakSet,nv=new WeakSet,nw=new WeakSet,ng=new WeakMap,nm=new WeakMap,nk=new WeakSet,nb=new WeakSet,ny=new WeakSet,nS=new WeakSet,nW=new WeakSet,n$=new WeakSet,nM=new WeakSet,nx=new WeakSet,nT=new WeakSet,nP=new WeakSet,nA=new WeakSet,nC=new WeakSet,nE=new WeakSet,nq=new WeakSet,nD=new WeakSet,nO=new WeakSet,nL=new WeakSet,nI=new WeakSet,nF=new WeakSet,nV=new WeakSet,nR=new WeakSet,nN=new WeakSet,nG=new WeakSet,nj=new WeakSet,nK=new WeakSet,nU=new WeakSet,nB=new WeakSet;class nH{constructor(t,e){(0,u._)(this,nu,{get:nQ,set:void 0}),(0,p._)(this,nc),(0,p._)(this,np),(0,p._)(this,nf),(0,p._)(this,nv),(0,p._)(this,nw),(0,p._)(this,nk),(0,p._)(this,nb),(0,p._)(this,ny),(0,p._)(this,nS),(0,p._)(this,nW),(0,p._)(this,n$),(0,p._)(this,nM),(0,p._)(this,nx),(0,p._)(this,nT),(0,p._)(this,nP),(0,p._)(this,nA),(0,p._)(this,nC),(0,p._)(this,nE),(0,p._)(this,nq),(0,p._)(this,nD),(0,p._)(this,nO),(0,p._)(this,nL),(0,p._)(this,nI),(0,p._)(this,nF),(0,p._)(this,nV),(0,p._)(this,nR),(0,p._)(this,nN),(0,p._)(this,nG),(0,p._)(this,nj),(0,p._)(this,nK),(0,p._)(this,nU),(0,p._)(this,nB),(0,u._)(this,ni,{writable:!0,value:void 0}),(0,u._)(this,ns,{writable:!0,value:void 0}),(0,u._)(this,nn,{writable:!0,value:void 0}),(0,u._)(this,na,{writable:!0,value:void 0}),(0,u._)(this,nl,{writable:!0,value:void 0}),(0,u._)(this,nh,{writable:!0,value:void 0}),(0,u._)(this,nr,{writable:!0,value:void 0}),(0,u._)(this,no,{writable:!0,value:void 0}),(0,u._)(this,nd,{writable:!0,value:void 0}),(0,u._)(this,n_,{writable:!0,value:void 0}),(0,u._)(this,ng,{writable:!0,value:void 0}),(0,u._)(this,nm,{writable:!0,value:void 0}),(0,c._)(this,nn,!1),(0,c._)(this,na,!1),(0,c._)(this,nl,!1),(0,c._)(this,nh,new nt((0,_._)(this,np,nX).bind(this))),(0,c._)(this,nr,new s5),(0,c._)(this,nd,0),(0,c._)(this,n_,-1),(0,c._)(this,ng,void 0),(0,c._)(this,nm,void 0),(0,c._)(this,ni,t),(0,c._)(this,ns,e),(0,c._)(this,no,new v.EventsController(t.media)),(0,_._)(this,nf,nY).call(this),(0,o._)(this,nr).connect(),(0,v.effect)((0,_._)(this,nI,al).bind(this)),(0,v.onDispose)((0,_._)(this,nc,nz).bind(this))}}function nQ(){return(0,o._)(this,ni).media}function nz(){var t;(0,c._)(this,na,!1),(0,c._)(this,nl,!1),(0,o._)(this,nh).stop(),(0,o._)(this,no).abort(),null==(t=(0,o._)(this,ng))||t.clear()}function nX(){let t=(0,o._)(this,nu).currentTime;W&&t-(0,o._)(this,n_)<.35||(0,o._)(this,nd)===t||((0,_._)(this,ny,n1).call(this,t),(0,c._)(this,nd,t))}function nY(){(0,_._)(this,nk,n0).call(this,"loadstart",(0,_._)(this,nS,n2)),(0,_._)(this,nk,n0).call(this,"abort",(0,_._)(this,nW,n3)),(0,_._)(this,nk,n0).call(this,"emptied",(0,_._)(this,n$,n5)),(0,_._)(this,nk,n0).call(this,"error",(0,_._)(this,nB,af)),(0,_._)(this,nk,n0).call(this,"volumechange",(0,_._)(this,nR,ao))}function nJ(){(0,o._)(this,na)||((0,_._)(this,nk,n0).call(this,"loadeddata",(0,_._)(this,nM,n4)),(0,_._)(this,nk,n0).call(this,"loadedmetadata",(0,_._)(this,nx,n9)),(0,_._)(this,nk,n0).call(this,"canplay",(0,_._)(this,nC,at)),(0,_._)(this,nk,n0).call(this,"canplaythrough",(0,_._)(this,nE,ae)),(0,_._)(this,nk,n0).call(this,"durationchange",(0,_._)(this,nV,ar)),(0,_._)(this,nk,n0).call(this,"play",(0,_._)(this,nP,n6)),(0,_._)(this,nk,n0).call(this,"progress",(0,_._)(this,nj,ad)),(0,_._)(this,nk,n0).call(this,"stalled",(0,_._)(this,nD,as)),(0,_._)(this,nk,n0).call(this,"suspend",(0,_._)(this,nK,a_)),(0,_._)(this,nk,n0).call(this,"ratechange",(0,_._)(this,nU,ap)),(0,c._)(this,na,!0))}function nZ(){(0,o._)(this,nl)||((0,_._)(this,nk,n0).call(this,"pause",(0,_._)(this,nA,n7)),(0,_._)(this,nk,n0).call(this,"playing",(0,_._)(this,nq,ai)),(0,_._)(this,nk,n0).call(this,"seeked",(0,_._)(this,nN,au)),(0,_._)(this,nk,n0).call(this,"seeking",(0,_._)(this,nG,ac)),(0,_._)(this,nk,n0).call(this,"ended",(0,_._)(this,nL,aa)),(0,_._)(this,nk,n0).call(this,"waiting",(0,_._)(this,nO,an)),(0,c._)(this,nl,!0))}function n0(t,e){(0,o._)(this,no).add(t,e.bind(this))}function n1(t,e){let i=Math.min(t,(0,o._)(this,ns).$state.seekableEnd());(0,o._)(this,ns).notify("time-change",i,e)}function n2(t){if(3===(0,o._)(this,nu).networkState)return void(0,_._)(this,nW,n3).call(this,t);(0,_._)(this,nv,nJ).call(this),(0,o._)(this,ns).notify("load-start",void 0,t)}function n3(t){(0,o._)(this,ns).notify("abort",void 0,t)}function n5(){(0,o._)(this,ns).notify("emptied",void 0,event)}function n4(t){(0,o._)(this,ns).notify("loaded-data",void 0,t)}function n9(t){(0,c._)(this,nd,0),(0,c._)(this,n_,-1),(0,_._)(this,nw,nZ).call(this),(0,o._)(this,ns).notify("loaded-metadata",void 0,t),(b||W&&H((0,o._)(this,ns).$state.source()))&&(0,o._)(this,ns).delegate.ready((0,_._)(this,nT,n8).call(this),t)}function n8(){return{provider:(0,v.peek)((0,o._)(this,ns).$provider),duration:(0,o._)(this,nu).duration,buffered:(0,o._)(this,nu).buffered,seekable:(0,o._)(this,nu).seekable}}function n6(t){(0,o._)(this,ns).$state.canPlay&&(0,o._)(this,ns).notify("play",void 0,t)}function n7(t){(1!==(0,o._)(this,nu).readyState||(0,o._)(this,nn))&&((0,c._)(this,nn,!1),(0,o._)(this,nh).stop(),(0,o._)(this,ns).notify("pause",void 0,t))}function at(t){(0,o._)(this,ns).delegate.ready((0,_._)(this,nT,n8).call(this),t)}function ae(t){(0,o._)(this,ns).$state.started()||(0,o._)(this,ns).notify("can-play-through",(0,_._)(this,nT,n8).call(this),t)}function ai(t){(0,o._)(this,nu).paused||((0,c._)(this,nn,!1),(0,o._)(this,ns).notify("playing",void 0,t),(0,o._)(this,nh).start())}function as(t){(0,o._)(this,ns).notify("stalled",void 0,t),(0,o._)(this,nu).readyState<3&&((0,c._)(this,nn,!0),(0,o._)(this,ns).notify("waiting",void 0,t))}function an(t){(0,o._)(this,nu).readyState<3&&((0,c._)(this,nn,!0),(0,o._)(this,ns).notify("waiting",void 0,t))}function aa(t){(0,o._)(this,nh).stop(),(0,_._)(this,ny,n1).call(this,(0,o._)(this,nu).duration,t),(0,o._)(this,ns).notify("end",void 0,t),(0,o._)(this,ns).$state.loop()&&(0,v.isNil)((0,o._)(this,nu).controls)&&((0,o._)(this,nu).controls=!1)}function al(){let t=(0,o._)(this,ns).$state.paused(),e="hidden"===(0,o._)(this,nr).visibility;(t||e)&&(0,v.listenEvent)((0,o._)(this,nu),"timeupdate",(0,_._)(this,nF,ah).bind(this))}function ah(t){(0,_._)(this,ny,n1).call(this,(0,o._)(this,nu).currentTime,t)}function ar(t){(0,o._)(this,ns).$state.ended()&&(0,_._)(this,ny,n1).call(this,(0,o._)(this,nu).duration,t),(0,o._)(this,ns).notify("duration-change",(0,o._)(this,nu).duration,t)}function ao(t){let e={volume:(0,o._)(this,nu).volume,muted:(0,o._)(this,nu).muted};(0,o._)(this,ns).notify("volume-change",e,t)}function au(t){(0,c._)(this,n_,(0,o._)(this,nu).currentTime),(0,_._)(this,ny,n1).call(this,(0,o._)(this,nu).currentTime,t),(0,o._)(this,ns).notify("seeked",(0,o._)(this,nu).currentTime,t),Math.trunc((0,o._)(this,nu).currentTime)===Math.trunc((0,o._)(this,nu).duration)&&er((0,o._)(this,nu).duration)>er((0,o._)(this,nu).currentTime)&&((0,_._)(this,ny,n1).call(this,(0,o._)(this,nu).duration,t),(0,o._)(this,nu).ended||(0,o._)(this,ns).player.dispatch(new v.DOMEvent("media-play-request",{trigger:t})))}function ac(t){(0,o._)(this,ns).notify("seeking",(0,o._)(this,nu).currentTime,t)}function ad(t){let e={buffered:(0,o._)(this,nu).buffered,seekable:(0,o._)(this,nu).seekable};(0,o._)(this,ns).notify("progress",e,t)}function a_(t){(0,o._)(this,ns).notify("suspend",void 0,t)}function ap(t){(0,o._)(this,ns).notify("rate-change",(0,o._)(this,nu).playbackRate,t)}function af(t){let e=(0,o._)(this,nu).error;if(!e)return;let i={message:e.message,code:e.code,mediaError:e};(0,o._)(this,ns).notify("error",i,t)}var av=new WeakMap,aw=new WeakMap,ag=new WeakMap,am=new WeakSet,ak=new WeakSet,ab=new WeakSet,ay=new WeakSet,aS=new WeakSet;class aW{constructor(t,e){(0,u._)(this,ag,{get:a$,set:void 0}),(0,p._)(this,am),(0,p._)(this,ak),(0,p._)(this,ab),(0,p._)(this,ay),(0,p._)(this,aS),(0,u._)(this,av,{writable:!0,value:void 0}),(0,u._)(this,aw,{writable:!0,value:void 0}),(0,c._)(this,av,t),(0,c._)(this,aw,e),(0,o._)(this,ag).onaddtrack=(0,_._)(this,am,aM).bind(this),(0,o._)(this,ag).onremovetrack=(0,_._)(this,ak,ax).bind(this),(0,o._)(this,ag).onchange=(0,_._)(this,ab,aT).bind(this),(0,v.listenEvent)((0,o._)(this,aw).audioTracks,"change",(0,_._)(this,aS,aA).bind(this))}}function a$(){return(0,o._)(this,av).media.audioTracks}function aM(t){let e=t.track;if(""===e.label)return;let i={id:e.id.toString()||"native-audio-".concat((0,o._)(this,aw).audioTracks.length),label:e.label,language:e.language,kind:e.kind,selected:!1};(0,o._)(this,aw).audioTracks[t6.add](i,t),e.enabled&&(i.selected=!0)}function ax(t){let e=(0,o._)(this,aw).audioTracks.getById(t.track.id);e&&(0,o._)(this,aw).audioTracks[t6.remove](e,t)}function aT(t){let e=(0,_._)(this,ay,aP).call(this);if(!e)return;let i=(0,o._)(this,aw).audioTracks.getById(e.id);i&&(0,o._)(this,aw).audioTracks[t6.select](i,!0,t)}function aP(){return Array.from((0,o._)(this,ag)).find(t=>t.enabled)}function aA(t){let{current:e}=t.detail;if(!e)return;let i=(0,o._)(this,ag).getTrackById(e.id);if(i){let t=(0,_._)(this,ay,aP).call(this);t&&(t.enabled=!1),i.enabled=!0}}var aC=new WeakSet;class aE{setup(){new nH(this,this.ctx),"audioTracks"in this.media&&new aW(this,this.ctx),(0,v.onDispose)(()=>{for(let t of(this.audioGain.destroy(),this.media.srcObject=null,this.media.removeAttribute("src"),this.media.querySelectorAll("source")))t.remove();this.media.load()})}get type(){return""}setPlaybackRate(t){this.media.playbackRate=t}async play(){return this.media.play()}async pause(){return this.media.pause()}setMuted(t){this.media.muted=t}setVolume(t){this.media.volume=t}setCurrentTime(t){this.media.currentTime=t}setPlaysInline(t){(0,v.setAttribute)(this.media,"playsinline",t)}async loadSource(t,e){let{src:i,type:s}=t;(this.media.preload=e||"",!m&&void 0!==window.MediaStream&&i instanceof window.MediaStream)?(this.removeSource(),this.media.srcObject=i):(this.media.srcObject=null,(0,v.isString)(i)?"?"!==s?this.appendSource({src:i,type:s}):(this.removeSource(),this.media.src=(0,_._)(this,aC,aq).call(this,i)):(this.removeSource(),this.media.src=window.URL.createObjectURL(i))),this.media.load(),this.currentSrc={src:i,type:s}}appendSource(t,e){let i=this.media.querySelector("source[data-vds]"),s=null!=i?i:document.createElement("source");(0,v.setAttribute)(s,"src",(0,_._)(this,aC,aq).call(this,t.src)),(0,v.setAttribute)(s,"type","?"!==t.type?t.type:e),(0,v.setAttribute)(s,"data-vds",""),i||this.media.append(s)}removeSource(){var t;null==(t=this.media.querySelector("source[data-vds]"))||t.remove()}constructor(t,e){(0,p._)(this,aC),this.scope=(0,v.createScope)(),this.currentSrc=null,this.media=t,this.ctx=e,this.audioGain=new sX(t,t=>{this.ctx.notify("audio-gain-change",t)})}}function aq(t){let{clipStartTime:e,clipEndTime:i}=this.ctx.$state,s=e(),n=i();return s>0&&n>0?"".concat(t,"#t=").concat(s,",").concat(n):s>0?"".concat(t,"#t=").concat(s):n>0?"".concat(t,"#t=0,").concat(n):t}var aD=new WeakMap,aO=new WeakMap,aL=new WeakMap,aI=new WeakMap,aF=new WeakSet,aV=new WeakSet,aR=new WeakSet;class aN{get supported(){return(0,o._)(this,aI).call(this)}async prompt(){if(!this.supported)throw Error("Not supported on this platform.");return"airplay"===this.type&&(0,o._)(this,aD).webkitShowPlaybackTargetPicker?(0,o._)(this,aD).webkitShowPlaybackTargetPicker():(0,o._)(this,aD).remote.prompt()}constructor(t,e){(0,p._)(this,aF),(0,p._)(this,aV),(0,p._)(this,aR),(0,u._)(this,aD,{writable:!0,value:void 0}),(0,u._)(this,aO,{writable:!0,value:void 0}),(0,u._)(this,aL,{writable:!0,value:void 0}),(0,u._)(this,aI,{writable:!0,value:void 0}),(0,c._)(this,aI,(0,v.signal)(!1)),(0,c._)(this,aD,t),(0,c._)(this,aO,e),(0,_._)(this,aF,aG).call(this)}}function aG(){var t;!m&&(null==(t=(0,o._)(this,aD))?void 0:t.remote)&&this.canPrompt&&((0,o._)(this,aD).remote.watchAvailability(t=>{(0,o._)(this,aI).set(t)}).catch(()=>{(0,o._)(this,aI).set(!1)}),(0,v.effect)((0,_._)(this,aV,aj).bind(this)))}function aj(){if(!(0,o._)(this,aI).call(this))return;let t=(0,_._)(this,aR,aK).bind(this);t(),(0,v.listenEvent)((0,o._)(this,aD),"playing",t);let e=new v.EventsController((0,o._)(this,aD).remote);for(let i of["connecting","connect","disconnect"])e.add(i,t)}function aK(t){let e=(0,o._)(this,aD).remote.state;if(e===(0,o._)(this,aL))return;let i={type:this.type,state:e};(0,o._)(this,aO).notify("remote-playback-change",i,t),(0,c._)(this,aL,e)}class aU extends aN{get canPrompt(){return"WebKitPlaybackTargetAvailabilityEvent"in window}constructor(...t){super(...t),this.type="airplay"}}var aB=new WeakMap,aH=new WeakMap,aQ=new WeakSet,az=new WeakSet;class aX{constructor(t,e){(0,p._)(this,aQ),(0,p._)(this,az),(0,u._)(this,aB,{writable:!0,value:void 0}),(0,u._)(this,aH,{writable:!0,value:void 0}),(0,c._)(this,aB,t),(0,c._)(this,aH,e),t.textTracks.onaddtrack=(0,_._)(this,aQ,aY).bind(this),(0,v.onDispose)((0,_._)(this,az,aJ).bind(this))}}function aY(t){var e,i,s;let n=t.track;if(!n||(i=(0,o._)(this,aB),s=n,Array.from(i.children).find(t=>t.track===s)))return;let a=new t$({id:n.id,kind:n.kind,label:null!=(e=n.label)?e:"",language:n.language,type:"vtt"});a[th.native]={track:n},a[th.readyState]=2,a[th.nativeHLS]=!0;let l=0,h=t=>{if(n.cues)for(let e=l;e<n.cues.length;e++)a.addCue(n.cues[e],t),l++};h(t),n.oncuechange=h,(0,o._)(this,aH).textTracks.add(a,t),a.setMode(n.mode,t)}function aJ(){for(let e of((0,o._)(this,aB).textTracks.onaddtrack=null,(0,o._)(this,aH).textTracks)){var t;let i=null==(t=e[th.native])?void 0:t.track;(null==i?void 0:i.oncuechange)&&(i.oncuechange=null)}}var aZ=new WeakMap,a0=new WeakMap,a1=new WeakSet,a2=new WeakSet,a3=new WeakMap;class a5{get active(){return document.pictureInPictureElement===(0,o._)(this,aZ)}get supported(){return P((0,o._)(this,aZ))}async enter(){return(0,o._)(this,aZ).requestPictureInPicture()}exit(){return document.exitPictureInPicture()}constructor(t,e){(0,p._)(this,a1),(0,p._)(this,a2),(0,u._)(this,aZ,{writable:!0,value:void 0}),(0,u._)(this,a0,{writable:!0,value:void 0}),(0,u._)(this,a3,{writable:!0,value:void 0}),(0,c._)(this,a3,(t,e)=>{(0,o._)(this,a0).notify("picture-in-picture-change",t,e)}),(0,c._)(this,aZ,t),(0,c._)(this,a0,e),new v.EventsController(t).add("enterpictureinpicture",(0,_._)(this,a1,a4).bind(this)).add("leavepictureinpicture",(0,_._)(this,a2,a9).bind(this))}}function a4(t){(0,o._)(this,a3).call(this,!0,t)}function a9(t){(0,o._)(this,a3).call(this,!1,t)}var a8=new WeakMap,a6=new WeakMap,a7=new WeakMap,lt=new WeakSet;class le{get mode(){return(0,o._)(this,a7)}get supported(){return A((0,o._)(this,a8))}async setPresentationMode(t){(0,o._)(this,a7)!==t&&(0,o._)(this,a8).webkitSetPresentationMode(t)}constructor(t,e){(0,p._)(this,lt),(0,u._)(this,a8,{writable:!0,value:void 0}),(0,u._)(this,a6,{writable:!0,value:void 0}),(0,u._)(this,a7,{writable:!0,value:void 0}),(0,c._)(this,a7,"inline"),(0,c._)(this,a8,t),(0,c._)(this,a6,e),(0,v.listenEvent)(t,"webkitpresentationmodechanged",(0,_._)(this,lt,li).bind(this))}}function li(t){var e;let i=(0,o._)(this,a7);(0,c._)(this,a7,(0,o._)(this,a8).webkitPresentationMode),null==(e=(0,o._)(this,a6).player)||e.dispatch(new v.DOMEvent("video-presentation-change",{detail:(0,o._)(this,a7),trigger:t})),["fullscreen","picture-in-picture"].forEach(e=>{((0,o._)(this,a7)===e||i===e)&&(0,o._)(this,a6).notify("".concat(e,"-change"),(0,o._)(this,a7)===e,t)})}var ls=new WeakMap;class ln{get active(){return"fullscreen"===(0,o._)(this,ls).mode}get supported(){return(0,o._)(this,ls).supported}async enter(){(0,o._)(this,ls).setPresentationMode("fullscreen")}async exit(){(0,o._)(this,ls).setPresentationMode("inline")}constructor(t){(0,u._)(this,ls,{writable:!0,value:void 0}),(0,c._)(this,ls,t)}}var la=new WeakMap;class ll{get active(){return"picture-in-picture"===(0,o._)(this,la).mode}get supported(){return(0,o._)(this,la).supported}async enter(){(0,o._)(this,la).setPresentationMode("picture-in-picture")}async exit(){(0,o._)(this,la).setPresentationMode("inline")}constructor(t){(0,u._)(this,la,{writable:!0,value:void 0}),(0,c._)(this,la,t)}}class lh extends aE{get type(){return"video"}setup(){super.setup(),T(this.video)&&new aX(this.video,this.ctx),this.ctx.textRenderers.attachVideo(this.video),(0,v.onDispose)(()=>{this.ctx.textRenderers.attachVideo(null)}),"video"===this.type&&this.ctx.notify("provider-setup",this)}get video(){return this.media}constructor(t,e){super(t,e),this.$$PROVIDER_TYPE="VIDEO",(0,v.scoped)(()=>{if(this.airPlay=new aU(t,e),A(t)){let i=new le(t,e);this.fullscreen=new ln(i),this.pictureInPicture=new ll(i)}else P(t)&&(this.pictureInPicture=new a5(t,e))},this.scope)}}var lr=Object.freeze({__proto__:null,VideoProvider:lh});function lo(t){try{let e=new Intl.DisplayNames(navigator.languages,{type:"language"}).of(t);return null!=e?e:null}catch(t){return null}}var lu=new WeakMap,lc=new WeakMap,ld=new WeakMap,l_=new WeakMap,lp=new WeakMap,lf=new WeakSet,lv=new WeakSet,lw=new WeakSet,lg=new WeakSet,lm=new WeakMap,lk=new WeakMap,lb=new WeakSet,ly=new WeakSet,lS=new WeakSet,lW=new WeakSet,l$=new WeakSet,lM=new WeakSet,lx=new WeakSet,lT=new WeakSet,lP=new WeakMap,lA=new WeakSet,lC=new WeakSet,lE=new WeakSet,lq=new WeakSet,lD=new WeakSet,lO=new WeakSet,lL=new WeakSet,lI=new WeakSet;class lF{get instance(){return(0,o._)(this,ld)}setup(t){(0,c._)(this,ld,t().create());let e=(0,_._)(this,lg,lG).bind(this);for(let i of Object.values(t.events))(0,o._)(this,ld).on(i,e);for(let e of((0,o._)(this,ld).on(t.events.ERROR,(0,_._)(this,lM,lQ).bind(this)),(0,o._)(this,l_)))e((0,o._)(this,ld));(0,o._)(this,lc).player.dispatch("dash-instance",{detail:(0,o._)(this,ld)}),(0,o._)(this,ld).initialize((0,o._)(this,lu),void 0,!1),(0,o._)(this,ld).updateSettings({streaming:{text:{defaultEnabled:!1,dispatchForManualRendering:!0},buffer:{fastSwitchEnabled:!0}},...this.config}),(0,o._)(this,ld).on(t.events.FRAGMENT_LOADING_STARTED,(0,_._)(this,lx,lz).bind(this)),(0,o._)(this,ld).on(t.events.FRAGMENT_LOADING_COMPLETED,(0,_._)(this,lT,lX).bind(this)),(0,o._)(this,ld).on(t.events.MANIFEST_LOADED,(0,_._)(this,l$,lH).bind(this)),(0,o._)(this,ld).on(t.events.QUALITY_CHANGE_RENDERED,(0,_._)(this,lW,lB).bind(this)),(0,o._)(this,ld).on(t.events.TEXT_TRACKS_ADDED,(0,_._)(this,ly,lK).bind(this)),(0,o._)(this,ld).on(t.events.TRACK_CHANGE_RENDERED,(0,_._)(this,lS,lU).bind(this)),(0,o._)(this,lc).qualities[io.enableAuto]=(0,_._)(this,lq,l0).bind(this),(0,v.listenEvent)((0,o._)(this,lc).qualities,"change",(0,_._)(this,lO,l2).bind(this)),(0,v.listenEvent)((0,o._)(this,lc).audioTracks,"change",(0,_._)(this,lL,l3).bind(this)),(0,c._)(this,lp,(0,v.effect)((0,_._)(this,lv,lR).bind(this)))}onInstance(t){return(0,o._)(this,l_).add(t),()=>(0,o._)(this,l_).delete(t)}loadSource(t){var e;(0,_._)(this,lI,l5).call(this),(0,v.isString)(t.src)&&(null==(e=(0,o._)(this,ld))||e.attachSource(t.src))}destroy(){var t,e;(0,_._)(this,lI,l5).call(this),null==(t=(0,o._)(this,ld))||t.destroy(),(0,c._)(this,ld,null),null==(e=(0,o._)(this,lp))||e.call(this),(0,c._)(this,lp,null)}constructor(t,e){(0,p._)(this,lf),(0,p._)(this,lv),(0,p._)(this,lw),(0,p._)(this,lg),(0,p._)(this,lb),(0,p._)(this,ly),(0,p._)(this,lS),(0,p._)(this,lW),(0,p._)(this,l$),(0,p._)(this,lM),(0,p._)(this,lx),(0,p._)(this,lT),(0,p._)(this,lA),(0,p._)(this,lC),(0,p._)(this,lE),(0,p._)(this,lq),(0,p._)(this,lD),(0,p._)(this,lO),(0,p._)(this,lL),(0,p._)(this,lI),(0,u._)(this,lu,{writable:!0,value:void 0}),(0,u._)(this,lc,{writable:!0,value:void 0}),(0,u._)(this,ld,{writable:!0,value:void 0}),(0,u._)(this,l_,{writable:!0,value:void 0}),(0,u._)(this,lp,{writable:!0,value:void 0}),(0,u._)(this,lm,{writable:!0,value:void 0}),(0,u._)(this,lk,{writable:!0,value:void 0}),(0,u._)(this,lP,{writable:!0,value:void 0}),(0,c._)(this,ld,null),(0,c._)(this,l_,new Set),(0,c._)(this,lp,null),this.config={},(0,c._)(this,lm,null),(0,c._)(this,lk,{}),(0,c._)(this,lP,-1),(0,c._)(this,lu,t),(0,c._)(this,lc,e)}}function lV(t){let e;return new v.DOMEvent((e=t.type,"dash-".concat((0,v.camelToKebabCase)(e))),{detail:t})}function lR(){if(!(0,o._)(this,lc).$state.live())return;let t=new nt((0,_._)(this,lw,lN).bind(this));return t.start(),t.stop.bind(t)}function lN(){if(!(0,o._)(this,ld))return;let t=(0,o._)(this,ld).duration()-(0,o._)(this,ld).time();(0,o._)(this,lc).$state.liveSyncPosition.set(isNaN(t)?1/0:t)}function lG(t){var e;null==(e=(0,o._)(this,lc).player)||e.dispatch((0,_._)(this,lf,lV).call(this,t))}function lj(t){var e,i;let s=null==(e=(0,o._)(this,lm))?void 0:e[th.native],n=(null==s?void 0:s.track).cues;if(!s||!n)return;let a=(0,o._)(this,lm).id,l=null!=(i=(0,o._)(this,lk)[a])?i:0,h=(0,_._)(this,lf,lV).call(this,t);for(let t=l;t<n.length;t++){let e=n[t];e.positionAlign||(e.positionAlign="auto"),(0,o._)(this,lm).addCue(e,h)}(0,o._)(this,lk)[a]=n.length}function lK(t){if(!(0,o._)(this,ld))return;let e=t.tracks,i=[...(0,o._)(this,lu).textTracks].filter(t=>"manualMode"in t),s=(0,_._)(this,lf,lV).call(this,t);for(let t=0;t<i.length;t++){var n,a,l,h,r,u;let d=e[t],_=i[t],p=new t$({id:"dash-".concat(d.kind,"-").concat(t),label:null!=(r=null!=(h=null!=(l=null!=(a=null==d?void 0:d.label)?a:null==(n=d.labels.find(t=>t.text))?void 0:n.text)?l:(null==d?void 0:d.lang)&&lo(d.lang))?h:null==d?void 0:d.lang)?r:void 0,language:null!=(u=d.lang)?u:void 0,kind:d.kind,default:d.defaultTrack});p[th.native]={managed:!0,track:_},p[th.readyState]=2,p[th.onModeChange]=()=>{(0,o._)(this,ld)&&("showing"===p.mode?((0,o._)(this,ld).setTextTrack(t),(0,c._)(this,lm,p)):((0,o._)(this,ld).setTextTrack(-1),(0,c._)(this,lm,null)))},(0,o._)(this,lc).textTracks.add(p,s)}}function lU(t){let{mediaType:e,newMediaInfo:i}=t;if("audio"===e){let e=(0,o._)(this,lc).audioTracks.getById("dash-audio-".concat(i.index));if(e){let i=(0,_._)(this,lf,lV).call(this,t);(0,o._)(this,lc).audioTracks[t6.select](e,!0,i)}}}function lB(t){if("video"!==t.mediaType)return;let e=(0,o._)(this,lc).qualities[t.newQuality];if(e){let i=(0,_._)(this,lf,lV).call(this,t);(0,o._)(this,lc).qualities[t6.select](e,!0,i)}}function lH(t){if((0,o._)(this,lc).$state.canPlay()||!(0,o._)(this,ld))return;let{type:e,mediaPresentationDuration:i}=t.data,s=(0,_._)(this,lf,lV).call(this,t);(0,o._)(this,lc).notify("stream-type-change","static"!==e?"live":"on-demand",s),(0,o._)(this,lc).notify("duration-change",i,s),(0,o._)(this,lc).qualities[io.setAuto](!0,s);let n=(0,o._)(this,ld).getVideoElement(),a=(0,o._)(this,ld).getTracksForTypeFromManifest("video",t.data),l=[...new Set(a.map(t=>t.mimeType))].find(t=>t&&x(n,t)),h=a.filter(t=>l===t.mimeType)[0],r=(0,o._)(this,ld).getTracksForTypeFromManifest("audio",t.data),u=[...new Set(r.map(t=>t.mimeType))].find(t=>t&&M(n,t));if(r=r.filter(t=>u===t.mimeType),h.bitrateList.forEach((t,e)=>{var i,n,a,l,r;let u={id:null!=(n=null==(i=t.id)?void 0:i.toString())?n:"dash-bitrate-".concat(e),width:null!=(a=t.width)?a:0,height:null!=(l=t.height)?l:0,bitrate:null!=(r=t.bandwidth)?r:0,codec:h.codec,index:e};(0,o._)(this,lc).qualities[t6.add](u,s)}),(0,v.isNumber)(h.index)){let t=(0,o._)(this,lc).qualities[h.index];t&&(0,o._)(this,lc).qualities[t6.select](t,!0,s)}r.forEach((t,e)=>{var i,n,a,l;let h=t.labels.find(t=>navigator.languages.some(e=>t.lang&&e.toLowerCase().startsWith(t.lang.toLowerCase())))||t.labels[0],r={id:"dash-audio-".concat(null==t?void 0:t.index),label:null!=(a=null!=(n=null!=(i=null==h?void 0:h.text)?i:t.lang&&lo(t.lang))?n:t.lang)?a:"",language:null!=(l=t.lang)?l:"",kind:"main",mimeType:t.mimeType,codec:t.codec,index:e};(0,o._)(this,lc).audioTracks[t6.add](r,s)}),n.dispatchEvent(new v.DOMEvent("canplay",{trigger:s}))}function lQ(t){let{type:e,error:i}=t;27===i.code?(0,_._)(this,lA,lY).call(this,i):(0,_._)(this,lE,lZ).call(this,i)}function lz(){(0,o._)(this,lP)>=0&&(0,_._)(this,lC,lJ).call(this)}function lX(t){"text"===t.mediaType&&requestAnimationFrame((0,_._)(this,lb,lj).bind(this,t))}function lY(t){var e;(0,_._)(this,lC,lJ).call(this),null==(e=(0,o._)(this,ld))||e.play(),(0,c._)(this,lP,window.setTimeout(()=>{(0,c._)(this,lP,-1),(0,_._)(this,lE,lZ).call(this,t)},5e3))}function lJ(){clearTimeout((0,o._)(this,lP)),(0,c._)(this,lP,-1)}function lZ(t){var e;(0,o._)(this,lc).notify("error",{message:null!=(e=t.message)?e:"",code:1,error:t})}function l0(){var t;(0,_._)(this,lD,l1).call(this,"video",!0);let{qualities:e}=(0,o._)(this,lc);null==(t=(0,o._)(this,ld))||t.setQualityFor("video",e.selectedIndex,!0)}function l1(t,e){var i;null==(i=(0,o._)(this,ld))||i.updateSettings({streaming:{abr:{autoSwitchBitrate:{[t]:e}}}})}function l2(){let{qualities:t}=(0,o._)(this,lc);(0,o._)(this,ld)&&!t.auto&&t.selected&&((0,_._)(this,lD,l1).call(this,"video",!1),(0,o._)(this,ld).setQualityFor("video",t.selectedIndex,"current"===t.switch),S&&((0,o._)(this,lu).currentTime=(0,o._)(this,lu).currentTime))}function l3(){if(!(0,o._)(this,ld))return;let{audioTracks:t}=(0,o._)(this,lc),e=(0,o._)(this,ld).getTracksFor("audio").find(e=>t.selected&&t.selected.id==="dash-audio-".concat(e.index));e&&(0,o._)(this,ld).setCurrentTrack(e)}function l5(){(0,_._)(this,lC,lJ).call(this),(0,c._)(this,lm,null),(0,c._)(this,lk,{})}function l4(t){return t instanceof Error?t:Error("string"==typeof t?t:JSON.stringify(t))}function l9(t,e){if(!t)throw Error("Assertion failed.")}var l8=new WeakMap,l6=new WeakMap,l7=new WeakMap,ht=new WeakSet,he=new WeakSet,hi=new WeakSet,hs=new WeakSet;class hn{constructor(t,e,i){(0,p._)(this,ht),(0,p._)(this,he),(0,p._)(this,hi),(0,p._)(this,hs),(0,u._)(this,l8,{writable:!0,value:void 0}),(0,u._)(this,l6,{writable:!0,value:void 0}),(0,u._)(this,l7,{writable:!0,value:void 0}),(0,c._)(this,l8,t),(0,c._)(this,l6,e),(0,c._)(this,l7,i),(0,_._)(this,ht,ha).call(this)}}async function ha(){let t={onLoadStart:(0,_._)(this,he,hl).bind(this),onLoaded:(0,_._)(this,hi,hh).bind(this),onLoadError:(0,_._)(this,hs,hr).bind(this)},e=await hu((0,o._)(this,l8),t);return((0,v.isUndefined)(e)&&!(0,v.isString)((0,o._)(this,l8))&&(e=await ho((0,o._)(this,l8),t)),e)?window.dashjs.supportsMediaSource()?e:((0,o._)(this,l6).player.dispatch(new v.DOMEvent("dash-unsupported")),(0,o._)(this,l6).notify("error",{message:"[vidstack] `dash.js` is not supported in this environment",code:4}),null):null}function hl(){(0,o._)(this,l6).player.dispatch(new v.DOMEvent("dash-lib-load-start"))}function hh(t){(0,o._)(this,l6).player.dispatch(new v.DOMEvent("dash-lib-loaded",{detail:t})),(0,o._)(this,l7).call(this,t)}function hr(t){let e=l4(t);(0,o._)(this,l6).player.dispatch(new v.DOMEvent("dash-lib-load-error",{detail:e})),(0,o._)(this,l6).notify("error",{message:e.message,code:4,error:e})}async function ho(t){var e,i,s,n,a,l,h,r;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,v.isUndefined)(t)){if(null==(e=o.onLoadStart)||e.call(o),(r=t)&&r.prototype&&r.prototype!==Function)return null==(i=o.onLoaded)||i.call(o,t),t;if(hc(t)){let e=t.MediaPlayer;return null==(s=o.onLoaded)||s.call(o,e),e}try{let e=null==(n=await t())?void 0:n.default;if(hc(e))return null==(a=o.onLoaded)||a.call(o,e.MediaPlayer),e.MediaPlayer;if(e)null==(l=o.onLoaded)||l.call(o,e);else throw Error("");return e}catch(t){null==(h=o.onLoadError)||h.call(o,t)}}}async function hu(t){var e,i,s;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,v.isString)(t)){null==(e=n.onLoadStart)||e.call(n);try{if(await Z(t),!(0,v.isFunction)(window.dashjs.MediaPlayer))throw Error("");let e=window.dashjs.MediaPlayer;return null==(i=n.onLoaded)||i.call(n,e),e}catch(t){null==(s=n.onLoadError)||s.call(n,t)}}}function hc(t){return t&&"MediaPlayer"in t}var hd=new WeakMap,h_=new WeakMap,hp=new WeakMap;class hf extends lh{get ctor(){return(0,o._)(this,hd)}get instance(){return(0,o._)(this,h_).instance}get type(){return"dash"}get canLiveSync(){return!0}get config(){return(0,o._)(this,h_).config}set config(t){(0,o._)(this,h_).config=t}get library(){return(0,o._)(this,hp)}set library(t){(0,c._)(this,hp,t)}preconnect(){(0,v.isString)((0,o._)(this,hp))&&Y((0,o._)(this,hp))}setup(){super.setup(),new hn((0,o._)(this,hp),this.ctx,t=>{(0,c._)(this,hd,t),(0,o._)(this,h_).setup(t),this.ctx.notify("provider-setup",this);let e=(0,v.peek)(this.ctx.$state.source);e&&this.loadSource(e)})}async loadSource(t,e){if(!(0,v.isString)(t.src))return void this.removeSource();this.media.preload=e||"",this.appendSource(t,"application/x-mpegurl"),(0,o._)(this,h_).loadSource(t),this.currentSrc=t}onInstance(t){let e=(0,o._)(this,h_).instance;return e&&t(e),(0,o._)(this,h_).onInstance(t)}destroy(){(0,o._)(this,h_).destroy()}constructor(...t){super(...t),(0,u._)(this,hd,{writable:!0,value:void 0}),(0,u._)(this,h_,{writable:!0,value:void 0}),(0,u._)(this,hp,{writable:!0,value:void 0}),this.$$PROVIDER_TYPE="DASH",(0,c._)(this,hd,null),(0,c._)(this,h_,new lF(this.video,this.ctx)),(0,c._)(this,hp,"".concat("https://cdn.jsdelivr.net","/npm/dashjs@4.7.4/dist/dash",".all.min.js"))}}hf.supported=E();var hv=Object.freeze({__proto__:null,DASHProvider:hf});class hw extends sI{canPlay(t){return hw.supported&&Q(t)}async load(t){if(m)throw Error("[vidstack] can not load dash provider server-side");return new(await Promise.resolve().then(function(){return hv})).DASHProvider(this.target,t)}constructor(...t){super(...t),this.name="dash"}}hw.supported=E();class hg{preconnect(){for(let t of["https://i.vimeocdn.com","https://f.vimeocdn.com","https://fresnel.vimeocdn.com"])Y(t)}canPlay(t){return(0,v.isString)(t.src)&&"video/vimeo"===t.type}mediaType(){return"video"}async load(t){if(m)throw Error("[vidstack] can not load vimeo provider server-side");return new(await i.e(880).then(i.bind(i,5880))).VimeoProvider(this.target,t)}async loadPoster(t,e,s){let{resolveVimeoVideoId:n,getVimeoVideoInfo:a}=await i.e(60).then(i.bind(i,5060));if(!(0,v.isString)(t.src))return null;let{videoId:l,hash:h}=n(t.src);return l?a(l,s,h).then(t=>t?t.poster:null):null}constructor(){this.name="vimeo"}}class hm{preconnect(){for(let t of["https://www.google.com","https://i.ytimg.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"])Y(t)}canPlay(t){return(0,v.isString)(t.src)&&"video/youtube"===t.type}mediaType(){return"video"}async load(t){if(m)throw Error("[vidstack] can not load youtube provider server-side");return new(await i.e(892).then(i.bind(i,8892))).YouTubeProvider(this.target,t)}async loadPoster(t,e,s){let{findYouTubePoster:n,resolveYouTubeVideoId:a}=await i.e(412).then(i.bind(i,8412)),l=(0,v.isString)(t.src)&&a(t.src);return l?n(l,s):null}constructor(){this.name="youtube"}}function hk(t,e){let i=String(t),s=i.length;if(s<e){let i="0".repeat(e-s);return"".concat(i).concat(t)}return i}function hb(t){let e=Math.trunc(t/3600),i=Math.trunc(t%3600/60);return{hours:e,minutes:i,seconds:Math.trunc(t%60),fraction:Number((t-Math.trunc(t)).toPrecision(3))}}function hy(t){let{padHrs:e=null,padMins:i=null,showHrs:s=!1,showMs:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{hours:a,minutes:l,seconds:h,fraction:r}=hb(t),o=e?hk(a,2):a,u=i||(0,v.isNull)(i)&&t>=3600?hk(l,2):l,c=hk(h,2),d=n&&r>0?".".concat(String(r).replace(/^0?\./,"")):"",_="".concat(u,":").concat(c).concat(d);return a>0||s?"".concat(o,":").concat(_):_}function hS(t){let e=[],{hours:i,minutes:s,seconds:n}=hb(t);return i>0&&e.push("".concat(i," hour")),s>0&&e.push("".concat(s," min")),(n>0||0===e.length)&&e.push("".concat(n," sec")),e.join(" ")}let hW=Symbol(0),h$=["autoPlay","canAirPlay","canFullscreen","canGoogleCast","canLoad","canLoadPoster","canPictureInPicture","canPlay","canSeek","ended","fullscreen","isAirPlayConnected","isGoogleCastConnected","live","liveEdge","loop","mediaType","muted","paused","pictureInPicture","playing","playsInline","remotePlaybackState","remotePlaybackType","seeking","started","streamType","viewType","waiting"];var hM=new WeakMap,hx=new WeakMap;class hT extends im{async onAttach(t){if(m)return;let e=this.$props[(0,o._)(this,hM)]();if("eager"===e)requestAnimationFrame((0,o._)(this,hx));else if("idle"===e)(0,v.waitIdlePeriod)((0,o._)(this,hx));else if("visible"===e){let e,i=new IntersectionObserver(t=>{this.scope&&t[0].isIntersecting&&(null==e||e(),e=void 0,(0,o._)(this,hx).call(this))});i.observe(t),e=(0,v.onDispose)(()=>i.disconnect())}}constructor(t,e){super(),(0,u._)(this,hM,{writable:!0,value:void 0}),(0,u._)(this,hx,{writable:!0,value:void 0}),(0,c._)(this,hM,t),(0,c._)(this,hx,e)}}var hP=new WeakMap,hA=new WeakMap,hC=new WeakSet;class hE{notify(t){for(var e=arguments.length,i=Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];m||(0,o._)(this,hP).call(this,new v.DOMEvent(t,{detail:null==i?void 0:i[0],trigger:null==i?void 0:i[1]}))}async ready(t,e){if(!m)return(0,v.untrack)(async()=>{var i,s,n,a,l,h,r,u,c,d,p,f,w,g,m;let{logger:k}=(0,o._)(this,hA),{autoPlay:b,canPlay:y,started:S,duration:W,seekable:$,buffered:M,remotePlaybackInfo:x,playsInline:T,savedState:P,source:A}=(0,o._)(this,hA).$state;if(y())return;let C={duration:null!=(a=null==t?void 0:t.duration)?a:W(),seekable:null!=(l=null==t?void 0:t.seekable)?l:$(),buffered:null!=(h=null==t?void 0:t.buffered)?h:M(),provider:(0,o._)(this,hA).$provider()};this.notify("can-play",C,e),(0,v.tick)();let E=(0,o._)(this,hA).$provider(),{storage:q,qualities:D}=(0,o._)(this,hA),{muted:O,volume:L,clipStartTime:I,playbackRate:F}=(0,o._)(this,hA).$props;await (null==q||null==(i=q.onLoad)?void 0:i.call(q,A()));let V=null==(s=P())?void 0:s.currentTime,R=null==(n=P())?void 0:n.paused,N=await (null==q?void 0:q.getTime()),G=null!=(r=null!=V?V:N)?r:I(),j=!1===R||!0!==R&&!S()&&b();if(E){E.setVolume(null!=(f=await (null==q?void 0:q.getVolume()))?f:L()),E.setMuted(O()||!!await (null==q?void 0:q.getMuted()));let t=null!=(w=await (null==q?void 0:q.getAudioGain()))?w:1;t>1&&(null==(c=E.audioGain)||null==(u=c.setGain)||u.call(c,t)),null==(d=E.setPlaybackRate)||d.call(E,null!=(g=await (null==q?void 0:q.getPlaybackRate()))?g:F()),null==(p=E.setPlaysInline)||p.call(E,T()),G>0&&E.setCurrentTime(G)}let K=await (null==q?void 0:q.getVideoQuality());if(K&&D.length){let t=null,e=1/0;for(let i of D){let s=Math.abs(K.width-i.width)+Math.abs(K.height-i.height)+(K.bitrate?Math.abs(K.bitrate-(null!=(m=i.bitrate)?m:0)):0);s<e&&(t=i,e=s)}t&&(t.selected=!0)}y()&&j?await (0,_._)(this,hC,hq).call(this,e):N&&N>0&&this.notify("started",void 0,e),x.set(null)})}constructor(t,e){(0,p._)(this,hC),(0,u._)(this,hP,{writable:!0,value:void 0}),(0,u._)(this,hA,{writable:!0,value:void 0}),(0,c._)(this,hP,t),(0,c._)(this,hA,e)}}async function hq(t){let{player:e,$state:{autoPlaying:i,muted:s}}=(0,o._)(this,hA);i.set(!0);let n=new v.DOMEvent("auto-play-attempt",{trigger:t});try{await e.play(n)}catch(t){}}var hD=new WeakMap;class hO{enqueue(t,e){(0,o._)(this,hD).set(t,e)}serve(t){let e=this.peek(t);return(0,o._)(this,hD).delete(t),e}peek(t){return(0,o._)(this,hD).get(t)}delete(t){(0,o._)(this,hD).delete(t)}clear(){(0,o._)(this,hD).clear()}constructor(){(0,u._)(this,hD,{writable:!0,value:void 0}),(0,c._)(this,hD,new Map)}}var hL=new WeakMap,hI=new WeakMap,hF=new WeakMap,hV=new WeakSet,hR=new WeakSet;class hN{get size(){return(0,o._)(this,hF).size}get isServing(){return(0,o._)(this,hL)}async waitForFlush(){(0,o._)(this,hL)||await (0,o._)(this,hI).promise}enqueue(t,e){if((0,o._)(this,hL))return void e();(0,o._)(this,hF).delete(t),(0,o._)(this,hF).set(t,e)}serve(t){var e;null==(e=(0,o._)(this,hF).get(t))||e(),(0,o._)(this,hF).delete(t)}start(){(0,_._)(this,hV,hG).call(this),(0,c._)(this,hL,!0),(0,o._)(this,hF).size>0&&(0,_._)(this,hV,hG).call(this)}stop(){(0,c._)(this,hL,!1)}reset(){this.stop(),(0,o._)(this,hF).clear(),(0,_._)(this,hR,hj).call(this)}constructor(){(0,p._)(this,hV),(0,p._)(this,hR),(0,u._)(this,hL,{writable:!0,value:void 0}),(0,u._)(this,hI,{writable:!0,value:void 0}),(0,u._)(this,hF,{writable:!0,value:void 0}),(0,c._)(this,hL,!1),(0,c._)(this,hI,(0,v.deferredPromise)()),(0,c._)(this,hF,new Map)}}function hG(){for(let t of(0,o._)(this,hF).keys())this.serve(t);(0,_._)(this,hR,hj).call(this)}function hj(){(0,o._)(this,hI).resolve(),(0,c._)(this,hI,(0,v.deferredPromise)())}function hK(t){return()=>t()?"true":"false"}var hU=new WeakMap,hB=new WeakMap,hH=new WeakMap,hQ=new WeakMap,hz=new WeakMap,hX=new WeakMap,hY=new WeakMap,hJ=new WeakSet,hZ=new WeakSet,h0=new WeakSet,h1=new WeakSet,h2=new WeakMap,h3=new WeakSet,h5=new WeakSet,h4=new WeakSet,h9=new WeakSet,h8=new WeakSet,h6=new WeakSet,h7=new WeakSet,rt=new WeakSet,re=new WeakMap,ri=new WeakSet,rs=new WeakSet,rn=new WeakSet,ra=new WeakSet;class rl extends im{onAttach(){this.listen("fullscreen-change",(0,_._)(this,ri,rm).bind(this))}onConnect(t){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(this)),i=new v.EventsController(t),s=(0,_._)(this,h0,ro).bind(this);for(let t of e)t.startsWith("media-")&&i.add(t,s);(0,_._)(this,hJ,rh).call(this),(0,v.effect)((0,_._)(this,hZ,rr).bind(this)),(0,v.effect)((0,_._)(this,h4,r_).bind(this)),(0,v.effect)((0,_._)(this,h9,rp).bind(this)),(0,v.effect)((0,_._)(this,h8,rf).bind(this)),(0,v.effect)((0,_._)(this,h6,rv).bind(this)),(0,v.effect)((0,_._)(this,h7,rw).bind(this)),(0,v.effect)((0,_._)(this,rt,rg).bind(this))}onDestroy(){try{let t=this.createEvent("destroy"),{pictureInPicture:e,fullscreen:i}=this.$state;i()&&this.exitFullscreen("prefer-media",t),e()&&this.exitPictureInPicture(t)}catch(t){}(0,o._)(this,hY).reset()}async play(t){if(m)return;let{canPlay:e,paused:i,autoPlaying:s}=this.$state;if((0,_._)(this,h1,ru).call(this,t)||!(0,v.peek)(i))return;t&&(0,o._)(this,hB).queue.enqueue("media-play-request",t);let n=(0,v.peek)(s);try{let t=(0,v.peek)((0,o._)(this,hX));return ry(t,(0,v.peek)(e)),function(t){if("undefined"!=typeof window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches&&t)throw Error("[vidstack] autoplay blocked")}(n),await t.play()}catch(i){let e=this.createEvent("play-fail",{detail:l4(i),trigger:t});throw e.autoPlay=n,(0,o._)(this,hU).handle(e),i}}async pause(t){if(m)return;let{canPlay:e,paused:i}=this.$state;if(!(0,v.peek)(i)){t&&(0,o._)(this,hB).queue.enqueue("media-pause-request",t);try{let t=(0,v.peek)((0,o._)(this,hX));return ry(t,(0,v.peek)(e)),await t.pause()}catch(t){throw(0,o._)(this,hB).queue.delete("media-pause-request"),t}}}setAudioGain(t,e){let{audioGain:i,canSetAudioGain:s}=this.$state;if(i()===t)return;let n=(0,o._)(this,hX).call(this);if(!(null==n?void 0:n.audioGain)||!s())throw Error("[vidstack] audio gain api not available");e&&(0,o._)(this,hB).queue.enqueue("media-audio-gain-change-request",e),n.audioGain.setGain(t)}seekToLiveEdge(t){var e;if(m)return;let{canPlay:i,live:s,liveEdge:n,canSeek:a,liveSyncPosition:l,seekableEnd:h,userBehindLiveEdge:r}=this.$state;if(r.set(!1),(0,v.peek)(()=>!s()||n()||!a()))return;let u=(0,v.peek)((0,o._)(this,hX));ry(u,(0,v.peek)(i)),t&&(0,o._)(this,hB).queue.enqueue("media-seek-request",t);let c=h()-2;u.setCurrentTime(Math.min(c,null!=(e=l())?e:c))}async enterFullscreen(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"prefer-media",e=arguments.length>1?arguments[1]:void 0;if(m)return;let i=(0,_._)(this,h3,rc).call(this,t);if(rS(t,i),!i.active)return(0,v.peek)(this.$state.pictureInPicture)&&((0,c._)(this,h2,!0),await this.exitPictureInPicture(e)),e&&(0,o._)(this,hB).queue.enqueue("media-enter-fullscreen-request",e),i.enter()}async exitFullscreen(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"prefer-media",e=arguments.length>1?arguments[1]:void 0;if(m)return;let i=(0,_._)(this,h3,rc).call(this,t);if(rS(t,i),i.active){e&&(0,o._)(this,hB).queue.enqueue("media-exit-fullscreen-request",e);try{let t=await i.exit();return(0,o._)(this,h2)&&(0,v.peek)(this.$state.canPictureInPicture)&&await this.enterPictureInPicture(),t}finally{(0,c._)(this,h2,!1)}}}async enterPictureInPicture(t){if(!m&&((0,_._)(this,h5,rd).call(this),!this.$state.pictureInPicture()))return t&&(0,o._)(this,hB).queue.enqueue("media-enter-pip-request",t),await (0,o._)(this,hX).call(this).pictureInPicture.enter()}async exitPictureInPicture(t){if(!m&&((0,_._)(this,h5,rd).call(this),this.$state.pictureInPicture()))return t&&(0,o._)(this,hB).queue.enqueue("media-exit-pip-request",t),await (0,o._)(this,hX).call(this).pictureInPicture.exit()}async "media-airplay-request"(t){try{await this.requestAirPlay(t)}catch(t){}}async requestAirPlay(t){try{var e;let i=null==(e=(0,o._)(this,hX).call(this))?void 0:e.airPlay;if(!(null==i?void 0:i.supported))throw Error("No AirPlay adapter.");return t&&(0,o._)(this,hB).queue.enqueue("media-airplay-request",t),await i.prompt()}catch(t){throw(0,o._)(this,hB).queue.delete("media-airplay-request"),t}}async "media-google-cast-request"(t){try{await this.requestGoogleCast(t)}catch(t){}}async requestGoogleCast(t){try{let{canGoogleCast:e}=this.$state;if(!(0,v.peek)(e)){let t=Error("Cast not available.");throw t.code="CAST_NOT_AVAILABLE",t}if(Y("https://www.gstatic.com"),!(0,o._)(this,re)){let t=await i.e(45).then(i.bind(i,9045)).then(function(t){return t.loader});(0,c._)(this,re,new t.GoogleCastLoader)}await (0,o._)(this,re).prompt((0,o._)(this,hH)),t&&(0,o._)(this,hB).queue.enqueue("media-google-cast-request",t);let s="disconnected"!==(0,v.peek)(this.$state.remotePlaybackState);s&&this.$state.savedState.set({paused:(0,v.peek)(this.$state.paused),currentTime:(0,v.peek)(this.$state.currentTime)}),this.$state.remotePlaybackLoader.set(s?(0,o._)(this,re):null)}catch(t){throw(0,o._)(this,hB).queue.delete("media-google-cast-request"),t}}"media-clip-start-change-request"(t){let{clipStartTime:e}=this.$state;e.set(t.detail)}"media-clip-end-change-request"(t){let{clipEndTime:e}=this.$state;e.set(t.detail),this.dispatch("duration-change",{detail:t.detail,trigger:t})}"media-duration-change-request"(t){let{providedDuration:e,clipEndTime:i}=this.$state;e.set(t.detail),0>=i()&&this.dispatch("duration-change",{detail:t.detail,trigger:t})}"media-audio-track-change-request"(t){let{logger:e,audioTracks:i}=(0,o._)(this,hH);if(i.readonly)return;let s=i[t.detail];if(s){let e=t.type;(0,o._)(this,hB).queue.enqueue(e,t),s.selected=!0}}async "media-enter-fullscreen-request"(t){try{await this.enterFullscreen(t.detail,t)}catch(e){(0,_._)(this,rs,rk).call(this,e,t)}}async "media-exit-fullscreen-request"(t){try{await this.exitFullscreen(t.detail,t)}catch(e){(0,_._)(this,rs,rk).call(this,e,t)}}async "media-orientation-lock-request"(t){let e=t.type;try{(0,o._)(this,hB).queue.enqueue(e,t),await (0,o._)(this,hz).lock(t.detail)}catch(t){(0,o._)(this,hB).queue.delete(e)}}async "media-orientation-unlock-request"(t){let e=t.type;try{(0,o._)(this,hB).queue.enqueue(e,t),await (0,o._)(this,hz).unlock()}catch(t){(0,o._)(this,hB).queue.delete(e)}}async "media-enter-pip-request"(t){try{await this.enterPictureInPicture(t)}catch(e){(0,_._)(this,rn,rb).call(this,e,t)}}async "media-exit-pip-request"(t){try{await this.exitPictureInPicture(t)}catch(e){(0,_._)(this,rn,rb).call(this,e,t)}}"media-live-edge-request"(t){let{live:e,liveEdge:i,canSeek:s}=this.$state;if(!(!e()||i())&&s()){(0,o._)(this,hB).queue.enqueue("media-seek-request",t);try{this.seekToLiveEdge()}catch(t){(0,o._)(this,hB).queue.delete("media-seek-request")}}}async "media-loop-request"(t){try{(0,o._)(this,hB).looping=!0,(0,o._)(this,hB).replaying=!0,await this.play(t)}catch(t){(0,o._)(this,hB).looping=!1}}"media-user-loop-change-request"(t){this.$state.userPrefersLoop.set(t.detail)}async "media-pause-request"(t){if(!this.$state.paused())try{await this.pause(t)}catch(t){}}async "media-play-request"(t){if(this.$state.paused())try{await this.play(t)}catch(t){}}"media-rate-change-request"(t){let{playbackRate:e,canSetPlaybackRate:i}=this.$state;if(e()===t.detail||!i())return;let s=(0,o._)(this,hX).call(this);(null==s?void 0:s.setPlaybackRate)&&((0,o._)(this,hB).queue.enqueue("media-rate-change-request",t),s.setPlaybackRate(t.detail))}"media-audio-gain-change-request"(t){try{this.setAudioGain(t.detail,t)}catch(t){}}"media-quality-change-request"(t){var e,i;let{qualities:s,storage:n,logger:a}=(0,o._)(this,hH);if(s.readonly)return;(0,o._)(this,hB).queue.enqueue("media-quality-change-request",t);let l=t.detail;if(l<0)s.autoSelect(t),t.isOriginTrusted&&(null==n||null==(e=n.setVideoQuality)||e.call(n,null));else{let e=s[l];e&&(e.selected=!0,t.isOriginTrusted&&(null==n||null==(i=n.setVideoQuality)||i.call(n,{id:e.id,width:e.width,height:e.height,bitrate:e.bitrate})))}}"media-pause-controls-request"(t){let e=t.type;(0,o._)(this,hB).queue.enqueue(e,t),this.controls.pause(t)}"media-resume-controls-request"(t){let e=t.type;(0,o._)(this,hB).queue.enqueue(e,t),this.controls.resume(t)}"media-seek-request"(t){let{canSeek:e,ended:i,live:s,seekableEnd:n,userBehindLiveEdge:a}=this.$state,l=t.detail;i()&&((0,o._)(this,hB).replaying=!0);let h=t.type;(0,o._)(this,hB).seeking=!1,(0,o._)(this,hB).queue.delete(h);let r=tG(l,this.$state);Number.isFinite(r)&&e()&&((0,o._)(this,hB).queue.enqueue(h,t),(0,o._)(this,hX).call(this).setCurrentTime(r),s()&&t.isOriginTrusted&&Math.abs(n()-r)>=2&&a.set(!0))}"media-seeking-request"(t){let e=t.type;(0,o._)(this,hB).queue.enqueue(e,t),this.$state.seeking.set(!0),(0,o._)(this,hB).seeking=!0}"media-start-loading"(t){if(this.$state.canLoad())return;let e=t.type;(0,o._)(this,hB).queue.enqueue(e,t),(0,o._)(this,hU).handle(this.createEvent("can-load"))}"media-poster-start-loading"(t){if(this.$state.canLoadPoster())return;let e=t.type;(0,o._)(this,hB).queue.enqueue(e,t),(0,o._)(this,hU).handle(this.createEvent("can-load-poster"))}"media-text-track-change-request"(t){let{index:e,mode:i}=t.detail,s=(0,o._)(this,hH).textTracks[e];if(s){let e=t.type;(0,o._)(this,hB).queue.enqueue(e,t),s.setMode(i,t)}}"media-mute-request"(t){if(this.$state.muted())return;let e=t.type;(0,o._)(this,hB).queue.enqueue(e,t),(0,o._)(this,hX).call(this).setMuted(!0)}"media-unmute-request"(t){let{muted:e,volume:i}=this.$state;if(!e())return;let s=t.type;(0,o._)(this,hB).queue.enqueue(s,t),(0,o._)(this,hH).$provider().setMuted(!1),0===i()&&((0,o._)(this,hB).queue.enqueue(s,t),(0,o._)(this,hX).call(this).setVolume(.25))}"media-volume-change-request"(t){let{muted:e,volume:i}=this.$state,s=t.detail;if(i()===s)return;let n=t.type;(0,o._)(this,hB).queue.enqueue(n,t),(0,o._)(this,hX).call(this).setVolume(s),s>0&&e()&&((0,o._)(this,hB).queue.enqueue(n,t),(0,o._)(this,hX).call(this).setMuted(!1))}constructor(t,e,i){super(),(0,p._)(this,hJ),(0,p._)(this,hZ),(0,p._)(this,h0),(0,p._)(this,h1),(0,p._)(this,h3),(0,p._)(this,h5),(0,p._)(this,h4),(0,p._)(this,h9),(0,p._)(this,h8),(0,p._)(this,h6),(0,p._)(this,h7),(0,p._)(this,rt),(0,p._)(this,ri),(0,p._)(this,rs),(0,p._)(this,rn),(0,p._)(this,ra),(0,u._)(this,hU,{writable:!0,value:void 0}),(0,u._)(this,hB,{writable:!0,value:void 0}),(0,u._)(this,hH,{writable:!0,value:void 0}),(0,u._)(this,hQ,{writable:!0,value:void 0}),(0,u._)(this,hz,{writable:!0,value:void 0}),(0,u._)(this,hX,{writable:!0,value:void 0}),(0,u._)(this,hY,{writable:!0,value:void 0}),(0,u._)(this,h2,{writable:!0,value:void 0}),(0,u._)(this,re,{writable:!0,value:void 0}),(0,c._)(this,hY,new hN),(0,c._)(this,h2,!1),(0,c._)(this,hU,t),(0,c._)(this,hB,e),(0,c._)(this,hH,i),(0,c._)(this,hX,i.$provider),this.controls=new i7,(0,c._)(this,hQ,new sg),(0,c._)(this,hz,new sC)}}function rh(){let{load:t}=this.$props,{canLoad:e}=this.$state;if("play"!==t()||e())return;let i=this.listen("media-play-request",t=>{(0,_._)(this,h1,ru).call(this,t),i()})}function rr(){let t=(0,o._)(this,hX).call(this),e=this.$state.canPlay();return t&&e&&(0,o._)(this,hY).start(),()=>{(0,o._)(this,hY).stop()}}function ro(t){t.stopPropagation(),!t.defaultPrevented&&this[t.type]&&((0,v.peek)((0,o._)(this,hX))?this[t.type](t):(0,o._)(this,hY).enqueue(t.type,()=>{(0,v.peek)((0,o._)(this,hX))&&this[t.type](t)}))}function ru(t){let{load:e}=this.$props,{canLoad:i}=this.$state;if("play"===e()&&!i()){let e=this.createEvent("media-start-loading",{trigger:t});return this.dispatchEvent(e),(0,o._)(this,hY).enqueue("media-play-request",async()=>{try{await this.play(e)}catch(t){}}),!0}return!1}function rc(t){let e=(0,v.peek)((0,o._)(this,hX));return"prefer-media"===t&&(0,o._)(this,hQ).supported||"media"===t?(0,o._)(this,hQ):null==e?void 0:e.fullscreen}function rd(){if(!this.$state.canPictureInPicture())throw Error("[vidstack] no pip support")}function r_(){this.controls.defaultDelay=this.$props.controlsDelay()}function rp(){var t,e;let{canSetAudioGain:i}=this.$state,s=!!(null==(e=(0,o._)(this,hX).call(this))||null==(t=e.audioGain)?void 0:t.supported);i.set(s)}function rf(){var t,e;let{canAirPlay:i}=this.$state,s=!!(null==(e=(0,o._)(this,hX).call(this))||null==(t=e.airPlay)?void 0:t.supported);i.set(s)}function rv(){let{canGoogleCast:t,source:e}=this.$state,i=S&&!b&&z(e());t.set(i)}function rw(){var t,e;let{canFullscreen:i}=this.$state,s=(0,o._)(this,hQ).supported||!!(null==(e=(0,o._)(this,hX).call(this))||null==(t=e.fullscreen)?void 0:t.supported);i.set(s)}function rg(){var t,e;let{canPictureInPicture:i}=this.$state,s=!!(null==(e=(0,o._)(this,hX).call(this))||null==(t=e.pictureInPicture)?void 0:t.supported);i.set(s)}async function rm(t){let e=(0,v.peek)(this.$props.fullscreenOrientation),i=t.detail;if(!(0,v.isUndefined)(e)&&"none"!==e&&(0,o._)(this,hz).supported)if(i){if((0,o._)(this,hz).locked)return;this.dispatch("media-orientation-lock-request",{detail:e,trigger:t})}else(0,o._)(this,hz).locked&&this.dispatch("media-orientation-unlock-request",{trigger:t})}function rk(t,e){(0,o._)(this,hU).handle(this.createEvent("fullscreen-error",{detail:l4(t)}))}function rb(t,e){(0,o._)(this,hU).handle(this.createEvent("picture-in-picture-error",{detail:l4(t)}))}function ry(t,e){if(!t||!e)throw Error("[vidstack] media not ready")}function rS(t,e){if(null==e||!e.supported)throw Error("[vidstack] no fullscreen support")}class rW{constructor(){this.seeking=!1,this.looping=!1,this.replaying=!1,this.queue=new hO}}let r$=new Set(["auto-play","auto-play-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);var rM=new WeakMap,rx=new WeakMap,rT=new WeakMap,rP=new WeakMap,rA=new WeakMap,rC=new WeakMap,rE=new WeakMap,rq=new WeakMap,rD=new WeakMap,rO=new WeakSet,rL=new WeakSet,rI=new WeakSet,rF=new WeakSet,rV=new WeakSet,rR=new WeakSet,rN=new WeakSet,rG=new WeakSet,rj=new WeakSet,rK=new WeakSet,rU=new WeakSet,rB=new WeakSet,rH=new WeakSet,rQ=new WeakSet,rz=new WeakMap,rX=new WeakSet,rY=new WeakSet,rJ=new WeakSet,rZ=new WeakSet,r0=new WeakSet,r1=new WeakSet,r2=new WeakSet,r3=new WeakSet,r5=new WeakSet,r4=new WeakSet,r9=new WeakSet,r8=new WeakMap,r6=new WeakSet,r7=new WeakSet;class ot extends im{onAttach(t){t.setAttribute("aria-busy","true"),new v.EventsController(this).add("fullscreen-change",this["fullscreen-change"].bind(this)).add("fullscreen-error",this["fullscreen-error"].bind(this)).add("orientation-change",this["orientation-change"].bind(this))}onConnect(t){(0,v.effect)((0,_._)(this,rZ,og).bind(this)),(0,_._)(this,rV,oa).call(this),(0,_._)(this,rR,ol).call(this),(0,_._)(this,rN,oh).call(this),(0,_._)(this,rO,oe).call(this),(0,v.onDispose)((0,_._)(this,rL,oi).bind(this))}onDestroy(){let{audioTracks:t,qualities:e,textTracks:i}=(0,o._)(this,rx);t[t6.reset](),e[t6.reset](),i[t6.reset](),(0,_._)(this,rY,ov).call(this)}handle(t){if(!this.scope)return;let e=t.type;(0,v.untrack)(()=>{var e;return null==(e=this[t.type])?void 0:e.call(this,t)}),m||(r$.has(e)&&(0,o._)(this,rT).set(e,t),this.dispatch(t))}"provider-change"(t){var e,i;let s=(0,o._)(this,rx).$provider(),n=t.detail;(null==s?void 0:s.type)!==(null==n?void 0:n.type)&&(null==s||null==(e=s.destroy)||e.call(s),null==s||null==(i=s.scope)||i.dispose(),(0,o._)(this,rx).$provider.set(t.detail),s&&null===t.detail&&(0,_._)(this,r1,ok).call(this,t))}"provider-loader-change"(t){}"auto-play"(t){this.$state.autoPlayError.set(null)}"auto-play-fail"(t){this.$state.autoPlayError.set(t.detail),(0,_._)(this,rI,os).call(this)}"can-load"(t){this.$state.canLoad.set(!0),(0,o._)(this,rT).set("can-load",t),(0,o._)(this,rx).textTracks[th.canLoad](),(0,_._)(this,rF,on).call(this,"media-start-loading",t)}"can-load-poster"(t){this.$state.canLoadPoster.set(!0),(0,o._)(this,rT).set("can-load-poster",t),(0,_._)(this,rF,on).call(this,"media-poster-start-loading",t)}"media-type-change"(t){let e=(0,o._)(this,rT).get("source-change");e&&t.triggers.add(e);let i=this.$state.viewType();this.$state.mediaType.set(t.detail);let s=this.$state.providedViewType(),n="unknown"===s?t.detail:s;i!==n&&(m?this.$state.inferredViewType.set(n):setTimeout(()=>{requestAnimationFrame(()=>{this.scope&&(this.$state.inferredViewType.set(t.detail),this.dispatch("view-type-change",{detail:n,trigger:t}))})},0))}"stream-type-change"(t){let e=(0,o._)(this,rT).get("source-change");e&&t.triggers.add(e);let{streamType:i,inferredStreamType:s}=this.$state;s.set(t.detail),t.detail=i()}"rate-change"(t){let{storage:e}=(0,o._)(this,rx),{canPlay:i}=this.$state;if(this.$state.playbackRate.set(t.detail),(0,_._)(this,rF,on).call(this,"media-rate-change-request",t),i()){var s;null==e||null==(s=e.setPlaybackRate)||s.call(e,t.detail)}}"remote-playback-change"(t){let{remotePlaybackState:e,remotePlaybackType:i}=this.$state,{type:s,state:n}=t.detail,a="connected"===n;i.set(s),e.set(n);let l="airplay"===s?"media-airplay-request":"media-google-cast-request";if(a)(0,_._)(this,rF,on).call(this,l,t);else{let e=(0,o._)(this,rM).queue.peek(l);e&&(t.request=e,t.triggers.add(e))}}"sources-change"(t){let e=this.$state.sources(),i=t.detail;this.$state.sources.set(i),(0,_._)(this,r0,om).call(this,e,i,t)}"source-change"(t){var e,i;t.isQualityChange=(null==(e=t.originEvent)?void 0:e.type)==="quality-change";let s=t.detail;(0,_._)(this,r1,ok).call(this,t,t.isQualityChange),(0,o._)(this,rT).set(t.type,t),this.$state.source.set(s),null==(i=this.el)||i.setAttribute("aria-busy","true")}abort(t){let e=(0,o._)(this,rT).get("source-change");e&&t.triggers.add(e);let i=(0,o._)(this,rT).get("can-load");i&&!t.triggers.hasType("can-load")&&t.triggers.add(i)}"load-start"(t){let e=(0,o._)(this,rT).get("source-change");e&&t.triggers.add(e)}error(t){this.$state.error.set(t.detail);let e=(0,o._)(this,rT).get("abort");e&&t.triggers.add(e)}"loaded-metadata"(t){let e=(0,o._)(this,rT).get("load-start");e&&t.triggers.add(e)}"loaded-data"(t){let e=(0,o._)(this,rT).get("load-start");e&&t.triggers.add(e)}"can-play"(t){var e;let i=(0,o._)(this,rT).get("loaded-metadata");i&&t.triggers.add(i),(0,_._)(this,r2,ob).call(this,t.detail),null==(e=this.el)||e.setAttribute("aria-busy","false")}"can-play-through"(t){(0,_._)(this,r2,ob).call(this,t.detail);let e=(0,o._)(this,rT).get("can-play");e&&t.triggers.add(e)}"duration-change"(t){let{live:e,intrinsicDuration:i,providedDuration:s,clipEndTime:n,ended:a}=this.$state,l=t.detail;if(!e()){let e=Number.isNaN(l)?0:l;i.set(e),a()&&(0,_._)(this,r4,oW).call(this,t)}(s()>0||n()>0)&&t.stopImmediatePropagation()}progress(t){let{buffered:e,seekable:i}=this.$state,{buffered:s,seekable:n}=t.detail,a=L(s),l=s.length!==e().length,h=a!==L(e()),r=L(n),o=n.length!==i().length,u=r!==L(i());(l||h)&&e.set(s),(o||u)&&i.set(n)}play(t){let{paused:e,autoPlayError:i,ended:s,autoPlaying:n,playsInline:a,pointer:l,muted:h,viewType:r,live:u,userBehindLiveEdge:c}=this.$state;if((0,_._)(this,r3,oy).call(this),!e())return void t.stopImmediatePropagation();t.autoPlay=n();let d=(0,o._)(this,rT).get("waiting");d&&t.triggers.add(d),(0,_._)(this,rF,on).call(this,"media-play-request",t),(0,o._)(this,rT).set("play",t),e.set(!1),i.set(null),t.autoPlay&&(this.handle(this.createEvent("auto-play",{detail:{muted:h()},trigger:t})),n.set(!1)),(s()||(0,o._)(this,rM).replaying)&&((0,o._)(this,rM).replaying=!1,s.set(!1),this.handle(this.createEvent("replay",{trigger:t}))),a()||"video"!==r()||"coarse"!==l()||(0,o._)(this,rx).remote.enterFullscreen("prefer-media",t),u()&&!c()&&(0,o._)(this,rx).remote.seekToLiveEdge(t)}"play-fail"(t){let{muted:e,autoPlaying:i}=this.$state,s=(0,o._)(this,rT).get("play");s&&t.triggers.add(s),(0,_._)(this,rF,on).call(this,"media-play-request",t);let{paused:n,playing:a}=this.$state;n.set(!0),a.set(!1),(0,_._)(this,rI,os).call(this),(0,o._)(this,rT).set("play-fail",t),t.autoPlay&&(this.handle(this.createEvent("auto-play-fail",{detail:{muted:e(),error:t.detail},trigger:t})),i.set(!1))}playing(t){let e=(0,o._)(this,rT).get("play"),i=(0,o._)(this,rT).get("seeked");e?t.triggers.add(e):i&&t.triggers.add(i),setTimeout(()=>(0,_._)(this,rI,os).call(this),0);let{paused:s,playing:n,live:a,liveSyncPosition:l,seekableEnd:h,started:r,currentTime:u,seeking:c,ended:d}=this.$state;if(s.set(!1),n.set(!0),c.set(!1),d.set(!1),(0,o._)(this,rM).looping){(0,o._)(this,rM).looping=!1;return}if(a()&&!r()&&0===u()){var p;let t=null!=(p=l())?p:h()-2;Number.isFinite(t)&&(0,o._)(this,rx).$provider().setCurrentTime(t)}this.started(t)}started(t){let{started:e}=this.$state;e()||(e.set(!0),this.handle(this.createEvent("started",{trigger:t})))}pause(t){var e;(null==(e=this.el)?void 0:e.isConnected)||(0,c._)(this,rD,!0),(0,_._)(this,rF,on).call(this,"media-pause-request",t);let i=(0,o._)(this,rT).get("seeked");i&&t.triggers.add(i);let{paused:s,playing:n}=this.$state;s.set(!0),n.set(!1),(0,o._)(this,rP)&&setTimeout(()=>{this.handle(this.createEvent("end",{trigger:t})),(0,c._)(this,rP,!1)},0),(0,_._)(this,rI,os).call(this)}"time-change"(t){if((0,o._)(this,rM).looping)return void t.stopImmediatePropagation();let{waiting:e,played:i,clipEndTime:s,realCurrentTime:n,currentTime:a}=this.$state,l=t.detail,h=s();for(let i of(n.set(l),(0,_._)(this,r5,oS).call(this),e.set(!1),(0,o._)(this,rx).textTracks))i[th.updateActiveCues](l,t);h>0&&l>=h&&((0,c._)(this,rP,!0),this.dispatch("media-pause-request",{trigger:t})),(0,_._)(this,r9,o$).call(this),this.dispatch("time-update",{detail:{currentTime:a(),played:i()},trigger:t})}"audio-gain-change"(t){var e;let{storage:i}=(0,o._)(this,rx),{canPlay:s,audioGain:n}=this.$state;n.set(t.detail),(0,_._)(this,rF,on).call(this,"media-audio-gain-change-request",t),s()&&(null==i||null==(e=i.setAudioGain)||e.call(i,n()))}"volume-change"(t){let{storage:e}=(0,o._)(this,rx),{volume:i,muted:s,canPlay:n}=this.$state,a=t.detail;if(i.set(a.volume),s.set(a.muted||0===a.volume),(0,_._)(this,rF,on).call(this,"media-volume-change-request",t),(0,_._)(this,rF,on).call(this,a.muted?"media-mute-request":"media-unmute-request",t),n()){var l,h;null==e||null==(l=e.setVolume)||l.call(e,i()),null==e||null==(h=e.setMuted)||h.call(e,s())}}seeked(t){let{seeking:e,currentTime:i,realCurrentTime:s,paused:n,seekableEnd:a,ended:l,live:h}=this.$state;if((0,o._)(this,rM).seeking)e.set(!0),t.stopImmediatePropagation();else if(e()){let i=(0,o._)(this,rT).get("waiting");i&&t.triggers.add(i);let a=(0,o._)(this,rT).get("seeking");a&&!t.triggers.has(a)&&t.triggers.add(a),n()&&(0,_._)(this,r7,ox).call(this),e.set(!1),s.set(t.detail),(0,_._)(this,rF,on).call(this,"media-seek-request",t);let l=null==t?void 0:t.originEvent;null==l||!l.isTrusted||l instanceof MessageEvent||/seek/.test(l.type)||this.started(t)}h()||(Math.floor(i())!==Math.floor(a())?l.set(!1):this.end(t))}waiting(t){(0,o._)(this,rE)||(0,o._)(this,rM).seeking||(t.stopImmediatePropagation(),(0,c._)(this,rq,t),(0,o._)(this,r8).call(this))}end(t){let{loop:e,ended:i}=this.$state;if(!(!e()&&i())){if(e())return void setTimeout(()=>{requestAnimationFrame(()=>{(0,_._)(this,r3,oy).call(this,t),this.dispatch("media-loop-request",{trigger:t})})},10);setTimeout(()=>(0,_._)(this,r6,oM).call(this,t),0)}}"fullscreen-change"(t){let e=t.detail;this.$state.fullscreen.set(e),(0,_._)(this,rF,on).call(this,e?"media-enter-fullscreen-request":"media-exit-fullscreen-request",t)}"fullscreen-error"(t){(0,_._)(this,rF,on).call(this,"media-enter-fullscreen-request",t),(0,_._)(this,rF,on).call(this,"media-exit-fullscreen-request",t)}"orientation-change"(t){let e=t.detail.lock;(0,_._)(this,rF,on).call(this,e?"media-orientation-lock-request":"media-orientation-unlock-request",t)}"picture-in-picture-change"(t){let e=t.detail;this.$state.pictureInPicture.set(e),(0,_._)(this,rF,on).call(this,e?"media-enter-pip-request":"media-exit-pip-request",t)}"picture-in-picture-error"(t){(0,_._)(this,rF,on).call(this,"media-enter-pip-request",t),(0,_._)(this,rF,on).call(this,"media-exit-pip-request",t)}"title-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredTitle.set(t.detail))}"poster-change"(t){t.trigger&&(t.stopImmediatePropagation(),this.$state.inferredPoster.set(t.detail))}constructor(t,e){super(),(0,p._)(this,rO),(0,p._)(this,rL),(0,p._)(this,rI),(0,p._)(this,rF),(0,p._)(this,rV),(0,p._)(this,rR),(0,p._)(this,rN),(0,p._)(this,rG),(0,p._)(this,rj),(0,p._)(this,rK),(0,p._)(this,rU),(0,p._)(this,rB),(0,p._)(this,rH),(0,p._)(this,rQ),(0,p._)(this,rX),(0,p._)(this,rY),(0,p._)(this,rJ),(0,p._)(this,rZ),(0,p._)(this,r0),(0,p._)(this,r1),(0,p._)(this,r2),(0,p._)(this,r3),(0,p._)(this,r5),(0,p._)(this,r4),(0,p._)(this,r9),(0,p._)(this,r6),(0,p._)(this,r7),(0,u._)(this,rM,{writable:!0,value:void 0}),(0,u._)(this,rx,{writable:!0,value:void 0}),(0,u._)(this,rT,{writable:!0,value:void 0}),(0,u._)(this,rP,{writable:!0,value:void 0}),(0,u._)(this,rA,{writable:!0,value:void 0}),(0,u._)(this,rC,{writable:!0,value:void 0}),(0,u._)(this,rE,{writable:!0,value:void 0}),(0,u._)(this,rq,{writable:!0,value:void 0}),(0,u._)(this,rD,{writable:!0,value:void 0}),(0,u._)(this,rz,{writable:!0,value:void 0}),(0,u._)(this,r8,{writable:!0,value:void 0}),(0,c._)(this,rT,new Map),(0,c._)(this,rP,!1),(0,c._)(this,rA,[]),(0,c._)(this,rC,[-1,-1]),(0,c._)(this,rE,!1),(0,c._)(this,rD,!1),(0,c._)(this,rz,null),this.seeking=(0,v.functionThrottle)(t=>{let{seeking:e,realCurrentTime:i,paused:s}=this.$state;e.set(!0),i.set(t.detail),(0,_._)(this,rF,on).call(this,"media-seeking-request",t),s()&&((0,c._)(this,rq,t),(0,o._)(this,r8).call(this)),(0,c._)(this,rC,[-1,-1])},150,{leading:!0}),(0,c._)(this,r8,(0,v.functionDebounce)(()=>{if(!(0,o._)(this,rq))return;(0,c._)(this,rE,!0);let{waiting:t,playing:e}=this.$state;t.set(!0),e.set(!1);let i=this.createEvent("waiting",{trigger:(0,o._)(this,rq)});(0,o._)(this,rT).set("waiting",i),this.dispatch(i),(0,c._)(this,rq,void 0),(0,c._)(this,rE,!1)},300)),(0,c._)(this,rM,t),(0,c._)(this,rx,e)}}function oe(){(0,o._)(this,rD)&&(requestAnimationFrame(()=>{this.scope&&(0,o._)(this,rx).remote.play(new v.DOMEvent("dom-connect"))}),(0,c._)(this,rD,!1))}function oi(){var t;(0,o._)(this,rD)||((0,c._)(this,rD,!this.$state.paused()),null==(t=(0,o._)(this,rx).$provider())||t.pause())}function os(){(0,_._)(this,r7,ox).call(this),(0,c._)(this,rP,!1),(0,o._)(this,rM).replaying=!1,(0,o._)(this,rM).looping=!1,(0,c._)(this,rE,!1),(0,c._)(this,rq,void 0),(0,o._)(this,rT).clear()}function on(t,e){let i=(0,o._)(this,rM).queue.serve(t);i&&(e.request=i,e.triggers.add(i))}function oa(){(0,_._)(this,rG,or).call(this),(0,_._)(this,rj,oo).call(this);let t=(0,o._)(this,rx).textTracks;new v.EventsController(t).add("add",(0,_._)(this,rG,or).bind(this)).add("remove",(0,_._)(this,rG,or).bind(this)).add("mode-change",(0,_._)(this,rj,oo).bind(this))}function ol(){let t=(0,o._)(this,rx).qualities;new v.EventsController(t).add("add",(0,_._)(this,rB,od).bind(this)).add("remove",(0,_._)(this,rB,od).bind(this)).add("change",(0,_._)(this,rH,o_).bind(this)).add("auto-change",(0,_._)(this,rQ,op).bind(this)).add("readonly-change",(0,_._)(this,rJ,ow).bind(this))}function oh(){let t=(0,o._)(this,rx).audioTracks;new v.EventsController(t).add("add",(0,_._)(this,rK,ou).bind(this)).add("remove",(0,_._)(this,rK,ou).bind(this)).add("change",(0,_._)(this,rU,oc).bind(this))}function or(t){let{textTracks:e}=this.$state;e.set((0,o._)(this,rx).textTracks.toArray()),this.dispatch("text-tracks-change",{detail:e(),trigger:t})}function oo(t){t&&(0,_._)(this,rF,on).call(this,"media-text-track-change-request",t);let e=(0,o._)(this,rx).textTracks.selected,{textTrack:i}=this.$state;i()!==e&&(i.set(e),this.dispatch("text-track-change",{detail:e,trigger:t}))}function ou(t){let{audioTracks:e}=this.$state;e.set((0,o._)(this,rx).audioTracks.toArray()),this.dispatch("audio-tracks-change",{detail:e(),trigger:t})}function oc(t){let{audioTrack:e}=this.$state;e.set((0,o._)(this,rx).audioTracks.selected),t&&(0,_._)(this,rF,on).call(this,"media-audio-track-change-request",t),this.dispatch("audio-track-change",{detail:e(),trigger:t})}function od(t){let{qualities:e}=this.$state;e.set((0,o._)(this,rx).qualities.toArray()),this.dispatch("qualities-change",{detail:e(),trigger:t})}function o_(t){let{quality:e}=this.$state;e.set((0,o._)(this,rx).qualities.selected),t&&(0,_._)(this,rF,on).call(this,"media-quality-change-request",t),this.dispatch("quality-change",{detail:e(),trigger:t})}function op(){let{qualities:t}=(0,o._)(this,rx),e=t.auto;this.$state.autoQuality.set(e),e||(0,_._)(this,rY,ov).call(this)}function of(){(0,_._)(this,rY,ov).call(this),(0,c._)(this,rz,(0,v.effect)(()=>{let{qualities:t}=(0,o._)(this,rx),{mediaWidth:e,mediaHeight:i}=this.$state,s=e(),n=i();if(0===s||0===n)return;let a=null,l=1/0;for(let e of t){let t=Math.abs(e.width-s)+Math.abs(e.height-n);t<l&&(l=t,a=e)}a&&t[t6.select](a,!0,new v.DOMEvent("resize",{detail:{width:s,height:n}}))}))}function ov(){var t;null==(t=(0,o._)(this,rz))||t.call(this),(0,c._)(this,rz,null)}function ow(){this.$state.canSetQuality.set(!(0,o._)(this,rx).qualities.readonly)}function og(){let{canSetVolume:t,isGoogleCastConnected:e}=this.$state;if(e())return void t.set(!1);C().then(t.set)}function om(t,e,i){let{qualities:s}=(0,o._)(this,rx),n=!1,a=!1;for(let n of t)if(g(n)&&!e.some(t=>t.src===n.src)){let t=s.getBySrc(n.src);t&&(s[t6.remove](t,i),a=!0)}for(let t of(a&&!s.length&&(this.$state.savedState.set(null),s[t6.reset](i)),e)){var l;if(!g(t)||s.getBySrc(t.src))continue;let e={id:null!=(l=t.id)?l:t.height+"p",bitrate:null,codec:null,...t,selected:!1};s[t6.add](e,i),n=!0}n&&!s[io.enableAuto]&&((0,_._)(this,rX,of).call(this),s[io.enableAuto]=(0,_._)(this,rX,of).bind(this),s[io.setAuto](!0,i))}function ok(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{audioTracks:i,qualities:s}=(0,o._)(this,rx);if(!e){(0,c._)(this,rA,[]),(0,c._)(this,rC,[-1,-1]),i[t6.reset](t),s[t6.reset](t),tN(this.$state,e),(0,_._)(this,rI,os).call(this);return}tN(this.$state,e),(0,_._)(this,rI,os).call(this)}function ob(t){var e;let{seekable:i,buffered:s,intrinsicDuration:n,canPlay:a}=this.$state;a.set(!0),s.set(t.buffered),i.set(t.seekable);let l=null!=(e=L(t.seekable))?e:1/0;n.set(l)}function oy(t){if(!(0,v.peek)((0,o._)(this,rx).$provider))return;let{ended:e,seekableStart:i,clipEndTime:s,currentTime:n,realCurrentTime:a,duration:l}=this.$state,h=e()||a()<i()||s()>0&&a()>=s()||.1>Math.abs(n()-l());return h&&this.dispatch("media-seek-request",{detail:i(),trigger:t}),h}function oS(){var t,e,i;let s,n,{currentTime:a,played:l,paused:h}=this.$state;h()||((0,c._)(this,rC,(t=(0,o._)(this,rA),e=(0,o._)(this,rC),i=a(),s=e[0],n=e[1],i<s?[i,-1]:i===s?e:-1===s?(e[0]=i,e):(i>s&&(e[1]=i,-1===n&&t.push(e)),!function(t){if(t.length<=1)return;t.sort((t,e)=>t[0]-e[0]);let e=[],i=t[0];for(let s=1;s<t.length;s++){let n=t[s];i[1]>=n[0]-1?i=[i[0],Math.max(i[1],n[1])]:(e.push(i),i=n)}e.push(i)}(t),e))),l.set(new D((0,o._)(this,rA))))}function oW(t){let{clipStartTime:e,clipEndTime:i,duration:s}=this.$state;e()>0||i()>0||this.handle(this.createEvent("time-change",{detail:s(),trigger:t}))}function o$(){let{storage:t}=(0,o._)(this,rx),{canPlay:e,realCurrentTime:i}=this.$state;if(e()){var s;null==t||null==(s=t.setTime)||s.call(t,i())}}function oM(t){var e;let{storage:i}=(0,o._)(this,rx),{paused:s,seeking:n,ended:a,duration:l}=this.$state;(0,_._)(this,r4,oW).call(this,t),s()||this.dispatch("pause",{trigger:t}),n()&&this.dispatch("seeked",{detail:l(),trigger:t}),a.set(!0),(0,_._)(this,rI,os).call(this),null==i||null==(e=i.setTime)||e.call(i,l(),!0),this.dispatch("ended",{trigger:t})}function ox(){(0,o._)(this,r8).cancel(),this.$state.waiting.set(!1)}var oT=new WeakSet,oP=new WeakSet,oA=new WeakSet,oC=new WeakSet,oE=new WeakSet,oq=new WeakSet,oD=new WeakSet,oO=new WeakSet,oL=new WeakSet,oI=new WeakSet,oF=new WeakSet,oV=new WeakSet,oR=new WeakSet,oN=new WeakSet,oG=new WeakSet,oj=new WeakSet,oK=new WeakSet;class oU extends im{onSetup(){if((0,_._)(this,oT,oB).call(this),!m)for(let t of[(0,_._)(this,oC,oQ),(0,_._)(this,oq,oX),(0,_._)(this,oR,o3),(0,_._)(this,oN,o5),(0,_._)(this,oO,oJ),(0,_._)(this,oI,o0),(0,_._)(this,oF,o1),(0,_._)(this,oG,o4),(0,_._)(this,oK,o8),(0,_._)(this,oj,o9),(0,_._)(this,oD,oY),(0,_._)(this,oV,o2),(0,_._)(this,oL,oZ),(0,_._)(this,oP,oH),(0,_._)(this,oE,oz)])(0,v.effect)(t.bind(this))}constructor(...t){super(...t),(0,p._)(this,oT),(0,p._)(this,oP),(0,p._)(this,oA),(0,p._)(this,oC),(0,p._)(this,oE),(0,p._)(this,oq),(0,p._)(this,oD),(0,p._)(this,oO),(0,p._)(this,oL),(0,p._)(this,oI),(0,p._)(this,oF),(0,p._)(this,oV),(0,p._)(this,oR),(0,p._)(this,oN),(0,p._)(this,oG),(0,p._)(this,oj),(0,p._)(this,oK)}}function oB(){let t={duration:"providedDuration",loop:"providedLoop",poster:"providedPoster",streamType:"providedStreamType",title:"providedTitle",viewType:"providedViewType"},e=new Set(["currentTime","paused","playbackRate","volume"]);for(let n of Object.keys(this.$props)){var i,s;e.has(n)||null==(i=this.$state[null!=(s=t[n])?s:n])||i.set(this.$props[n]())}this.$state.muted.set(this.$props.muted()||0===this.$props.volume())}function oH(){let{viewType:t,streamType:e,title:i,poster:s,loop:n}=this.$props,a=this.$state;a.providedPoster.set(s()),a.providedStreamType.set(e()),a.providedViewType.set(t()),a.providedTitle.set(i()),a.providedLoop.set(n())}function oQ(){let{artist:t,artwork:e}=this.$props;this.$state.artist.set(t()),this.$state.artwork.set(e())}function oz(){let{title:t}=this.$state;this.dispatch("title-change",{detail:t()})}function oX(){let t=this.$props.autoPlay()||this.$props.autoplay();this.$state.autoPlay.set(t),this.dispatch("auto-play-change",{detail:t})}function oY(){let t=this.$state.loop();this.dispatch("loop-change",{detail:t})}function oJ(){let t=this.$props.controls();this.$state.controls.set(t)}function oZ(){let{poster:t}=this.$state;this.dispatch("poster-change",{detail:t()})}function o0(){var t;let e=null!=(t=this.$props.crossOrigin())?t:this.$props.crossorigin();this.$state.crossOrigin.set(!0===e?"":e)}function o1(){let{duration:t}=this.$props;this.dispatch("media-duration-change-request",{detail:t()})}function o2(){let t=this.$props.playsInline()||this.$props.playsinline();this.$state.playsInline.set(t),this.dispatch("plays-inline-change",{detail:t})}function o3(){let{clipStartTime:t}=this.$props;this.dispatch("media-clip-start-change-request",{detail:t()})}function o5(){let{clipEndTime:t}=this.$props;this.dispatch("media-clip-end-change-request",{detail:t()})}function o4(){this.dispatch("live-change",{detail:this.$state.live()})}function o9(){this.$state.liveEdgeTolerance.set(this.$props.liveEdgeTolerance()),this.$state.minLiveDVRWindow.set(this.$props.minLiveDVRWindow())}function o8(){this.dispatch("live-edge-change",{detail:this.$state.liveEdge()})}let o6=["play","pause","seekforward","seekbackward","seekto"];var o7=new WeakSet,ut=new WeakSet,ue=new WeakSet,ui=new WeakSet;class us extends im{onConnect(){(0,v.effect)((0,_._)(this,ut,ua).bind(this)),(0,v.effect)((0,_._)(this,ue,ul).bind(this));let t=(0,_._)(this,ui,uh).bind(this);for(let e of o6)navigator.mediaSession.setActionHandler(e,t);(0,v.onDispose)((0,_._)(this,o7,un).bind(this))}constructor(...t){super(...t),(0,p._)(this,o7),(0,p._)(this,ut),(0,p._)(this,ue),(0,p._)(this,ui)}}function un(){for(let t of o6)navigator.mediaSession.setActionHandler(t,null)}function ua(){var t;let{title:e,artist:i,artwork:s,poster:n}=this.$state;navigator.mediaSession.metadata=new MediaMetadata({title:e(),artist:i(),artwork:null!=(t=s())?t:[{src:n()}]})}function ul(){let{canPlay:t,paused:e}=this.$state;navigator.mediaSession.playbackState=t()?e()?"paused":"playing":"none"}function uh(t){let e=new v.DOMEvent("media-session-action",{detail:t});switch(t.action){case"play":this.dispatch("media-play-request",{trigger:e});break;case"pause":this.dispatch("media-pause-request",{trigger:e});break;case"seekto":case"seekforward":case"seekbackward":var i;this.dispatch("media-seek-request",{detail:(0,v.isNumber)(t.seekTime)?t.seekTime:this.$state.currentTime()+(null!=(i=t.seekOffset)?i:"seekforward"===t.action?10:-10),trigger:e})}}let ur=(0,v.signal)(!1);m||((0,v.listenEvent)(document,"pointerdown",()=>{ur.set(!1)}),(0,v.listenEvent)(document,"keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||ur.set(!0)}));var uo=new WeakMap,uu=new WeakSet,uc=new WeakSet,ud=new WeakSet,u_=new WeakSet;class up extends v.ViewController{onConnect(t){(0,v.effect)(()=>{let e=new v.EventsController(t);if(!ur()){(0,o._)(this,uo).set(!1),um(t,!1),e.add("pointerenter",(0,_._)(this,ud,uw).bind(this)).add("pointerleave",(0,_._)(this,u_,ug).bind(this));return}let i=document.activeElement===t;(0,o._)(this,uo).set(i),um(t,i),e.add("focus",(0,_._)(this,uu,uf).bind(this)).add("blur",(0,_._)(this,uc,uv).bind(this))})}focused(){return(0,o._)(this,uo).call(this)}constructor(...t){super(...t),(0,p._)(this,uu),(0,p._)(this,uc),(0,p._)(this,ud),(0,p._)(this,u_),(0,u._)(this,uo,{writable:!0,value:void 0}),(0,c._)(this,uo,(0,v.signal)(!1))}}function uf(){(0,o._)(this,uo).set(!0),um(this.el,!0)}function uv(){(0,o._)(this,uo).set(!1),um(this.el,!1)}function uw(){uk(this.el,!0)}function ug(){uk(this.el,!1)}function um(t,e){(0,v.setAttribute)(t,"data-focus",e),(0,v.setAttribute)(t,"data-hocus",e)}function uk(t,e){(0,v.setAttribute)(t,"data-hocus",e),(0,v.setAttribute)(t,"data-hover",e)}var ub=new WeakMap,uy=new WeakMap,uS=new WeakMap,uW=new WeakMap,u$=new WeakMap,uM=new WeakMap,ux=new WeakSet,uT=new WeakSet,uP=new WeakSet,uA=new WeakSet,uC=new WeakSet,uE=new WeakSet,uq=new WeakSet,uD=new WeakSet,uO=new WeakSet,uL=new WeakSet,uI=new WeakSet,uF=new WeakSet,uV=new WeakSet,uR=new WeakSet,uN=new WeakSet,uG=new WeakSet,uj=new WeakSet,uK=new WeakSet,uU=new WeakSet,uB=new WeakSet,uH=new WeakSet;class uQ extends v.Component{onSetup(){(0,_._)(this,uA,u0).call(this),(0,v.effect)((0,_._)(this,uP,uZ).bind(this)),(0,v.effect)((0,_._)(this,uL,u9).bind(this)),(0,v.effect)((0,_._)(this,uD,u5).bind(this)),(0,v.effect)((0,_._)(this,uR,ct).bind(this)),(0,v.effect)((0,_._)(this,uF,u6).bind(this)),(0,v.effect)((0,_._)(this,uK,cn).bind(this)),(0,v.effect)((0,_._)(this,uG,ci).bind(this))}onAttach(t){t.setAttribute("data-media-player",""),ed(t,"tabindex","0"),ed(t,"role","region"),(0,v.effect)((0,_._)(this,uB,cl).bind(this)),m?(0,_._)(this,ux,uY).call(this):(0,v.effect)((0,_._)(this,ux,uY).bind(this)),m?(0,_._)(this,uT,uJ).call(this):(0,v.effect)((0,_._)(this,uT,uJ).bind(this)),(0,v.listenEvent)(t,"find-media-player",(0,_._)(this,uC,u1).bind(this))}onConnect(t){y&&(0,v.setAttribute)(t,"data-iphone","");let e=window.matchMedia("(pointer: coarse)");(0,_._)(this,uq,u3).call(this,e),e.onchange=(0,_._)(this,uq,u3).bind(this);let i=new ResizeObserver((0,v.animationFrameThrottle)((0,_._)(this,uE,u2).bind(this)));i.observe(t),(0,v.effect)((0,_._)(this,uE,u2).bind(this)),this.dispatch("media-player-connect",{detail:this,bubbles:!0,composed:!0}),(0,v.onDispose)(()=>{i.disconnect(),e.onchange=null})}onDestroy(){(0,o._)(this,ub).player=null,this.canPlayQueue.reset()}get provider(){return(0,o._)(this,uW)}get controls(){return(0,o._)(this,uS).controls}set controls(t){(0,o._)(this,u$).controls.set(t)}get title(){return(0,v.peek)(this.$state.title)}set title(t){if((0,o._)(this,uM))return void(0,c._)(this,uM,!1);(0,o._)(this,u$).title.set(t)}get qualities(){return(0,o._)(this,ub).qualities}get audioTracks(){return(0,o._)(this,ub).audioTracks}get textTracks(){return(0,o._)(this,ub).textTracks}get textRenderers(){return(0,o._)(this,ub).textRenderers}get duration(){return this.$state.duration()}set duration(t){(0,o._)(this,u$).duration.set(t)}get paused(){return(0,v.peek)(this.$state.paused)}set paused(t){(0,_._)(this,uO,u4).call(this,t)}get muted(){return(0,v.peek)(this.$state.muted)}set muted(t){(0,_._)(this,uI,u8).call(this,t)}get currentTime(){return(0,v.peek)(this.$state.currentTime)}set currentTime(t){(0,_._)(this,uV,u7).call(this,t)}get volume(){return(0,v.peek)(this.$state.volume)}set volume(t){(0,_._)(this,uN,ce).call(this,t)}get playbackRate(){return(0,v.peek)(this.$state.playbackRate)}set playbackRate(t){(0,_._)(this,uj,cs).call(this,t)}async play(t){return(0,o._)(this,uS).play(t)}async pause(t){return(0,o._)(this,uS).pause(t)}async enterFullscreen(t,e){return(0,o._)(this,uS).enterFullscreen(t,e)}async exitFullscreen(t,e){return(0,o._)(this,uS).exitFullscreen(t,e)}enterPictureInPicture(t){return(0,o._)(this,uS).enterPictureInPicture(t)}exitPictureInPicture(t){return(0,o._)(this,uS).exitPictureInPicture(t)}seekToLiveEdge(t){(0,o._)(this,uS).seekToLiveEdge(t)}startLoading(t){(0,o._)(this,ub).notify("can-load",void 0,t)}startLoadingPoster(t){(0,o._)(this,ub).notify("can-load-poster",void 0,t)}requestAirPlay(t){return(0,o._)(this,uS).requestAirPlay(t)}requestGoogleCast(t){return(0,o._)(this,uS).requestGoogleCast(t)}setAudioGain(t,e){return(0,o._)(this,uS).setAudioGain(t,e)}destroy(){super.destroy(),(0,o._)(this,ub).remote.setPlayer(null),this.dispatch("destroy")}constructor(){super(),(0,u._)(this,uW,{get:uz,set:void 0}),(0,u._)(this,u$,{get:uX,set:void 0}),(0,p._)(this,ux),(0,p._)(this,uT),(0,p._)(this,uP),(0,p._)(this,uA),(0,p._)(this,uC),(0,p._)(this,uE),(0,p._)(this,uq),(0,p._)(this,uD),(0,p._)(this,uO),(0,p._)(this,uL),(0,p._)(this,uI),(0,p._)(this,uF),(0,p._)(this,uV),(0,p._)(this,uR),(0,p._)(this,uN),(0,p._)(this,uG),(0,p._)(this,uj),(0,p._)(this,uK),(0,p._)(this,uU),(0,p._)(this,uB),(0,p._)(this,uH),(0,u._)(this,ub,{writable:!0,value:void 0}),(0,u._)(this,uy,{writable:!0,value:void 0}),(0,u._)(this,uS,{writable:!0,value:void 0}),(0,u._)(this,uM,{writable:!0,value:void 0}),this.canPlayQueue=new hN,(0,c._)(this,uM,!1),new oU;let t={player:this,qualities:new ip,audioTracks:new el,storage:null,$provider:(0,v.signal)(null),$providerSetup:(0,v.signal)(!1),$props:this.$props,$state:this.$state};t.remote=this.remoteControl=new tY(void 0),t.remote.setPlayer(this),t.textTracks=new ia,t.textTracks[th.crossOrigin]=this.$state.crossOrigin,t.textRenderers=new ez(t),t.ariaKeys={},(0,c._)(this,ub,t),(0,v.provideContext)(tj,t),this.orientation=new sC,new up,new iq(t);let e=new rW;(0,c._)(this,uy,new ot(e,t)),(0,c._)(this,uS,new rl((0,o._)(this,uy),e,t)),t.delegate=new hE((0,o._)(this,uy).handle.bind((0,o._)(this,uy)),t),t.notify=t.delegate.notify.bind(t.delegate),"undefined"!=typeof navigator&&"mediaSession"in navigator&&new us,new hT("load",this.startLoading.bind(this)),new hT("posterLoad",this.startLoadingPoster.bind(this))}}function uz(){return(0,o._)(this,ub).$provider()}function uX(){return this.$props}function uY(){let t=this.$el,{title:e,live:i,viewType:s,providedTitle:n}=this.$state,a=i(),l=(0,v.uppercaseFirstChar)(s()),h="Unknown"!==l?"".concat(a?"Live ":"").concat(l):a?"Live":"Media",r=e();(0,v.setAttribute)(this.el,"aria-label","".concat(h," Player")+(r?" - ".concat(r):"")),!m&&(null==t?void 0:t.hasAttribute("title"))&&((0,c._)(this,uM,!0),null==t||t.removeAttribute("title"))}function uJ(){let t=this.orientation.landscape?"landscape":"portrait";this.$state.orientation.set(t),(0,v.setAttribute)(this.el,"data-orientation",t),(0,_._)(this,uE,u2).call(this)}function uZ(){this.$state.canPlay()&&(0,o._)(this,uW)?this.canPlayQueue.start():this.canPlayQueue.stop()}function u0(){if(uQ[hW])return void this.setAttributes(uQ[hW]);let t={"data-load":function(){return this.$props.load()},"data-captions":function(){let t=this.$state.textTrack();return!!t&&tq(t)},"data-ios-controls":function(){return this.$state.iOSControls()},"data-controls":function(){return this.controls.showing},"data-buffering":function(){let{canLoad:t,canPlay:e,waiting:i}=this.$state;return t()&&(!e()||i())},"data-error":function(){let{error:t}=this.$state;return!!t()},"data-autoplay-error":function(){let{autoPlayError:t}=this.$state;return!!t()}},e={autoPlay:"autoplay",canAirPlay:"can-airplay",canPictureInPicture:"can-pip",pictureInPicture:"pip",playsInline:"playsinline",remotePlaybackState:"remote-state",remotePlaybackType:"remote-type",isAirPlayConnected:"airplay",isGoogleCastConnected:"google-cast"};for(let s of h$){var i;t["data-"+(null!=(i=e[s])?i:(0,v.camelToKebabCase)(s))]=function(){return this.$state[s]()}}delete t.title,uQ[hW]=t,this.setAttributes(t)}function u1(t){t.detail(this)}function u2(){if(m||!this.el)return;let t=this.el.clientWidth,e=this.el.clientHeight;this.$state.width.set(t),this.$state.height.set(e),(0,v.setStyle)(this.el,"--player-width",t+"px"),(0,v.setStyle)(this.el,"--player-height",e+"px")}function u3(t){if(m)return;let e=t.matches?"coarse":"fine";(0,v.setAttribute)(this.el,"data-pointer",e),this.$state.pointer.set(e),(0,_._)(this,uE,u2).call(this)}function u5(){(0,_._)(this,uO,u4).call(this,this.$props.paused())}function u4(t){t?this.canPlayQueue.enqueue("paused",()=>(0,o._)(this,uS).pause()):this.canPlayQueue.enqueue("paused",()=>(0,o._)(this,uS).play())}function u9(){(0,_._)(this,uI,u8).call(this,this.$props.muted())}function u8(t){this.canPlayQueue.enqueue("muted",()=>{(0,o._)(this,uW)&&(0,o._)(this,uW).setMuted(t)})}function u6(){(0,_._)(this,uV,u7).call(this,this.$props.currentTime())}function u7(t){this.canPlayQueue.enqueue("currentTime",()=>{let{currentTime:e}=this.$state;t!==(0,v.peek)(e)&&(0,v.peek)(()=>{if(!(0,o._)(this,uW))return;let e=tG(t,this.$state);Number.isFinite(e)&&(0,o._)(this,uW).setCurrentTime(e)})})}function ct(){(0,_._)(this,uN,ce).call(this,this.$props.volume())}function ce(t){let e=eo(0,t,1);this.canPlayQueue.enqueue("volume",()=>{(0,o._)(this,uW)&&(0,o._)(this,uW).setVolume(e)})}function ci(){(0,_._)(this,uj,cs).call(this,this.$props.playbackRate())}function cs(t){this.canPlayQueue.enqueue("rate",()=>{var e,i;(0,o._)(this,uW)&&(null==(e=(i=(0,o._)(this,uW)).setPlaybackRate)||e.call(i,t))})}function cn(){(0,_._)(this,uU,ca).call(this,this.$props.playsInline())}function ca(t){this.canPlayQueue.enqueue("playsinline",()=>{var e,i;(0,o._)(this,uW)&&(null==(e=(i=(0,o._)(this,uW)).setPlaysInline)||e.call(i,t))})}function cl(){let t=this.$props.storage(),e=(0,v.isString)(t)?new t0:t;if(null==e?void 0:e.onChange){var i;let{source:s}=this.$state,n=(0,v.isString)(t)?t:null==(i=this.el)?void 0:i.id,a=(0,v.computed)((0,_._)(this,uH,ch).bind(this));(0,v.effect)(()=>e.onChange(s(),a(),n||void 0))}(0,o._)(this,ub).storage=e,(0,o._)(this,ub).textTracks.setStorage(e),(0,v.onDispose)(()=>{var t;null==e||null==(t=e.onDestroy)||t.call(e),(0,o._)(this,ub).storage=null,(0,o._)(this,ub).textTracks.setStorage(null)})}function ch(){let{clipStartTime:t,clipEndTime:e}=this.$props,{source:i}=this.$state,s=i();return s.src?"".concat(s.src,":").concat(t(),":").concat(e()):null}uQ.props={artist:"",artwork:null,autoplay:!1,autoPlay:!1,clipStartTime:0,clipEndTime:0,controls:!1,currentTime:0,crossorigin:null,crossOrigin:null,duration:-1,fullscreenOrientation:"landscape",googleCast:{},load:"visible",posterLoad:"visible",logLevel:"silent",loop:!1,muted:!1,paused:!0,playsinline:!1,playsInline:!1,playbackRate:1,poster:"",preload:"metadata",preferNativeHLS:!1,src:"",title:"",controlsDelay:2e3,hideControlsOnMouseLeave:!1,viewType:"unknown",streamType:"unknown",volume:1,liveEdgeTolerance:10,minLiveDVRWindow:60,keyDisabled:!1,keyTarget:"player",keyShortcuts:{togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",togglePictureInPicture:"i",toggleCaptions:"c",seekBackward:"j J ArrowLeft",seekForward:"l L ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown",speedUp:">",slowDown:"<"},storage:null},uQ.state=tD;let cr=uQ.prototype;(0,v.prop)(cr,"canPlayQueue"),(0,v.prop)(cr,"remoteControl"),(0,v.prop)(cr,"provider"),(0,v.prop)(cr,"controls"),(0,v.prop)(cr,"orientation"),(0,v.prop)(cr,"title"),(0,v.prop)(cr,"qualities"),(0,v.prop)(cr,"audioTracks"),(0,v.prop)(cr,"textTracks"),(0,v.prop)(cr,"textRenderers"),(0,v.prop)(cr,"duration"),(0,v.prop)(cr,"paused"),(0,v.prop)(cr,"muted"),(0,v.prop)(cr,"currentTime"),(0,v.prop)(cr,"volume"),(0,v.prop)(cr,"playbackRate"),(0,v.method)(cr,"play"),(0,v.method)(cr,"pause"),(0,v.method)(cr,"enterFullscreen"),(0,v.method)(cr,"exitFullscreen"),(0,v.method)(cr,"enterPictureInPicture"),(0,v.method)(cr,"exitPictureInPicture"),(0,v.method)(cr,"seekToLiveEdge"),(0,v.method)(cr,"startLoading"),(0,v.method)(cr,"startLoadingPoster"),(0,v.method)(cr,"requestAirPlay"),(0,v.method)(cr,"requestGoogleCast"),(0,v.method)(cr,"setAudioGain");let co=new Map;var cu=new WeakMap,cc=new WeakMap,cd=new WeakMap,c_=new WeakMap,cp=new WeakMap,cf=new WeakSet,cv=new WeakSet,cw=new WeakSet,cg=new WeakSet,cm=new WeakSet,ck=new WeakSet,cb=new WeakSet,cy=new WeakSet;class cS{connect(){let t=(0,o._)(this,cp).call(this);(0,o._)(this,cu)&&((0,_._)(this,cg,cx).call(this,(0,o._)(this,c_).$state.source(),t),(0,_._)(this,cm,cT).call(this,t),(0,c._)(this,cu,!1)),(0,v.effect)((0,_._)(this,cf,cW).bind(this)),(0,v.effect)((0,_._)(this,cv,c$).bind(this)),(0,v.effect)((0,_._)(this,ck,cP).bind(this)),(0,v.effect)((0,_._)(this,cb,cA).bind(this)),(0,v.effect)((0,_._)(this,cy,cC).bind(this))}constructor(t,e,i,s=[]){(0,p._)(this,cf),(0,p._)(this,cv),(0,p._)(this,cw),(0,p._)(this,cg),(0,p._)(this,cm),(0,p._)(this,ck),(0,p._)(this,cb),(0,p._)(this,cy),(0,u._)(this,cu,{writable:!0,value:void 0}),(0,u._)(this,cc,{writable:!0,value:void 0}),(0,u._)(this,cd,{writable:!0,value:void 0}),(0,u._)(this,c_,{writable:!0,value:void 0}),(0,u._)(this,cp,{writable:!0,value:void 0}),(0,c._)(this,cu,!1),(0,c._)(this,cd,t),(0,c._)(this,c_,e),(0,c._)(this,cp,i);let n=new hw,a=new sF,l=new sI,h=new sL,r=[new hm,new hg];(0,c._)(this,cc,(0,v.computed)(()=>{let t=e.$state.remotePlaybackLoader(),i=e.$props.preferNativeHLS()?[l,h,n,a,...r,...s]:[a,l,h,n,...r,...s];return t?[t,...i]:i}));let{$state:d}=e;for(let t of(d.sources.set(cE(e.$props.src())),d.sources())){let i=(0,o._)(this,cc).call(this).find(e=>e.canPlay(t));if(!i)continue;let s=i.mediaType(t);e.$state.source.set(t),e.$state.mediaType.set(s),e.$state.inferredViewType.set(s),(0,o._)(this,cp).set(i),(0,c._)(this,cu,!0);break}}}function cW(){(0,o._)(this,c_).notify("sources-change",[...cE((0,o._)(this,c_).$props.src()),...(0,o._)(this,cd).call(this)])}function c$(){var t;let{$state:e}=(0,o._)(this,c_),i=e.sources(),s=(0,v.peek)(e.source),n=(0,_._)(this,cw,cM).call(this,s,i);if((null==(t=i[0])?void 0:t.src)&&!n.src&&!n.type){let{crossOrigin:t}=e,s=tt(t()),n=new AbortController;return Promise.all(i.map(t=>(0,v.isString)(t.src)&&"?"===t.type?fetch(t.src,{method:"HEAD",credentials:s,signal:n.signal}).then(e=>(t.type=e.headers.get("content-type")||"??",co.set(t.src,t.type),t)).catch(()=>t):t)).then(t=>{if(n.signal.aborted)return;let i=(0,_._)(this,cw,cM).call(this,(0,v.peek)(e.source),t);(0,v.tick)(),i.src||(0,o._)(this,c_).notify("error",{message:"Failed to load resource.",code:4})}),()=>n.abort()}(0,v.tick)()}function cM(t,e){let i={src:"",type:""},s=null,n=new v.DOMEvent("sources-change",{detail:{sources:e}}),a=(0,o._)(this,cc).call(this),{started:l,paused:h,currentTime:r,quality:u,savedState:c}=(0,o._)(this,c_).$state;for(let t of e){let e=a.find(e=>e.canPlay(t));if(e){i=t,s=e;break}}if(g(i)){let t=u(),s=e.find(e=>e.src===(null==t?void 0:t.src));(0,v.peek)(l)?c.set({paused:(0,v.peek)(h),currentTime:(0,v.peek)(r)}):c.set(null),s&&(i=s,n=new v.DOMEvent("quality-change",{detail:{quality:t}}))}return cD(t,i)||(0,_._)(this,cg,cx).call(this,i,s,n),s!==(0,v.peek)((0,o._)(this,cp))&&(0,_._)(this,cm,cT).call(this,s,n),i}function cx(t,e,i){(0,o._)(this,c_).notify("source-change",t,i),(0,o._)(this,c_).notify("media-type-change",(null==e?void 0:e.mediaType(t))||"unknown",i)}function cT(t,e){(0,o._)(this,c_).$providerSetup.set(!1),(0,o._)(this,c_).notify("provider-change",null,e),t&&(0,v.peek)(()=>{var e;return null==(e=t.preconnect)?void 0:e.call(t,(0,o._)(this,c_))}),(0,o._)(this,cp).set(t),(0,o._)(this,c_).notify("provider-loader-change",t,e)}function cP(){let t=(0,o._)(this,c_).$provider();if(!(!t||(0,v.peek)((0,o._)(this,c_).$providerSetup))){if((0,o._)(this,c_).$state.canLoad()){(0,v.scoped)(()=>t.setup(),t.scope),(0,o._)(this,c_).$providerSetup.set(!0);return}(0,v.peek)(()=>{var e;return null==(e=t.preconnect)?void 0:e.call(t)})}}function cA(){if(!(0,o._)(this,c_).$providerSetup())return;let t=(0,o._)(this,c_).$provider(),e=(0,o._)(this,c_).$state.source(),i=(0,v.peek)((0,o._)(this,c_).$state.crossOrigin),s=(0,v.peek)((0,o._)(this,c_).$props.preferNativeHLS);if(!cD(null==t?void 0:t.currentSrc,e)){if((0,o._)(this,c_).$state.canLoad()){let n=new AbortController;if(H(e))(s||!E())&&(function t(e,i){return fetch(e,i).then(t=>t.text()).then(s=>{let n=function(t){let e=t.match(/#EXT-X-STREAM-INF:[^\n]+(\n[^\n]+)*/g);return e?e[0].split("\n")[1].trim():null}(s);if(n)return t(/^https?:/.test(n)?n:new URL(n,e).href,i);let a=/EXT-X-PLAYLIST-TYPE:\s*VOD/.test(s)?"on-demand":"live";return"live"===a&&function(t){for(let e of t.split("\n"))if(e.startsWith("#EXT-X-TARGETDURATION")){let t=parseFloat(e.split(":")[1]);if(!isNaN(t))return t}return -1}(s)>=10&&(/#EXT-X-DVR-ENABLED:\s*true/.test(s)||s.includes("#EXT-X-DISCONTINUITY"))?"live:dvr":a})})(e.src,{credentials:tt(i),signal:n.signal}).then(t=>{(0,o._)(this,c_).notify("stream-type-change",t)}).catch(v.noop);else if(Q(e))fetch(e.src,{credentials:tt(i),signal:n.signal}).then(t=>t.text()).then(t=>/type="static"/.test(t)?"on-demand":"live").then(t=>{(0,o._)(this,c_).notify("stream-type-change",t)}).catch(v.noop);else(0,o._)(this,c_).notify("stream-type-change","on-demand");return(0,v.peek)(()=>{let i=(0,v.peek)((0,o._)(this,c_).$state.preload);return null==t?void 0:t.loadSource(e,i).catch(t=>{})}),()=>n.abort()}try{(0,v.isString)(e.src)&&Y(new URL(e.src).origin)}catch(t){}}}function cC(){let t=(0,o._)(this,cp).call(this),{providedPoster:e,source:i,canLoadPoster:s}=(0,o._)(this,c_).$state;if(!t||!t.loadPoster||!i()||!s()||e())return;let n=new AbortController,a=new v.DOMEvent("source-change",{detail:i});return t.loadPoster(i(),(0,o._)(this,c_),n).then(t=>{(0,o._)(this,c_).notify("poster-change",t||"",a)}).catch(()=>{(0,o._)(this,c_).notify("poster-change","",a)}),()=>{n.abort()}}function cE(t){return((0,v.isArray)(t)?t:[t]).map(t=>(0,v.isString)(t)?{src:t,type:cq(t)}:{...t,type:cq(t.src,t.type)})}function cq(t,e){if((0,v.isString)(e)&&e.length)return e;if((0,v.isString)(t)&&co.has(t))return co.get(t);if(!e&&H({src:t,type:""}))return"application/x-mpegurl";if(!e&&Q({src:t,type:""}))return"application/dash+xml";if(!(0,v.isString)(t)||t.startsWith("blob:"))return"video/object";else if(t.includes("youtube")||t.includes("youtu.be"))return"video/youtube";else if(t.includes("vimeo")&&!t.includes("progressive_redirect")&&!t.includes(".m3u8"))return"video/vimeo";return"?"}function cD(t,e){return(null==t?void 0:t.src)===(null==e?void 0:e.src)&&(null==t?void 0:t.type)===(null==e?void 0:e.type)}var cO=new WeakMap,cL=new WeakMap,cI=new WeakMap,cF=new WeakSet;class cV{constructor(t,e){(0,p._)(this,cF),(0,u._)(this,cO,{writable:!0,value:void 0}),(0,u._)(this,cL,{writable:!0,value:void 0}),(0,u._)(this,cI,{writable:!0,value:void 0}),(0,c._)(this,cI,[]),(0,c._)(this,cO,t),(0,c._)(this,cL,e),(0,v.effect)((0,_._)(this,cF,cR).bind(this))}}function cR(){let t=(0,o._)(this,cO).call(this);for(let e of(0,o._)(this,cI))if(!t.some(t=>t.id===e.id)){let t=e.id&&(0,o._)(this,cL).textTracks.getById(e.id);t&&(0,o._)(this,cL).textTracks.remove(t)}for(let e of t){let t=e.id||t$.createId(e);(0,o._)(this,cL).textTracks.getById(t)||(e.id=t,(0,o._)(this,cL).textTracks.add(e))}(0,c._)(this,cI,t)}var cN=new WeakMap,cG=new WeakMap,cj=new WeakMap,cK=new WeakMap,cU=new WeakMap,cB=new WeakMap,cH=new WeakSet,cQ=new WeakSet,cz=new WeakSet,cX=new WeakSet;class cY extends v.Component{onSetup(){(0,c._)(this,cN,tK()),(0,c._)(this,cG,new cS((0,o._)(this,cj),(0,o._)(this,cN),this.$state.loader,this.$props.loaders()))}onAttach(t){t.setAttribute("data-media-provider","")}onConnect(t){(0,o._)(this,cG).connect(),new cV((0,o._)(this,cK),(0,o._)(this,cN));let e=new ResizeObserver((0,v.animationFrameThrottle)((0,_._)(this,cz,c0).bind(this)));e.observe(t);let i=new MutationObserver((0,_._)(this,cX,c1).bind(this));i.observe(t,{attributes:!0,childList:!0}),(0,_._)(this,cz,c0).call(this),(0,_._)(this,cX,c1).call(this),(0,v.onDispose)(()=>{e.disconnect(),i.disconnect()})}load(t){null==t||t.setAttribute("aria-hidden","true"),window.cancelAnimationFrame((0,o._)(this,cB)),(0,c._)(this,cB,requestAnimationFrame(()=>(0,_._)(this,cH,cJ).call(this,t))),(0,v.onDispose)(()=>{window.cancelAnimationFrame((0,o._)(this,cB))})}onDestroy(){(0,c._)(this,cU,null),(0,_._)(this,cQ,cZ).call(this)}constructor(...t){super(...t),(0,p._)(this,cH),(0,p._)(this,cQ),(0,p._)(this,cz),(0,p._)(this,cX),(0,u._)(this,cN,{writable:!0,value:void 0}),(0,u._)(this,cG,{writable:!0,value:void 0}),(0,u._)(this,cj,{writable:!0,value:void 0}),(0,u._)(this,cK,{writable:!0,value:void 0}),(0,u._)(this,cU,{writable:!0,value:void 0}),(0,u._)(this,cB,{writable:!0,value:void 0}),(0,c._)(this,cj,(0,v.signal)([])),(0,c._)(this,cK,(0,v.signal)([])),(0,c._)(this,cU,null),(0,c._)(this,cB,-1)}}function cJ(t){if(!this.scope)return;let e=this.$state.loader(),{$provider:i}=(0,o._)(this,cN);!((0,o._)(this,cU)===e&&(null==e?void 0:e.target)===t&&(0,v.peek)(i))&&((0,_._)(this,cQ,cZ).call(this),(0,c._)(this,cU,e),e&&(e.target=t||null),e&&t&&e.load((0,o._)(this,cN)).then(t=>{this.scope&&(0,v.peek)(this.$state.loader)===e&&(0,o._)(this,cN).notify("provider-change",t)}))}function cZ(){var t;null==(t=(0,o._)(this,cN))||t.notify("provider-change",null)}function c0(){if(!this.el)return;let{player:t,$state:e}=(0,o._)(this,cN),i=this.el.offsetWidth,s=this.el.offsetHeight;t&&(e.mediaWidth.set(i),e.mediaHeight.set(s),t.el&&((0,v.setStyle)(t.el,"--media-width",i+"px"),(0,v.setStyle)(t.el,"--media-height",s+"px")))}function c1(){let t=[],e=[];for(let i of this.el.children)if(!i.hasAttribute("data-vds")){if(i instanceof HTMLSourceElement){let e={id:i.id,src:i.src,type:i.type};for(let t of["id","src","width","height","bitrate","codec"]){let s=i.getAttribute("data-".concat(t));(0,v.isString)(s)&&(e[t]=/id|src|codec/.test(t)?s:Number(s))}t.push(e)}else if(i instanceof HTMLTrackElement){let t={src:i.src,kind:i.track.kind,language:i.srclang,label:i.label,default:i.default,type:i.getAttribute("data-type")};e.push({id:i.id||t$.createId(t),...t})}}(0,o._)(this,cj).set(t),(0,o._)(this,cK).set(e),(0,v.tick)()}cY.props={loaders:[]},cY.state=new v.State({loader:null});let c2=cY.prototype;(0,v.method)(c2,"load");var c3=new WeakMap,c5=new WeakMap,c4=new WeakSet,c9=new WeakSet,c8=new WeakSet,c6=new WeakSet,c7=new WeakSet,dt=new WeakMap,de=new WeakMap,di=new WeakSet,ds=new WeakSet,dn=new WeakSet,da=new WeakSet;class dl extends v.Component{onSetup(){(0,c._)(this,c3,tK())}onAttach(t){t.style.display="contents"}onConnect(t){t.setAttribute("data-media-announcer",""),ed(t,"role","status"),ed(t,"aria-live","polite");let{busy:e}=this.$state;this.setAttributes({"aria-busy":()=>e()?"true":null}),(0,c._)(this,c5,!0),(0,v.effect)((0,_._)(this,c4,dh).bind(this)),(0,v.effect)((0,_._)(this,c7,dd).bind(this)),(0,v.effect)((0,_._)(this,c6,dc).bind(this)),(0,v.effect)((0,_._)(this,c9,dr).bind(this)),(0,v.effect)((0,_._)(this,c8,du).bind(this)),(0,v.effect)((0,_._)(this,di,d_).bind(this)),(0,v.effect)((0,_._)(this,dn,df).bind(this)),(0,v.tick)(),(0,c._)(this,c5,!1)}constructor(...t){super(...t),(0,p._)(this,c4),(0,p._)(this,c9),(0,p._)(this,c8),(0,p._)(this,c6),(0,p._)(this,c7),(0,p._)(this,di),(0,p._)(this,ds),(0,p._)(this,dn),(0,p._)(this,da),(0,u._)(this,c3,{writable:!0,value:void 0}),(0,u._)(this,c5,{writable:!0,value:void 0}),(0,u._)(this,dt,{writable:!0,value:void 0}),(0,u._)(this,de,{writable:!0,value:void 0}),(0,c._)(this,c5,!1),(0,c._)(this,dt,-1),(0,c._)(this,de,-1)}}function dh(){let{paused:t}=(0,o._)(this,c3).$state;(0,_._)(this,da,dv).call(this,t()?"Pause":"Play")}function dr(){let{fullscreen:t}=(0,o._)(this,c3).$state;(0,_._)(this,da,dv).call(this,t()?"Enter Fullscreen":"Exit Fullscreen")}function du(){let{pictureInPicture:t}=(0,o._)(this,c3).$state;(0,_._)(this,da,dv).call(this,t()?"Enter PiP":"Exit PiP")}function dc(){let{textTrack:t}=(0,o._)(this,c3).$state;(0,_._)(this,da,dv).call(this,t()?"Closed-Captions On":"Closed-Captions Off")}function dd(){var t;let{muted:e,volume:i,audioGain:s}=(0,o._)(this,c3).$state;(0,_._)(this,da,dv).call(this,e()||0===i()?"Mute":"".concat(Math.round(i()*(null!=(t=s())?t:1)*100),"% ").concat((0,_._)(this,ds,dp).call(this,"Volume")))}function d_(){let{seeking:t,currentTime:e}=(0,o._)(this,c3).$state,i=t();(0,o._)(this,dt)>0?(window.clearTimeout((0,o._)(this,de)),(0,c._)(this,de,window.setTimeout(()=>{if(!this.scope)return;let t=(0,v.peek)(e),i=Math.abs(t-(0,o._)(this,dt));if(i>=1){let e=t>=(0,o._)(this,dt),s=hS(i);(0,_._)(this,da,dv).call(this,"".concat((0,_._)(this,ds,dp).call(this,e?"Seek Forward":"Seek Backward")," ").concat(s))}(0,c._)(this,dt,-1),(0,c._)(this,de,-1)},300))):i&&(0,c._)(this,dt,(0,v.peek)(e))}function dp(t){var e,i;let{translations:s}=this.$props;return null!=(i=null==s||null==(e=s())?void 0:e[t||""])?i:t}function df(){let{label:t,busy:e}=this.$state,i=(0,_._)(this,ds,dp).call(this,t());if((0,o._)(this,c5))return;e.set(!0);let s=window.setTimeout(()=>void e.set(!1),150);return this.el&&(0,v.setAttribute)(this.el,"aria-label",i),(0,v.isString)(i)&&this.dispatch("change",{detail:i}),()=>window.clearTimeout(s)}function dv(t){let{label:e}=this.$state;e.set(t)}dl.props={translations:null},dl.state=new v.State({label:null,busy:!1});var dw=new WeakMap,dg=new WeakSet,dm=new WeakSet,dk=new WeakSet;class db extends v.Component{onSetup(){(0,c._)(this,dw,tK()),(0,v.effect)((0,_._)(this,dm,dS).bind(this))}onAttach(t){let{pictureInPicture:e,fullscreen:i}=(0,o._)(this,dw).$state;(0,v.setStyle)(t,"pointer-events","none"),ed(t,"role","group"),this.setAttributes({"data-visible":(0,_._)(this,dk,dW).bind(this),"data-fullscreen":i,"data-pip":e}),(0,v.effect)(()=>{this.dispatch("change",{detail:(0,_._)(this,dk,dW).call(this)})}),(0,v.effect)((0,_._)(this,dg,dy).bind(this)),(0,v.effect)(()=>{let e=i();for(let i of["top","right","bottom","left"])(0,v.setStyle)(t,"padding-".concat(i),e&&"env(safe-area-inset-".concat(i,")"))})}constructor(...t){super(...t),(0,p._)(this,dg),(0,p._)(this,dm),(0,p._)(this,dk),(0,u._)(this,dw,{writable:!0,value:void 0})}}function dy(){if(!this.el)return;let{nativeControls:t}=(0,o._)(this,dw).$state,e=t();(0,v.setAttribute)(this.el,"aria-hidden",e?"true":null),(0,v.setStyle)(this.el,"display",e?"none":null)}function dS(){let{controls:t}=(0,o._)(this,dw).player,{hideDelay:e,hideOnMouseLeave:i}=this.$props;t.defaultDelay=2e3===e()?(0,o._)(this,dw).$props.controlsDelay():e(),t.hideOnMouseLeave=i()}function dW(){let{controlsVisible:t}=(0,o._)(this,dw).$state;return t()}db.props={hideDelay:2e3,hideOnMouseLeave:!1};var d$=new WeakMap,dM=new WeakSet,dx=new WeakMap,dT=new WeakMap,dP=new WeakMap,dA=new WeakSet;class dC extends v.ViewController{onDestroy(){var t;null==(t=(0,o._)(this,dP))||t.call(this),(0,c._)(this,dP,null)}show(t){var e,i,s,n;(0,_._)(this,dA,dq).call(this),window.cancelAnimationFrame((0,o._)(this,dT)),(0,c._)(this,dT,-1),null==(s=(0,o._)(this,dP))||s.call(this),(0,c._)(this,dP,null),(0,c._)(this,dx,window.setTimeout(()=>{(0,c._)(this,dx,-1);let e=(0,o._)(this,d$).content();e&&e.style.removeProperty("display"),(0,v.peek)(()=>(0,o._)(this,d$).onChange(!0,t))},null!=(n=null==(e=(i=(0,o._)(this,d$)).showDelay)?void 0:e.call(i))?n:0))}hide(t){var e,i;(0,_._)(this,dA,dq).call(this),(0,v.peek)(()=>(0,o._)(this,d$).onChange(!1,t)),(0,c._)(this,dT,requestAnimationFrame(()=>{(0,_._)(this,dA,dq).call(this),(0,c._)(this,dT,-1);let t=(0,o._)(this,d$).content();if(t){let s=()=>{t.style.display="none",(0,c._)(this,dP,null)};if("none"!==getComputedStyle(t).animationName){null==(e=(0,o._)(i=this,dP))||e.call(i);let n=(0,v.listenEvent)(t,"animationend",s,{once:!0});(0,c._)(this,dP,n)}else s()}}))}constructor(t){super(),(0,p._)(this,dM),(0,p._)(this,dA),(0,u._)(this,d$,{writable:!0,value:void 0}),(0,u._)(this,dx,{writable:!0,value:void 0}),(0,u._)(this,dT,{writable:!0,value:void 0}),(0,u._)(this,dP,{writable:!0,value:void 0}),(0,c._)(this,dx,-1),(0,c._)(this,dT,-1),(0,c._)(this,dP,null),(0,c._)(this,d$,t),(0,v.effect)((0,_._)(this,dM,dE).bind(this))}}function dE(){let t=(0,o._)(this,d$).trigger();if(!t)return void this.hide();let e=this.show.bind(this),i=this.hide.bind(this);(0,o._)(this,d$).listen(t,e,i)}function dq(){window.clearTimeout((0,o._)(this,dx)),(0,c._)(this,dx,-1)}let dD=(0,v.createContext)(),dO=0;var dL=new WeakMap,dI=new WeakMap,dF=new WeakMap,dV=new WeakMap,dR=new WeakSet,dN=new WeakSet,dG=new WeakSet,dj=new WeakSet,dK=new WeakSet;class dU extends v.Component{onAttach(t){t.style.setProperty("display","contents")}onSetup(){(0,v.provideContext)(dD,{trigger:(0,o._)(this,dI),content:(0,o._)(this,dF),showing:(0,o._)(this,dV),attachTrigger:(0,_._)(this,dR,dB).bind(this),detachTrigger:(0,_._)(this,dN,dH).bind(this),attachContent:(0,_._)(this,dG,dQ).bind(this),detachContent:(0,_._)(this,dj,dz).bind(this)})}constructor(){super(),(0,p._)(this,dR),(0,p._)(this,dN),(0,p._)(this,dG),(0,p._)(this,dj),(0,p._)(this,dK),(0,u._)(this,dL,{writable:!0,value:void 0}),(0,u._)(this,dI,{writable:!0,value:void 0}),(0,u._)(this,dF,{writable:!0,value:void 0}),(0,u._)(this,dV,{writable:!0,value:void 0}),(0,c._)(this,dL,"media-tooltip-".concat(++dO)),(0,c._)(this,dI,(0,v.signal)(null)),(0,c._)(this,dF,(0,v.signal)(null)),(0,c._)(this,dV,(0,v.signal)(!1)),new up;let{showDelay:t}=this.$props;new dC({trigger:(0,o._)(this,dI),content:(0,o._)(this,dF),showDelay:t,listen(t,e,i){(0,v.effect)(()=>{ur()&&(0,v.listenEvent)(t,"focus",e),(0,v.listenEvent)(t,"blur",i)}),new v.EventsController(t).add("touchstart",t=>t.preventDefault(),{passive:!1}).add("mouseenter",e).add("mouseleave",i)},onChange:(0,_._)(this,dK,dX).bind(this)})}}function dB(t){(0,o._)(this,dI).set(t);let e=t.getAttribute("data-media-tooltip");if(e){var i;null==(i=this.el)||i.setAttribute("data-media-".concat(e,"-tooltip"),"")}(0,v.setAttribute)(t,"data-describedby",(0,o._)(this,dL))}function dH(t){t.removeAttribute("data-describedby"),t.removeAttribute("aria-describedby"),(0,o._)(this,dI).set(null)}function dQ(t){t.setAttribute("id",(0,o._)(this,dL)),t.style.display="none",ed(t,"role","tooltip"),(0,o._)(this,dF).set(t)}function dz(t){t.removeAttribute("id"),t.removeAttribute("role"),(0,o._)(this,dF).set(null)}function dX(t){let e=(0,o._)(this,dI).call(this),i=(0,o._)(this,dF).call(this);for(let s of(e&&(0,v.setAttribute)(e,"aria-describedby",t?(0,o._)(this,dL):null),[this.el,e,i]))s&&(0,v.setAttribute)(s,"data-visible",t);(0,o._)(this,dV).set(t)}dU.props={showDelay:700};v.Component;var dY=new WeakSet,dJ=new WeakSet,dZ=new WeakSet;class d0 extends v.Component{onAttach(t){(0,_._)(this,dY,d1).call(this,t),Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){(0,_._)(this,dY,d1).call(this,t);let e=(0,v.useContext)(dD);(0,v.onDispose)(()=>e.detachContent(t)),(0,v.onDispose)(em(()=>{this.connectScope&&(0,v.effect)((0,_._)(this,dJ,d2).bind(this))}))}constructor(){super(),(0,p._)(this,dY),(0,p._)(this,dJ),(0,p._)(this,dZ),new up;let{placement:t}=this.$props;this.setAttributes({"data-placement":t})}}function d1(t){(0,v.useContext)(dD).attachContent(t)}function d2(){let{showing:t}=(0,v.useContext)(dD);if(!t())return;let{placement:e,offset:i,alignOffset:s}=this.$props;return ek(this.el,(0,_._)(this,dZ,d3).call(this),e(),{offsetVarName:"media-tooltip",xOffset:s(),yOffset:i()})}function d3(){return(0,v.useContext)(dD).trigger()}d0.props={placement:"top center",offset:0,alignOffset:0};var d5=new WeakMap,d4=new WeakSet,d9=new WeakSet,d8=new WeakSet,d6=new WeakSet;class d7 extends v.ViewController{onSetup(){let{disabled:t}=this.$props;this.setAttributes({"data-pressed":(0,o._)(this,d5).isPresssed,"aria-pressed":(0,_._)(this,d4,_t).bind(this),"aria-disabled":()=>t()?"true":null})}onAttach(t){ed(t,"tabindex","0"),ed(t,"role","button"),ed(t,"type","button")}onConnect(t){let e=ew(t,(0,_._)(this,d8,_i).bind(this));for(let t of["click","touchstart"])e.add(t,(0,_._)(this,d6,_s).bind(this),{passive:!0})}constructor(t){super(),(0,p._)(this,d4),(0,p._)(this,d9),(0,p._)(this,d8),(0,p._)(this,d6),(0,u._)(this,d5,{writable:!0,value:void 0}),(0,c._)(this,d5,t),new up,t.keyShortcut&&new iK(t.keyShortcut)}}function _t(){return(0,v.ariaBool)((0,o._)(this,d5).isPresssed())}function _e(t){(0,v.isWriteSignal)((0,o._)(this,d5).isPresssed)&&(0,o._)(this,d5).isPresssed.set(t=>!t)}function _i(t){var e;if(this.$props.disabled()||this.el.hasAttribute("data-disabled")){t.preventDefault(),t.stopImmediatePropagation();return}t.preventDefault(),(null!=(e=(0,o._)(this,d5).onPress)?e:(0,_._)(this,d9,_e)).call(this,t)}function _s(t){this.$props.disabled()&&(t.preventDefault(),t.stopImmediatePropagation())}d7.props={disabled:!1};var _n=new WeakMap;class _a extends v.Component{get pressed(){return(0,o._)(this,_n).call(this)}constructor(){super(),(0,u._)(this,_n,{writable:!0,value:void 0}),(0,c._)(this,_n,(0,v.signal)(!1)),new d7({isPresssed:(0,o._)(this,_n)})}}_a.props={disabled:!1,defaultPressed:!1};let _l=_a.prototype;(0,v.prop)(_l,"pressed");var _h=new WeakMap,_r=new WeakSet,_o=new WeakSet,_u=new WeakSet,_c=new WeakSet;class _d extends v.Component{onSetup(){(0,c._)(this,_h,tK());let{canAirPlay:t,isAirPlayConnected:e}=(0,o._)(this,_h).$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":(0,_._)(this,_u,_f).bind(this),"aria-hidden":hK(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","airplay"),e_(t,(0,_._)(this,_c,_v).bind(this))}constructor(){super(),(0,p._)(this,_r),(0,p._)(this,_o),(0,p._)(this,_u),(0,p._)(this,_c),(0,u._)(this,_h,{writable:!0,value:void 0}),new d7({isPresssed:(0,_._)(this,_o,_p).bind(this),onPress:(0,_._)(this,_r,__).bind(this)})}}function __(t){(0,o._)(this,_h).remote.requestAirPlay(t)}function _p(){let{remotePlaybackType:t,remotePlaybackState:e}=(0,o._)(this,_h).$state;return"airplay"===t()&&"disconnected"!==e()}function _f(){let{remotePlaybackType:t,remotePlaybackState:e}=(0,o._)(this,_h).$state;return"airplay"===t()&&e()}function _v(){let{remotePlaybackState:t}=(0,o._)(this,_h).$state;return"AirPlay ".concat(t())}_d.props=d7.props;var _w=new WeakMap,_g=new WeakSet,_m=new WeakSet,_k=new WeakSet,_b=new WeakSet;class _y extends v.Component{onSetup(){(0,c._)(this,_w,tK());let{canGoogleCast:t,isGoogleCastConnected:e}=(0,o._)(this,_w).$state;this.setAttributes({"data-active":e,"data-supported":t,"data-state":(0,_._)(this,_k,_$).bind(this),"aria-hidden":hK(()=>!t())})}onAttach(t){t.setAttribute("data-media-tooltip","google-cast"),e_(t,(0,_._)(this,_b,_M).bind(this))}constructor(){super(),(0,p._)(this,_g),(0,p._)(this,_m),(0,p._)(this,_k),(0,p._)(this,_b),(0,u._)(this,_w,{writable:!0,value:void 0}),new d7({isPresssed:(0,_._)(this,_m,_W).bind(this),onPress:(0,_._)(this,_g,_S).bind(this)})}}function _S(t){(0,o._)(this,_w).remote.requestGoogleCast(t)}function _W(){let{remotePlaybackType:t,remotePlaybackState:e}=(0,o._)(this,_w).$state;return"google-cast"===t()&&"disconnected"!==e()}function _$(){let{remotePlaybackType:t,remotePlaybackState:e}=(0,o._)(this,_w).$state;return"google-cast"===t()&&e()}function _M(){let{remotePlaybackState:t}=(0,o._)(this,_w).$state;return"Google Cast ".concat(t())}_y.props=d7.props;var _x=new WeakMap,_T=new WeakSet,_P=new WeakSet;class _A extends v.Component{onSetup(){(0,c._)(this,_x,tK());let{paused:t,ended:e}=(0,o._)(this,_x).$state;this.setAttributes({"data-paused":t,"data-ended":e})}onAttach(t){t.setAttribute("data-media-tooltip","play"),e_(t,"Play")}constructor(){super(),(0,p._)(this,_T),(0,p._)(this,_P),(0,u._)(this,_x,{writable:!0,value:void 0}),new d7({isPresssed:(0,_._)(this,_P,_E).bind(this),keyShortcut:"togglePaused",onPress:(0,_._)(this,_T,_C).bind(this)})}}function _C(t){let e=(0,o._)(this,_x).remote;(0,_._)(this,_P,_E).call(this)?e.pause(t):e.play(t)}function _E(){let{paused:t}=(0,o._)(this,_x).$state;return!t()}_A.props=d7.props;var _q=new WeakMap,_D=new WeakSet,_O=new WeakSet,_L=new WeakSet;class _I extends v.Component{onSetup(){(0,c._)(this,_q,tK()),this.setAttributes({"data-active":(0,_._)(this,_O,_V).bind(this),"data-supported":()=>!(0,_._)(this,_L,_R).call(this),"aria-hidden":hK((0,_._)(this,_L,_R).bind(this))})}onAttach(t){t.setAttribute("data-media-tooltip","caption"),e_(t,"Captions")}constructor(){super(),(0,p._)(this,_D),(0,p._)(this,_O),(0,p._)(this,_L),(0,u._)(this,_q,{writable:!0,value:void 0}),new d7({isPresssed:(0,_._)(this,_O,_V).bind(this),keyShortcut:"toggleCaptions",onPress:(0,_._)(this,_D,_F).bind(this)})}}function _F(t){(0,o._)(this,_q).remote.toggleCaptions(t)}function _V(){let{textTrack:t}=(0,o._)(this,_q).$state,e=t();return!!e&&tq(e)}function _R(){let{hasCaptions:t}=(0,o._)(this,_q).$state;return!t()}_I.props=d7.props;var _N=new WeakMap,_G=new WeakSet,_j=new WeakSet,_K=new WeakSet;class _U extends v.Component{onSetup(){(0,c._)(this,_N,tK());let{fullscreen:t}=(0,o._)(this,_N).$state,e=(0,_._)(this,_K,_Q).bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":hK(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","fullscreen"),e_(t,"Fullscreen")}constructor(){super(),(0,p._)(this,_G),(0,p._)(this,_j),(0,p._)(this,_K),(0,u._)(this,_N,{writable:!0,value:void 0}),new d7({isPresssed:(0,_._)(this,_j,_H).bind(this),keyShortcut:"toggleFullscreen",onPress:(0,_._)(this,_G,_B).bind(this)})}}function _B(t){let e=(0,o._)(this,_N).remote,i=this.$props.target();(0,_._)(this,_j,_H).call(this)?e.exitFullscreen(i,t):e.enterFullscreen(i,t)}function _H(){let{fullscreen:t}=(0,o._)(this,_N).$state;return t()}function _Q(){let{canFullscreen:t}=(0,o._)(this,_N).$state;return t()}_U.props={...d7.props,target:"prefer-media"};var _z=new WeakMap,_X=new WeakSet,_Y=new WeakSet,_J=new WeakSet;class _Z extends v.Component{onSetup(){(0,c._)(this,_z,tK()),this.setAttributes({"data-muted":(0,_._)(this,_Y,_1).bind(this),"data-state":(0,_._)(this,_J,_2).bind(this)})}onAttach(t){t.setAttribute("data-media-mute-button",""),t.setAttribute("data-media-tooltip","mute"),e_(t,"Mute")}constructor(){super(),(0,p._)(this,_X),(0,p._)(this,_Y),(0,p._)(this,_J),(0,u._)(this,_z,{writable:!0,value:void 0}),new d7({isPresssed:(0,_._)(this,_Y,_1).bind(this),keyShortcut:"toggleMuted",onPress:(0,_._)(this,_X,_0).bind(this)})}}function _0(t){let e=(0,o._)(this,_z).remote;(0,_._)(this,_Y,_1).call(this)?e.unmute(t):e.mute(t)}function _1(){let{muted:t,volume:e}=(0,o._)(this,_z).$state;return t()||0===e()}function _2(){let{muted:t,volume:e}=(0,o._)(this,_z).$state,i=e();return t()||0===i?"muted":i>=.5?"high":i<.5?"low":void 0}_Z.props=d7.props;var _3=new WeakMap,_5=new WeakSet,_4=new WeakSet,_9=new WeakSet;class _8 extends v.Component{onSetup(){(0,c._)(this,_3,tK());let{pictureInPicture:t}=(0,o._)(this,_3).$state,e=(0,_._)(this,_9,pt).bind(this);this.setAttributes({"data-active":t,"data-supported":e,"aria-hidden":hK(()=>!e())})}onAttach(t){t.setAttribute("data-media-tooltip","pip"),e_(t,"PiP")}constructor(){super(),(0,p._)(this,_5),(0,p._)(this,_4),(0,p._)(this,_9),(0,u._)(this,_3,{writable:!0,value:void 0}),new d7({isPresssed:(0,_._)(this,_4,_7).bind(this),keyShortcut:"togglePictureInPicture",onPress:(0,_._)(this,_5,_6).bind(this)})}}function _6(t){let e=(0,o._)(this,_3).remote;(0,_._)(this,_4,_7).call(this)?e.exitPictureInPicture(t):e.enterPictureInPicture(t)}function _7(){let{pictureInPicture:t}=(0,o._)(this,_3).$state;return t()}function pt(){let{canPictureInPicture:t}=(0,o._)(this,_3).$state;return t()}_8.props=d7.props;var pe=new WeakMap,pi=new WeakSet,ps=new WeakSet,pn=new WeakSet;class pa extends v.Component{onSetup(){(0,c._)(this,pe,tK());let{seeking:t}=(0,o._)(this,pe).$state,{seconds:e}=this.$props,i=(0,_._)(this,pi,pl).bind(this);this.setAttributes({seconds:e,"data-seeking":t,"data-supported":i,"aria-hidden":hK(()=>!i())})}onAttach(t){ed(t,"tabindex","0"),ed(t,"role","button"),ed(t,"type","button"),t.setAttribute("data-media-tooltip","seek"),e_(t,(0,_._)(this,ps,ph).bind(this))}onConnect(t){ew(t,(0,_._)(this,pn,pr).bind(this))}constructor(){super(),(0,p._)(this,pi),(0,p._)(this,ps),(0,p._)(this,pn),(0,u._)(this,pe,{writable:!0,value:void 0}),new up}}function pl(){let{canSeek:t}=(0,o._)(this,pe).$state;return t()}function ph(){let{seconds:t}=this.$props;return"Seek ".concat(t()>0?"forward":"backward"," ").concat(t()," seconds")}function pr(t){let{seconds:e,disabled:i}=this.$props;if(i())return;let{currentTime:s}=(0,o._)(this,pe).$state,n=s()+e();(0,o._)(this,pe).remote.seek(n,t)}pa.props={disabled:!1,seconds:30};var po=new WeakMap,pu=new WeakSet;class pc extends v.Component{onSetup(){(0,c._)(this,po,tK());let{disabled:t}=this.$props,{live:e,liveEdge:i}=(0,o._)(this,po).$state,s=()=>!e();this.setAttributes({"data-edge":i,"data-hidden":s,"aria-disabled":hK(()=>t()||i()),"aria-hidden":hK(s)})}onAttach(t){ed(t,"tabindex","0"),ed(t,"role","button"),ed(t,"type","button"),t.setAttribute("data-media-tooltip","live")}onConnect(t){ew(t,(0,_._)(this,pu,pd).bind(this))}constructor(){super(),(0,p._)(this,pu),(0,u._)(this,po,{writable:!0,value:void 0}),new up}}function pd(t){let{disabled:e}=this.$props,{liveEdge:i}=(0,o._)(this,po).$state;e()||i()||(0,o._)(this,po).remote.seekToLiveEdge(t)}pc.props={disabled:!1};let p_=new v.State({min:0,max:100,value:0,step:1,pointerValue:0,focused:!1,dragging:!1,pointing:!1,hidden:!1,get active(){return this.dragging||this.focused||this.pointing},get fillRate(){return pp(this.min,this.max,this.value)},get fillPercent(){return 100*this.fillRate},get pointerRate(){return pp(this.min,this.max,this.pointerValue)},get pointerPercent(){return 100*this.pointerRate}});function pp(t,e,i){let s=e-t;return s>0?(i-t)/s:0}var pf=new WeakMap,pv=new WeakMap,pw=new WeakSet;class pg extends v.ViewController{onConnect(t){(0,c._)(this,pv,new IntersectionObserver(t=>{var e,i;null==(e=(i=(0,o._)(this,pf)).callback)||e.call(i,t,(0,o._)(this,pv))},(0,o._)(this,pf))),(0,o._)(this,pv).observe(t),(0,v.onDispose)((0,_._)(this,pw,pm).bind(this))}constructor(t){super(),(0,p._)(this,pw),(0,u._)(this,pf,{writable:!0,value:void 0}),(0,u._)(this,pv,{writable:!0,value:void 0}),(0,c._)(this,pf,t)}}function pm(){var t;null==(t=(0,o._)(this,pv))||t.disconnect(),(0,c._)(this,pv,void 0)}let pk=(0,v.createContext)(),pb=(0,v.createContext)(),py={Left:-1,ArrowLeft:-1,Up:1,ArrowUp:1,Right:1,ArrowRight:1,Down:-1,ArrowDown:-1};var pS=new WeakMap,pW=new WeakMap,p$=new WeakMap,pM=new WeakSet,px=new WeakMap,pT=new WeakMap,pP=new WeakMap,pA=new WeakSet,pC=new WeakSet,pE=new WeakSet,pq=new WeakSet,pD=new WeakSet,pO=new WeakSet,pL=new WeakSet,pI=new WeakSet,pF=new WeakSet,pV=new WeakSet,pR=new WeakSet,pN=new WeakSet,pG=new WeakSet,pj=new WeakSet,pK=new WeakMap,pU=new WeakMap,pB=new WeakSet,pH=new WeakSet,pQ=new WeakSet,pz=new WeakSet,pX=new WeakSet,pY=new WeakSet,pJ=new WeakMap;class pZ extends v.ViewController{onSetup(){(0,v.hasProvidedContext)(pb)&&(0,c._)(this,p$,(0,v.useContext)(pb))}onConnect(t){(0,v.effect)((0,_._)(this,pE,p3).bind(this,t)),(0,v.effect)((0,_._)(this,pq,p5).bind(this,t)),(0,o._)(this,pS).swipeGesture&&(0,v.effect)((0,_._)(this,pM,p0).bind(this))}constructor(t,e){super(),(0,p._)(this,pM),(0,p._)(this,pA),(0,p._)(this,pC),(0,p._)(this,pE),(0,p._)(this,pq),(0,p._)(this,pD),(0,p._)(this,pO),(0,p._)(this,pL),(0,p._)(this,pI),(0,p._)(this,pF),(0,p._)(this,pV),(0,p._)(this,pR),(0,p._)(this,pN),(0,p._)(this,pG),(0,p._)(this,pj),(0,p._)(this,pB),(0,p._)(this,pH),(0,p._)(this,pQ),(0,p._)(this,pz),(0,p._)(this,pX),(0,p._)(this,pY),(0,u._)(this,pS,{writable:!0,value:void 0}),(0,u._)(this,pW,{writable:!0,value:void 0}),(0,u._)(this,p$,{writable:!0,value:void 0}),(0,u._)(this,px,{writable:!0,value:void 0}),(0,u._)(this,pT,{writable:!0,value:void 0}),(0,u._)(this,pP,{writable:!0,value:void 0}),(0,u._)(this,pK,{writable:!0,value:void 0}),(0,u._)(this,pU,{writable:!0,value:void 0}),(0,u._)(this,pJ,{writable:!0,value:void 0}),(0,c._)(this,px,null),(0,c._)(this,pT,null),(0,c._)(this,pP,null),(0,c._)(this,pU,!1),(0,c._)(this,pJ,(0,v.functionThrottle)(t=>{(0,_._)(this,pL,p8).call(this,(0,_._)(this,pI,p6).call(this,t),t)},20,{leading:!0})),(0,c._)(this,pS,t),(0,c._)(this,pW,e)}}function p0(){var t;let{pointer:e}=(0,o._)(this,pW).$state;if("coarse"!==e()||!(0,o._)(this,pS).swipeGesture())return void(0,c._)(this,px,null);(0,c._)(this,px,null==(t=(0,o._)(this,pW).player.el)?void 0:t.querySelector("media-provider,[data-media-provider]")),(0,o._)(this,px)&&new v.EventsController((0,o._)(this,px)).add("touchstart",(0,_._)(this,pA,p1).bind(this),{passive:!0}).add("touchmove",(0,_._)(this,pC,p2).bind(this),{passive:!1})}function p1(t){(0,c._)(this,pT,t.touches[0])}function p2(t){if((0,v.isNull)((0,o._)(this,pT))||eg(t))return;let e=t.touches[0],i=e.clientX-(0,o._)(this,pT).clientX,s=e.clientY-(0,o._)(this,pT).clientY,n=this.$state.dragging();!n&&Math.abs(s)>5||!n&&(t.preventDefault(),Math.abs(i)>20&&((0,c._)(this,pT,e),(0,c._)(this,pP,this.$state.value()),(0,_._)(this,pG,fs).call(this,(0,o._)(this,pP),t)))}function p3(t){let{hidden:e}=this.$props;(0,v.listenEvent)(t,"focus",(0,_._)(this,pD,p4).bind(this)),e()||(0,o._)(this,pS).isDisabled()||new v.EventsController(t).add("keyup",(0,_._)(this,pH,fl).bind(this)).add("keydown",(0,_._)(this,pB,fa).bind(this)).add("pointerenter",(0,_._)(this,pF,p7).bind(this)).add("pointermove",(0,_._)(this,pV,ft).bind(this)).add("pointerleave",(0,_._)(this,pR,fe).bind(this)).add("pointerdown",(0,_._)(this,pN,fi).bind(this))}function p5(t){!(0,o._)(this,pS).isDisabled()&&this.$state.dragging()&&new v.EventsController(document).add("pointerup",(0,_._)(this,pX,fo).bind(this),{capture:!0}).add("pointermove",(0,o._)(this,pJ).bind(this)).add("touchmove",(0,_._)(this,pY,fu).bind(this),{passive:!1})}function p4(){(0,_._)(this,pL,p8).call(this,this.$state.value())}function p9(t,e){var i,s,n,a;let{value:l,min:h,max:r,dragging:u}=this.$state,c=Math.max(h(),Math.min(t,r()));l.set(c);let d=this.createEvent("value-change",{detail:c,trigger:e});if(this.dispatch(d),null==(i=(s=(0,o._)(this,pS)).onValueChange)||i.call(s,d),u()){let t=this.createEvent("drag-value-change",{detail:c,trigger:e});this.dispatch(t),null==(n=(a=(0,o._)(this,pS)).onDragValueChange)||n.call(a,t)}}function p8(t,e){let{pointerValue:i,dragging:s}=this.$state;i.set(t),this.dispatch("pointer-value-change",{detail:t,trigger:e}),s()&&(0,_._)(this,pO,p9).call(this,t,e)}function p6(t){let e,i=this.el.getBoundingClientRect(),{min:s,max:n}=this.$state;if("vertical"===this.$props.orientation()){let{bottom:s,height:n}=i;e=(s-t.clientY)/n}else if((0,o._)(this,pT)&&(0,v.isNumber)((0,o._)(this,pP))){let{width:i}=(0,o._)(this,px).getBoundingClientRect(),a=(t.clientX-(0,o._)(this,pT).clientX)/i,l=n()-s(),h=l*Math.abs(a);e=(a<0?(0,o._)(this,pP)-h:(0,o._)(this,pP)+h)/l}else{let{left:s,width:n}=i;e=(t.clientX-s)/n}return Math.max(s(),Math.min(n(),(0,o._)(this,pS).roundValue(function(t,e,i,s){let n=s*Math.round((e-t)*eo(0,i,1)/s);return t+n}(s(),n(),e,(0,o._)(this,pS).getStep()))))}function p7(t){this.$state.pointing.set(!0)}function ft(t){let{dragging:e}=this.$state;e()||(0,_._)(this,pL,p8).call(this,(0,_._)(this,pI,p6).call(this,t),t)}function fe(t){this.$state.pointing.set(!1)}function fi(t){if(0!==t.button)return;let e=(0,_._)(this,pI,p6).call(this,t);(0,_._)(this,pG,fs).call(this,e,t),(0,_._)(this,pL,p8).call(this,e,t)}function fs(t,e){var i,s,n,a;let{dragging:l}=this.$state;if(l())return;l.set(!0),(0,o._)(this,pW).remote.pauseControls(e);let h=this.createEvent("drag-start",{detail:t,trigger:e});this.dispatch(h),null==(i=(s=(0,o._)(this,pS)).onDragStart)||i.call(s,h),null==(a=(0,o._)(this,p$))||null==(n=a.onDragStart)||n.call(a)}function fn(t,e){var i,s,n,a;let{dragging:l}=this.$state;if(!l())return;l.set(!1),(0,o._)(this,pW).remote.resumeControls(e);let h=this.createEvent("drag-end",{detail:t,trigger:e});this.dispatch(h),null==(i=(s=(0,o._)(this,pS)).onDragEnd)||i.call(s,h),(0,c._)(this,pT,null),(0,c._)(this,pP,null),null==(a=(0,o._)(this,p$))||null==(n=a.onDragEnd)||n.call(a)}function fa(t){if(!Object.keys(py).includes(t.key))return;let{key:e}=t,i=(0,_._)(this,pQ,fh).call(this,t);if(!(0,v.isNull)(i)){(0,_._)(this,pL,p8).call(this,i,t),(0,_._)(this,pO,p9).call(this,i,t);return}let s=(0,_._)(this,pz,fr).call(this,t);!(0,o._)(this,pU)&&((0,c._)(this,pU,e===(0,o._)(this,pK)),!this.$state.dragging()&&(0,o._)(this,pU)&&(0,_._)(this,pG,fs).call(this,s,t)),(0,_._)(this,pL,p8).call(this,s,t),(0,c._)(this,pK,e)}function fl(t){if(!Object.keys(py).includes(t.key)||!(0,v.isNull)((0,_._)(this,pQ,fh).call(this,t)))return;let e=(0,o._)(this,pU)?this.$state.pointerValue():(0,_._)(this,pz,fr).call(this,t);(0,_._)(this,pO,p9).call(this,e,t),(0,_._)(this,pj,fn).call(this,e,t),(0,c._)(this,pK,""),(0,c._)(this,pU,!1)}function fh(t){let e=t.key,{min:i,max:s}=this.$state;return"Home"===e||"PageUp"===e?i():"End"===e||"PageDown"===e?s():!t.metaKey&&/^[0-9]$/.test(e)?(s()-i())/10*Number(e):null}function fr(t){var e,i,s;let{key:n,shiftKey:a}=t;t.preventDefault(),t.stopPropagation();let{shiftKeyMultiplier:l}=this.$props,{min:h,max:r,value:u,pointerValue:c}=this.$state,d=(0,o._)(this,pS).getStep(),_=(0,o._)(this,pS).getKeyStep(),p=a?_*l():_,f=Number(py[n]),v=(0,o._)(this,pU)?c():null!=(s=null==(e=(i=(0,o._)(this,pS)).getValue)?void 0:e.call(i))?s:u();return Math.max(h(),Math.min(r(),Number(((v+p*f)/d*d).toFixed(3))))}function fo(t){if(0!==t.button)return;t.preventDefault(),t.stopImmediatePropagation();let e=(0,_._)(this,pI,p6).call(this,t);(0,_._)(this,pL,p8).call(this,e,t),(0,_._)(this,pj,fn).call(this,e,t)}function fu(t){t.preventDefault()}let fc=(0,v.createContext)(()=>({}));var fd=new WeakMap,f_=new WeakMap,fp=new WeakMap,ff=new WeakMap,fv=new WeakSet,fw=new WeakSet,fg=new WeakSet,fm=new WeakSet,fk=new WeakSet,fb=new WeakSet,fy=new WeakSet,fS=new WeakSet,fW=new WeakMap;class f$ extends v.ViewController{onSetup(){(0,c._)(this,fd,tK());let t=new up;t.attach(this),this.$state.focused=t.focused.bind(t),(0,v.hasProvidedContext)(fc)||(0,v.provideContext)(fc,{default:"value"}),(0,v.provideContext)(pk,{orientation:this.$props.orientation,disabled:(0,o._)(this,f_).isDisabled,preview:(0,v.signal)(null)}),(0,v.effect)((0,_._)(this,fg,fT).bind(this)),(0,v.effect)((0,_._)(this,fm,fP).bind(this)),(0,v.effect)((0,_._)(this,fk,fA).bind(this)),(0,_._)(this,fy,fE).call(this),new pZ((0,o._)(this,f_),(0,o._)(this,fd)).attach(this),new pg({callback:(0,_._)(this,fv,fM).bind(this)}).attach(this)}onAttach(t){ed(t,"role","slider"),ed(t,"tabindex","0"),ed(t,"autocomplete","off"),m?(0,_._)(this,fS,fq).call(this):(0,v.effect)((0,_._)(this,fS,fq).bind(this))}onConnect(t){(0,v.onDispose)(ef(t,(0,o._)(this,fp).set)),(0,v.effect)((0,_._)(this,fw,fx).bind(this))}constructor(t){super(),(0,p._)(this,fv),(0,p._)(this,fw),(0,p._)(this,fg),(0,p._)(this,fm),(0,p._)(this,fk),(0,p._)(this,fb),(0,p._)(this,fy),(0,p._)(this,fS),(0,u._)(this,fd,{writable:!0,value:void 0}),(0,u._)(this,f_,{writable:!0,value:void 0}),(0,u._)(this,fp,{writable:!0,value:void 0}),(0,u._)(this,ff,{writable:!0,value:void 0}),(0,u._)(this,fW,{writable:!0,value:void 0}),(0,c._)(this,fp,(0,v.signal)(!0)),(0,c._)(this,ff,(0,v.signal)(!0)),(0,c._)(this,fW,(0,v.animationFrameThrottle)((t,e)=>{var i,s;null==(i=this.el)||i.style.setProperty("--slider-fill",t+"%"),null==(s=this.el)||s.style.setProperty("--slider-pointer",e+"%")})),(0,c._)(this,f_,t)}}function fM(t){(0,o._)(this,ff).set(t[0].isIntersecting)}function fx(){let{hidden:t}=this.$props;this.$state.hidden.set(t()||!(0,o._)(this,fp).call(this)||!(0,o._)(this,ff).bind(this))}function fT(){let{dragging:t,value:e,min:i,max:s}=this.$state;if(!(0,v.peek)(t)){var n,a;e.set((n=i(),a=s(),eo(n,eh(e(),er((0,o._)(this,f_).getStep())),a)))}}function fP(){this.$state.step.set((0,o._)(this,f_).getStep())}function fA(){if(!(0,o._)(this,f_).isDisabled())return;let{dragging:t,pointing:e}=this.$state;t.set(!1),e.set(!1)}function fC(){return(0,v.ariaBool)((0,o._)(this,f_).isDisabled())}function fE(){var t,e;let{orientation:i}=this.$props,{dragging:s,active:n,pointing:a}=this.$state;this.setAttributes({"data-dragging":s,"data-pointing":a,"data-active":n,"aria-disabled":(0,_._)(this,fb,fC).bind(this),"aria-valuemin":null!=(t=(0,o._)(this,f_).aria.valueMin)?t:this.$state.min,"aria-valuemax":null!=(e=(0,o._)(this,f_).aria.valueMax)?e:this.$state.max,"aria-valuenow":(0,o._)(this,f_).aria.valueNow,"aria-valuetext":(0,o._)(this,f_).aria.valueText,"aria-orientation":i})}function fq(){let{fillPercent:t,pointerPercent:e}=this.$state;(0,o._)(this,fW).call(this,eh(t(),3),eh(e(),3))}f$.props={hidden:!1,disabled:!1,step:1,keyStep:1,orientation:"horizontal",shiftKeyMultiplier:5};var fD=new WeakSet,fO=new WeakSet,fL=new WeakSet,fI=new WeakSet;class fF extends v.Component{onSetup(){(0,v.effect)((0,_._)(this,fL,fN).bind(this)),(0,v.effect)((0,_._)(this,fI,fG).bind(this))}constructor(){super(),(0,p._)(this,fD),(0,p._)(this,fO),(0,p._)(this,fL),(0,p._)(this,fI),new f$({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:this.$props.disabled,aria:{valueNow:(0,_._)(this,fD,fV).bind(this),valueText:(0,_._)(this,fO,fR).bind(this)}})}}function fV(){let{value:t}=this.$state;return Math.round(t())}function fR(){let{value:t,max:e}=this.$state;return eh(t()/e()*100,2)+"%"}function fN(){let{value:t}=this.$props;this.$state.value.set(t())}function fG(){let{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}fF.props={...f$.props,min:0,max:100,value:0},fF.state=p_;let fj=new Map,fK=new Map;var fU=new WeakMap,fB=new WeakMap,fH=new WeakMap,fQ=new WeakSet,fz=new WeakSet,fX=new WeakSet,fY=new WeakSet,fJ=new WeakSet,fZ=new WeakSet,f0=new WeakSet,f1=new WeakSet;class f2{static create(t,e){return new f2(t,e,tK())}constructor(t,e,i){(0,p._)(this,fQ),(0,p._)(this,fz),(0,p._)(this,fX),(0,p._)(this,fY),(0,p._)(this,fJ),(0,p._)(this,fZ),(0,p._)(this,f0),(0,p._)(this,f1),(0,u._)(this,fU,{writable:!0,value:void 0}),(0,u._)(this,fB,{writable:!0,value:void 0}),(0,u._)(this,fH,{writable:!0,value:void 0}),this.$images=(0,v.signal)([]),(0,c._)(this,fB,t),(0,c._)(this,fH,e),(0,c._)(this,fU,i),(0,v.effect)((0,_._)(this,fQ,f3).bind(this))}}function f3(){let{canLoad:t}=(0,o._)(this,fU).$state;if(!t())return;let e=(0,o._)(this,fB).call(this);if(e){if((0,v.isString)(e)&&fj.has(e)){let t=fj.get(e);if(fj.delete(e),fj.set(e,t),fj.size>99){let t=fj.keys().next().value;fj.delete(t)}this.$images.set(fj.get(e))}else if((0,v.isString)(e)){var s;let t=(0,o._)(this,fH).call(this),n=e+"::"+t;if(!fK.has(n)){let s=new Promise(async(s,n)=>{try{let a=await fetch(e,{credentials:tt(t)});if("application/json"===a.headers.get("content-type")){let t=await a.json();if((0,v.isArray)(t))if(t[0]&&"text"in t[0])s((0,_._)(this,fY,f9).call(this,t));else{for(let e=0;e<t.length;e++){let i=t[e];l9((0,v.isObject)(i),!1),l9("url"in i&&(0,v.isString)(i.url),!1),l9("startTime"in i&&(0,v.isNumber)(i.startTime),!1)}s(t)}else s((0,_._)(this,fX,f4).call(this,t));return}i.e(298).then(i.bind(i,1298)).then(async t=>{let{parseResponse:e}=t;try{let{cues:t}=await e(a);s((0,_._)(this,fY,f9).call(this,t))}catch(t){n(t)}})}catch(t){n(t)}}).then(t=>(fj.set(n,t),t)).catch(t=>{(0,_._)(this,f1,vt).call(this,e,t)}).finally(()=>{(0,v.isString)(n)&&fK.delete(n)});fK.set(n,s)}null==(s=fK.get(n))||s.then(t=>{this.$images.set(t||[])})}else if((0,v.isArray)(e))try{this.$images.set((0,_._)(this,fz,f5).call(this,e))}catch(t){(0,_._)(this,f1,vt).call(this,e,t)}else try{this.$images.set((0,_._)(this,fX,f4).call(this,e))}catch(t){(0,_._)(this,f1,vt).call(this,e,t)}return()=>{this.$images.set([])}}}function f5(t){let e=(0,_._)(this,fJ,f8).call(this);return t.map((t,i)=>(l9(t.url&&(0,v.isString)(t.url)),l9("startTime"in t&&(0,v.isNumber)(t.startTime)),{...t,url:(0,v.isString)(t.url)?(0,_._)(this,fZ,f6).call(this,t.url,e):t.url}))}function f4(t){var e;l9((0,v.isString)(t.url)),l9((0,v.isArray)(t.tiles)&&(null==(e=t.tiles)?void 0:e.length));let i=new URL(t.url),s=[],n="tile_width"in t?t.tile_width:t.tileWidth,a="tile_height"in t?t.tile_height:t.tileHeight;for(let e of t.tiles)s.push({url:i,startTime:"start"in e?e.start:e.startTime,width:n,height:a,coords:{x:e.x,y:e.y}});return s}function f9(t){for(let e=0;e<t.length;e++){let i=t[e];l9("startTime"in i&&(0,v.isNumber)(i.startTime)),l9("text"in i&&(0,v.isString)(i.text))}let e=[],i=(0,_._)(this,fJ,f8).call(this);for(let s of t){let[t,n]=s.text.split("#"),a=(0,_._)(this,f0,f7).call(this,n);e.push({url:(0,_._)(this,fZ,f6).call(this,t,i),startTime:s.startTime,endTime:s.endTime,width:null==a?void 0:a.w,height:null==a?void 0:a.h,coords:a&&(0,v.isNumber)(a.x)&&(0,v.isNumber)(a.y)?{x:a.x,y:a.y}:void 0})}return e}function f8(){let t=(0,v.peek)((0,o._)(this,fB));return(0,v.isString)(t)&&/^https?:/.test(t)?t:location.href}function f6(t,e){return/^https?:/.test(t)?new URL(t):new URL(t,e)}function f7(t){if(!t)return{};let[e,i]=t.split("="),s=null==i?void 0:i.split(","),n={};if(!e||!s)return null;for(let t=0;t<e.length;t++){let i=+s[t];isNaN(i)||(n[e[t]]=i)}return n}function vt(t,e){}var ve=new WeakMap,vi=new WeakMap,vs=new WeakSet,vn=new WeakSet,va=new WeakSet,vl=new WeakSet,vh=new WeakSet,vr=new WeakSet,vo=new WeakSet,vu=new WeakSet,vc=new WeakSet,vd=new WeakSet,v_=new WeakSet,vp=new WeakSet;class vf extends v.Component{onSetup(){this.media=tK(),(0,c._)(this,ve,f2.create(this.$props.src,this.$state.crossOrigin)),(0,_._)(this,vn,vw).call(this),this.setAttributes({"data-loading":(0,_._)(this,vr,vb).bind(this),"data-error":(0,_._)(this,vo,vy).bind(this),"data-hidden":this.$state.hidden,"aria-hidden":hK(this.$state.hidden)})}onConnect(t){(0,v.effect)((0,_._)(this,vs,vv).bind(this)),(0,v.effect)((0,_._)(this,vu,vS).bind(this)),(0,v.effect)((0,_._)(this,vn,vw).bind(this)),(0,v.effect)((0,_._)(this,va,vg).bind(this)),(0,v.effect)((0,_._)(this,vc,vW).bind(this)),(0,v.effect)((0,_._)(this,vd,v$).bind(this))}getTime(){return this.$props.time()}constructor(...t){super(...t),(0,p._)(this,vs),(0,p._)(this,vn),(0,p._)(this,va),(0,p._)(this,vl),(0,p._)(this,vh),(0,p._)(this,vr),(0,p._)(this,vo),(0,p._)(this,vu),(0,p._)(this,vc),(0,p._)(this,vd),(0,p._)(this,v_),(0,p._)(this,vp),(0,u._)(this,ve,{writable:!0,value:void 0}),(0,u._)(this,vi,{writable:!0,value:void 0}),(0,c._)(this,vi,[])}}function vv(){let t=this.$state.img();t&&new v.EventsController(t).add("load",(0,_._)(this,vl,vm).bind(this)).add("error",(0,_._)(this,vh,vk).bind(this))}function vw(){let{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:i}=this.media.$state,s=null!==t()?t():i();e.set(!0===s?"anonymous":s)}function vg(){let{src:t,loading:e,error:i}=this.$state;return t()&&(e.set(!0),i.set(null)),()=>{(0,_._)(this,vp,vx).call(this),e.set(!1),i.set(null)}}function vm(){let{loading:t,error:e}=this.$state;(0,_._)(this,vd,v$).call(this),t.set(!1),e.set(null)}function vk(t){let{loading:e,error:i}=this.$state;e.set(!1),i.set(t)}function vb(){let{loading:t,hidden:e}=this.$state;return!e()&&t()}function vy(){let{error:t}=this.$state;return!(0,v.isNull)(t())}function vS(){let{hidden:t}=this.$state,{duration:e}=this.media.$state,i=(0,o._)(this,ve).$images();t.set((0,_._)(this,vo,vy).call(this)||!Number.isFinite(e())||0===i.length)}function vW(){let t=(0,o._)(this,ve).$images();if(!t.length)return;let e=this.getTime(),{src:i,activeThumbnail:s}=this.$state,n=-1,a=null;for(let i=t.length-1;i>=0;i--){let s=t[i];if(e>=s.startTime&&(!s.endTime||e<s.endTime)){n=i;break}}t[n]&&(a=t[n]),s.set(a),i.set((null==a?void 0:a.url.href)||"")}function v$(){var t,e;if(!this.scope||this.$state.hidden())return;let i=this.el,s=this.$state.img(),n=this.$state.activeThumbnail();if(!s||!n||!i)return;let a=null!=(t=n.width)?t:s.naturalWidth,l=null!=(e=null==n?void 0:n.height)?e:s.naturalHeight,{maxWidth:h,maxHeight:r,minWidth:o,minHeight:u,width:c,height:d}=getComputedStyle(this.el);"100%"===o&&(o=parseFloat(c)+""),"100%"===u&&(u=parseFloat(d)+"");let p=Math.max(parseInt(o)/a,parseInt(u)/l),f=Math.min(Math.max(parseInt(o),parseInt(h))/a,Math.max(parseInt(u),parseInt(r))/l),v=!isNaN(f)&&f<1?f:p>1?p:1;(0,_._)(this,v_,vM).call(this,i,"--thumbnail-width","".concat(a*v,"px")),(0,_._)(this,v_,vM).call(this,i,"--thumbnail-height","".concat(l*v,"px")),(0,_._)(this,v_,vM).call(this,i,"--thumbnail-aspect-ratio",String(eh(a/l,5))),(0,_._)(this,v_,vM).call(this,s,"width","".concat(s.naturalWidth*v,"px")),(0,_._)(this,v_,vM).call(this,s,"height","".concat(s.naturalHeight*v,"px")),(0,_._)(this,v_,vM).call(this,s,"transform",n.coords?"translate(-".concat(n.coords.x*v,"px, -").concat(n.coords.y*v,"px)"):""),(0,_._)(this,v_,vM).call(this,s,"max-width","none")}function vM(t,e,i){t.style.setProperty(e,i),(0,o._)(this,vi).push(()=>t.style.removeProperty(e))}function vx(){for(let t of(0,o._)(this,vi))t();(0,c._)(this,vi,[])}vf.props={src:null,time:0,crossOrigin:null},vf.state=new v.State({src:"",img:null,thumbnails:[],activeThumbnail:null,crossOrigin:null,loading:!1,error:null,hidden:!1});var vT=new WeakMap;class vP extends vf{onAttach(t){(0,c._)(this,vT,(0,v.useState)(fF.state))}getTime(){let{duration:t,clipStartTime:e}=this.media.$state;return e()+(0,o._)(this,vT).pointerRate()*t()}constructor(...t){super(...t),(0,u._)(this,vT,{writable:!0,value:void 0})}}var vA=new WeakMap,vC=new WeakMap,vE=new WeakSet,vq=new WeakSet,vD=new WeakSet,vO=new WeakSet,vL=new WeakSet,vI=new WeakSet,vF=new WeakSet,vV=new WeakSet,vR=new WeakSet,vN=new WeakSet;class vG extends v.Component{get video(){return this.$state.video()}onSetup(){(0,c._)(this,vA,tK()),(0,c._)(this,vC,(0,v.useState)(fF.state)),(0,_._)(this,vD,vU).call(this),this.setAttributes({"data-loading":(0,_._)(this,vO,vB).bind(this),"data-hidden":this.$state.hidden,"data-error":(0,_._)(this,vL,vH).bind(this),"aria-hidden":hK(this.$state.hidden)})}onAttach(t){(0,v.effect)((0,_._)(this,vE,vj).bind(this)),(0,v.effect)((0,_._)(this,vq,vK).bind(this)),(0,v.effect)((0,_._)(this,vD,vU).bind(this)),(0,v.effect)((0,_._)(this,vI,vQ).bind(this)),(0,v.effect)((0,_._)(this,vF,vz).bind(this)),(0,v.effect)((0,_._)(this,vN,vJ).bind(this))}constructor(...t){super(...t),(0,p._)(this,vE),(0,p._)(this,vq),(0,p._)(this,vD),(0,p._)(this,vO),(0,p._)(this,vL),(0,p._)(this,vI),(0,p._)(this,vF),(0,p._)(this,vV),(0,p._)(this,vR),(0,p._)(this,vN),(0,u._)(this,vA,{writable:!0,value:void 0}),(0,u._)(this,vC,{writable:!0,value:void 0})}}function vj(){let t=this.$state.video();t&&(t.readyState>=2&&(0,_._)(this,vV,vX).call(this),new v.EventsController(t).add("canplay",(0,_._)(this,vV,vX).bind(this)).add("error",(0,_._)(this,vR,vY).bind(this)))}function vK(){let{src:t}=this.$state,{canLoad:e}=(0,o._)(this,vA).$state;t.set(e()?this.$props.src():null)}function vU(){let{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:i}=(0,o._)(this,vA).$state,s=null!==t()?t():i();e.set(!0===s?"anonymous":s)}function vB(){let{canPlay:t,hidden:e}=this.$state;return!t()&&!e()}function vH(){let{error:t}=this.$state;return!(0,v.isNull)(t)}function vQ(){let{src:t,hidden:e}=this.$state,{canLoad:i,duration:s}=(0,o._)(this,vA).$state;e.set(i()&&(!t()||(0,_._)(this,vL,vH).call(this)||!Number.isFinite(s())))}function vz(){let{src:t,canPlay:e,error:i}=this.$state;t(),e.set(!1),i.set(null)}function vX(t){let{canPlay:e,error:i}=this.$state;e.set(!0),i.set(null),this.dispatch("can-play",{trigger:t})}function vY(t){let{canPlay:e,error:i}=this.$state;e.set(!1),i.set(t),this.dispatch("error",{trigger:t})}function vJ(){let{video:t,canPlay:e}=this.$state,{duration:i}=(0,o._)(this,vA).$state,{pointerRate:s}=(0,o._)(this,vC),n=t();e()&&n&&Number.isFinite(i())&&Number.isFinite(s())&&(n.currentTime=s()*i())}vG.props={src:null,crossOrigin:null},vG.state=new v.State({video:null,src:null,crossOrigin:null,canPlay:!1,error:null,hidden:!1});let vZ=vG.prototype;(0,v.prop)(vZ,"video");var v0=new WeakMap,v1=new WeakMap,v2=new WeakMap;class v3 extends v.Component{onSetup(){(0,c._)(this,v2,(0,v.useState)(fF.state)),(0,c._)(this,v0,(0,v.useContext)(fc)),(0,c._)(this,v1,(0,v.computed)(this.getValueText.bind(this)))}getValueText(){var t,e,i,s,n,a;let{type:l,format:h,decimalPlaces:r,padHours:u,padMinutes:c,showHours:d,showMs:_}=this.$props,{value:p,pointerValue:f,min:v,max:w}=(0,o._)(this,v2),g=null!=(t=null==h?void 0:h())?t:(0,o._)(this,v0).default,m="current"===l()?p():f();if("percent"===g){let t=m/(w()-v())*100;return(null!=(e=(0,o._)(this,v0).percent)?e:eh)(t,r())+"%"}return"time"===g?(null!=(i=(0,o._)(this,v0).time)?i:hy)(m,{padHrs:u(),padMins:c(),showHrs:d(),showMs:_()}):(null!=(a=null==(s=(n=(0,o._)(this,v0)).value)?void 0:s.call(n,m))?a:m.toFixed(2))+""}constructor(...t){super(...t),(0,u._)(this,v0,{writable:!0,value:void 0}),(0,u._)(this,v1,{writable:!0,value:void 0}),(0,u._)(this,v2,{writable:!0,value:void 0})}}v3.props={type:"pointer",format:null,showHours:!1,showMs:!1,padHours:null,padMinutes:null,decimalPlaces:2};let v5=v3.prototype;(0,v.method)(v5,"getValueText");var v4=new WeakMap,v9=new WeakMap;class v8 extends v.Component{onSetup(){(0,c._)(this,v4,(0,v.useContext)(pk));let{active:t}=(0,v.useState)(fF.state);this.setAttributes({"data-visible":t})}onAttach(t){Object.assign(t.style,{position:"absolute",top:0,left:0,width:"max-content"})}onConnect(t){let{preview:e}=(0,o._)(this,v4);e.set(t),(0,v.onDispose)(()=>e.set(null)),(0,v.effect)((0,o._)(this,v9).bind(this));let i=new ResizeObserver((0,o._)(this,v9).bind(this));i.observe(t),(0,v.onDispose)(()=>i.disconnect())}constructor(...t){super(...t),(0,u._)(this,v4,{writable:!0,value:void 0}),(0,u._)(this,v9,{writable:!0,value:void 0}),(0,c._)(this,v9,(0,v.animationFrameThrottle)(()=>{let{disabled:t,orientation:e}=(0,o._)(this,v4);if(t())return;let i=this.el,{offset:s,noClamp:n}=this.$props;i&&function(t,e){let{clamp:i,offset:s,orientation:n}=e,a=getComputedStyle(t),l=parseFloat(a.width),h=parseFloat(a.height),r={top:null,right:null,bottom:null,left:null};if(r["horizontal"===n?"bottom":"left"]="calc(100% + var(--media-slider-preview-offset, ".concat(s,"px))"),"horizontal"===n){let t=l/2;if(i){let e="max(0px, calc(var(--slider-pointer) - ".concat(t,"px))");r.left="min(".concat(e,", ").concat("calc(100% - ".concat(l,"px)"),")")}else r.left="calc(var(--slider-pointer) - ".concat(t,"px)")}else{let t=h/2;if(i){let e="max(".concat(t,"px, calc(var(--slider-pointer) - ").concat(t,"px))");r.bottom="min(".concat(e,", ").concat("calc(100% - ".concat(h,"px)"),")")}else r.bottom="calc(var(--slider-pointer) - ".concat(t,"px)")}Object.assign(t.style,r)}(i,{clamp:!n(),offset:s(),orientation:e()})}))}}v8.props={offset:0,noClamp:!1};var v6=new WeakMap,v7=new WeakSet,wt=new WeakSet,we=new WeakSet,wi=new WeakSet,ws=new WeakSet,wn=new WeakMap,wa=new WeakSet,wl=new WeakSet,wh=new WeakSet;class wr extends v.Component{onSetup(){(0,c._)(this,v6,tK());let{audioGain:t}=(0,o._)(this,v6).$state;(0,v.provideContext)(fc,{default:"percent",value(e){var i;return(e*(null!=(i=t())?i:1)).toFixed(2)},percent(e){var i;return Math.round(e*(null!=(i=t())?i:1))}}),new f$({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:(0,_._)(this,wi,wd).bind(this),aria:{valueMax:(0,_._)(this,we,wc).bind(this),valueNow:(0,_._)(this,v7,wo).bind(this),valueText:(0,_._)(this,wt,wu).bind(this)},onDragValueChange:(0,_._)(this,wh,wv).bind(this),onValueChange:(0,_._)(this,wl,wf).bind(this)}).attach(this),(0,v.effect)((0,_._)(this,ws,w_).bind(this))}onAttach(t){t.setAttribute("data-media-volume-slider",""),ed(t,"aria-label","Volume");let{canSetVolume:e}=(0,o._)(this,v6).$state;this.setAttributes({"data-supported":e,"aria-hidden":hK(()=>!e())})}constructor(...t){super(...t),(0,p._)(this,v7),(0,p._)(this,wt),(0,p._)(this,we),(0,p._)(this,wi),(0,p._)(this,ws),(0,p._)(this,wa),(0,p._)(this,wl),(0,p._)(this,wh),(0,u._)(this,v6,{writable:!0,value:void 0}),(0,u._)(this,wn,{writable:!0,value:void 0}),(0,c._)(this,wn,(0,v.functionThrottle)((0,_._)(this,wa,wp).bind(this),25))}}function wo(){var t;let{value:e}=this.$state,{audioGain:i}=(0,o._)(this,v6).$state;return Math.round(e()*(null!=(t=i())?t:1))}function wu(){var t;let{value:e,max:i}=this.$state,{audioGain:s}=(0,o._)(this,v6).$state;return eh(e()/i()*(null!=(t=s())?t:1)*100,2)+"%"}function wc(){var t;let{audioGain:e}=(0,o._)(this,v6).$state;return this.$state.max()*(null!=(t=e())?t:1)}function wd(){let{disabled:t}=this.$props,{canSetVolume:e}=(0,o._)(this,v6).$state;return t()||!e()}function w_(){let{muted:t,volume:e}=(0,o._)(this,v6).$state,i=t()?0:100*e();this.$state.value.set(i),this.dispatch("value-change",{detail:i})}function wp(t){if(!t.trigger)return;let e=eh(t.detail/100,3);(0,o._)(this,v6).remote.changeVolume(e,t)}function wf(t){(0,o._)(this,wn).call(this,t)}function wv(t){(0,o._)(this,wn).call(this,t)}wr.props={...f$.props,keyStep:5,shiftKeyMultiplier:2},wr.state=p_;var ww=new WeakMap,wg=new WeakSet,wm=new WeakSet,wk=new WeakSet,wb=new WeakSet,wy=new WeakSet,wS=new WeakSet,wW=new WeakSet,w$=new WeakSet;class wM extends v.Component{onSetup(){(0,c._)(this,ww,tK()),(0,v.provideContext)(fc,{default:"percent",percent:(t,e)=>eh(this.$state.value(),e)+"%"}),new f$({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:(0,_._)(this,wy,wC).bind(this),aria:{valueNow:(0,_._)(this,wg,wx).bind(this),valueText:(0,_._)(this,wm,wT).bind(this)},onDragValueChange:(0,_._)(this,w$,wD).bind(this),onValueChange:(0,_._)(this,wW,wq).bind(this)}).attach(this),(0,v.effect)((0,_._)(this,wk,wP).bind(this)),(0,v.effect)((0,_._)(this,wb,wA).bind(this))}onAttach(t){t.setAttribute("data-media-audio-gain-slider",""),ed(t,"aria-label","Audio Boost");let{canSetAudioGain:e}=(0,o._)(this,ww).$state;this.setAttributes({"data-supported":e,"aria-hidden":hK(()=>!e())})}constructor(...t){super(...t),(0,p._)(this,wg),(0,p._)(this,wm),(0,p._)(this,wk),(0,p._)(this,wb),(0,p._)(this,wy),(0,p._)(this,wS),(0,p._)(this,wW),(0,p._)(this,w$),(0,u._)(this,ww,{writable:!0,value:void 0})}}function wx(){let{value:t}=this.$state;return Math.round(t())}function wT(){let{value:t}=this.$state;return t()+"%"}function wP(){let{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}function wA(){var t;let{audioGain:e}=(0,o._)(this,ww).$state,i=((null!=(t=e())?t:1)-1)*100;this.$state.value.set(i),this.dispatch("value-change",{detail:i})}function wC(){let{disabled:t}=this.$props,{canSetAudioGain:e}=(0,o._)(this,ww).$state;return t()||!e()}function wE(t){if(!t.trigger)return;let e=eh(1+t.detail/100,2);(0,o._)(this,ww).remote.changeAudioGain(e,t)}function wq(t){(0,_._)(this,wS,wE).call(this,t)}function wD(t){(0,_._)(this,wS,wE).call(this,t)}wM.props={...f$.props,step:25,keyStep:25,shiftKeyMultiplier:2,min:0,max:300},wM.state=p_;var wO=new WeakMap,wL=new WeakSet,wI=new WeakSet,wF=new WeakSet,wV=new WeakSet,wR=new WeakSet,wN=new WeakSet,wG=new WeakMap,wj=new WeakSet,wK=new WeakSet,wU=new WeakSet;class wB extends v.Component{onSetup(){(0,c._)(this,wO,tK()),new f$({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:(0,_._)(this,wR,wY),isDisabled:(0,_._)(this,wN,wJ).bind(this),aria:{valueNow:(0,_._)(this,wL,wH).bind(this),valueText:(0,_._)(this,wI,wQ).bind(this)},onDragValueChange:(0,_._)(this,wU,w1).bind(this),onValueChange:(0,_._)(this,wK,w0).bind(this)}).attach(this),(0,v.effect)((0,_._)(this,wF,wz).bind(this)),(0,v.effect)((0,_._)(this,wV,wX).bind(this))}onAttach(t){t.setAttribute("data-media-speed-slider",""),ed(t,"aria-label","Speed");let{canSetPlaybackRate:e}=(0,o._)(this,wO).$state;this.setAttributes({"data-supported":e,"aria-hidden":hK(()=>!e())})}constructor(...t){super(...t),(0,p._)(this,wL),(0,p._)(this,wI),(0,p._)(this,wF),(0,p._)(this,wV),(0,p._)(this,wR),(0,p._)(this,wN),(0,p._)(this,wj),(0,p._)(this,wK),(0,p._)(this,wU),(0,u._)(this,wO,{writable:!0,value:void 0}),(0,u._)(this,wG,{writable:!0,value:void 0}),(0,c._)(this,wG,(0,v.functionThrottle)((0,_._)(this,wj,wZ).bind(this),25))}}function wH(){let{value:t}=this.$state;return t()}function wQ(){let{value:t}=this.$state;return t()+"x"}function wz(){let{min:t,max:e}=this.$props;this.$state.min.set(t()),this.$state.max.set(e())}function wX(){let{playbackRate:t}=(0,o._)(this,wO).$state,e=t();this.$state.value.set(e),this.dispatch("value-change",{detail:e})}function wY(t){return eh(t,2)}function wJ(){let{disabled:t}=this.$props,{canSetPlaybackRate:e}=(0,o._)(this,wO).$state;return t()||!e()}function wZ(t){if(!t.trigger)return;let e=t.detail;(0,o._)(this,wO).remote.changePlaybackRate(e,t)}function w0(t){(0,o._)(this,wG).call(this,t)}function w1(t){(0,o._)(this,wG).call(this,t)}wB.props={...f$.props,step:.25,keyStep:.25,shiftKeyMultiplier:2,min:0,max:2},wB.state=p_;var w2=new WeakMap,w3=new WeakMap,w5=new WeakSet,w4=new WeakSet,w9=new WeakSet,w8=new WeakSet,w6=new WeakSet,w7=new WeakMap,gt=new WeakSet,ge=new WeakSet,gi=new WeakSet;class gs extends v.Component{onSetup(){(0,c._)(this,w2,tK()),new f$({getStep:this.$props.step,getKeyStep:this.$props.keyStep,roundValue:Math.round,isDisabled:(0,_._)(this,w6,gr).bind(this),aria:{valueNow:(0,_._)(this,w5,gn).bind(this),valueText:(0,_._)(this,w4,ga).bind(this)},onDragValueChange:(0,_._)(this,gi,gc).bind(this),onValueChange:(0,_._)(this,ge,gu).bind(this)}).attach(this),(0,v.effect)((0,_._)(this,w9,gl).bind(this)),(0,v.effect)((0,_._)(this,w8,gh).bind(this))}onAttach(t){t.setAttribute("data-media-quality-slider",""),ed(t,"aria-label","Video Quality");let{qualities:e,canSetQuality:i}=(0,o._)(this,w2).$state,s=(0,v.computed)(()=>i()&&e().length>0);this.setAttributes({"data-supported":s,"aria-hidden":hK(()=>!s())})}constructor(...t){super(...t),(0,p._)(this,w5),(0,p._)(this,w4),(0,p._)(this,w9),(0,p._)(this,w8),(0,p._)(this,w6),(0,p._)(this,gt),(0,p._)(this,ge),(0,p._)(this,gi),(0,u._)(this,w2,{writable:!0,value:void 0}),(0,u._)(this,w3,{writable:!0,value:void 0}),(0,u._)(this,w7,{writable:!0,value:void 0}),(0,c._)(this,w3,(0,v.computed)(()=>{let{qualities:t}=(0,o._)(this,w2).$state;return iv(t())})),(0,c._)(this,w7,(0,v.functionThrottle)((0,_._)(this,gt,go).bind(this),25))}}function gn(){let{value:t}=this.$state;return t()}function ga(){let{quality:t}=(0,o._)(this,w2).$state;if(!t())return"";let{height:e,bitrate:i}=t(),s=i&&i>0?"".concat((i/1e6).toFixed(2)," Mbps"):null;return e?"".concat(e,"p").concat(s?" (".concat(s,")"):""):"Auto"}function gl(){let t=(0,o._)(this,w3).call(this);this.$state.max.set(Math.max(0,t.length-1))}function gh(){let{quality:t}=(0,o._)(this,w2).$state,e=Math.max(0,(0,o._)(this,w3).call(this).indexOf(t()));this.$state.value.set(e),this.dispatch("value-change",{detail:e})}function gr(){let{disabled:t}=this.$props,{canSetQuality:e,qualities:i}=(0,o._)(this,w2).$state;return t()||i().length<=1||!e()}function go(t){if(!t.trigger)return;let{qualities:e}=(0,o._)(this,w2),i=(0,v.peek)((0,o._)(this,w3))[t.detail];(0,o._)(this,w2).remote.changeQuality(e.indexOf(i),t)}function gu(t){(0,o._)(this,w7).call(this,t)}function gc(t){(0,o._)(this,w7).call(this,t)}gs.props={...f$.props,step:1,keyStep:1,shiftKeyMultiplier:1},gs.state=p_;var gd=new WeakMap,g_=new WeakMap,gp=new WeakMap,gf=new WeakSet,gv=new WeakSet,gw=new WeakSet,gg=new WeakSet,gm=new WeakSet,gk=new WeakSet,gb=new WeakSet,gy=new WeakMap,gS=new WeakSet,gW=new WeakSet,g$=new WeakSet,gM=new WeakSet,gx=new WeakSet,gT=new WeakSet,gP=new WeakSet,gA=new WeakSet,gC=new WeakSet,gE=new WeakSet,gq=new WeakSet,gD=new WeakSet,gO=new WeakSet,gL=new WeakSet,gI=new WeakSet;class gF extends v.Component{onSetup(){(0,c._)(this,gd,tK()),(0,v.provideContext)(fc,{default:"time",value:(0,_._)(this,gL,g4).bind(this),time:(0,_._)(this,gI,g9).bind(this)}),this.setAttributes({"data-chapters":(0,_._)(this,gv,gR).bind(this)}),this.setStyles({"--slider-progress":(0,_._)(this,gf,gV).bind(this)}),(0,v.effect)((0,_._)(this,gg,gG).bind(this)),(0,v.effect)((0,_._)(this,gw,gN).bind(this))}onAttach(t){t.setAttribute("data-media-time-slider",""),ed(t,"aria-label","Seek")}onConnect(t){(0,v.effect)((0,_._)(this,gm,gj).bind(this)),to((0,o._)(this,gd).textTracks,"chapters",(0,o._)(this,gp).set)}constructor(){super(),(0,p._)(this,gf),(0,p._)(this,gv),(0,p._)(this,gw),(0,p._)(this,gg),(0,p._)(this,gm),(0,p._)(this,gk),(0,p._)(this,gb),(0,p._)(this,gS),(0,p._)(this,gW),(0,p._)(this,g$),(0,p._)(this,gM),(0,p._)(this,gx),(0,p._)(this,gT),(0,p._)(this,gP),(0,p._)(this,gA),(0,p._)(this,gC),(0,p._)(this,gE),(0,p._)(this,gq),(0,p._)(this,gD),(0,p._)(this,gO),(0,p._)(this,gL),(0,p._)(this,gI),(0,u._)(this,gd,{writable:!0,value:void 0}),(0,u._)(this,g_,{writable:!0,value:void 0}),(0,u._)(this,gp,{writable:!0,value:void 0}),(0,u._)(this,gy,{writable:!0,value:void 0}),(0,c._)(this,gp,(0,v.signal)(null)),(0,c._)(this,gy,!1);let{noSwipeGesture:t}=this.$props;new f$({swipeGesture:()=>!t(),getValue:(0,_._)(this,gx,gX).bind(this),getStep:(0,_._)(this,gT,gY).bind(this),getKeyStep:(0,_._)(this,gP,gJ).bind(this),roundValue:(0,_._)(this,gA,gZ),isDisabled:(0,_._)(this,gC,g0).bind(this),aria:{valueNow:(0,_._)(this,gE,g1).bind(this),valueText:(0,_._)(this,gq,g2).bind(this)},onDragStart:(0,_._)(this,gS,gB).bind(this),onDragValueChange:(0,_._)(this,gW,gH).bind(this),onDragEnd:(0,_._)(this,g$,gQ).bind(this),onValueChange:(0,_._)(this,gM,gz).bind(this)})}}function gV(){let{bufferedEnd:t,duration:e}=(0,o._)(this,gd).$state;return eh(100*Math.min(t()/Math.max(e(),1),1),3)+"%"}function gR(){var t;let{duration:e}=(0,o._)(this,gd).$state;return(null==(t=(0,o._)(this,gp).call(this))?void 0:t.cues.length)&&Number.isFinite(e())&&e()>0}function gN(){(0,c._)(this,g_,(0,v.functionThrottle)((0,_._)(this,gk,gK).bind(this),this.$props.seekingRequestThrottle()))}function gG(){if(this.$state.hidden())return;let{value:t,dragging:e}=this.$state,i=(0,_._)(this,gx,gX).call(this);(0,v.peek)(e)||(t.set(i),this.dispatch("value-change",{detail:i}))}function gj(){let t=(0,o._)(this,gd).player.el,{preview:e}=(0,v.useContext)(pk);t&&e()&&(0,v.setAttribute)(t,"data-preview",this.$state.active())}function gK(t,e){(0,o._)(this,gd).remote.seeking(t,e)}function gU(t,e,i){(0,o._)(this,g_).cancel();let{live:s}=(0,o._)(this,gd).$state;if(s()&&e>=99)return void(0,o._)(this,gd).remote.seekToLiveEdge(i);(0,o._)(this,gd).remote.seek(t,i)}function gB(t){let{pauseWhileDragging:e}=this.$props;if(e()){let{paused:e}=(0,o._)(this,gd).$state;(0,c._)(this,gy,!e()),(0,o._)(this,gd).remote.pause(t)}}function gH(t){(0,o._)(this,g_).call(this,(0,_._)(this,gD,g3).call(this,t.detail),t)}function gQ(t){let{seeking:e}=(0,o._)(this,gd).$state;(0,v.peek)(e)||(0,_._)(this,gk,gK).call(this,(0,_._)(this,gD,g3).call(this,t.detail),t);let i=t.detail;(0,_._)(this,gb,gU).call(this,(0,_._)(this,gD,g3).call(this,i),i,t);let{pauseWhileDragging:s}=this.$props;s()&&(0,o._)(this,gy)&&((0,o._)(this,gd).remote.play(t),(0,c._)(this,gy,!1))}function gz(t){let{dragging:e}=this.$state;!e()&&t.trigger&&(0,_._)(this,g$,gQ).call(this,t)}function gX(){let{currentTime:t}=(0,o._)(this,gd).$state;return(0,_._)(this,gO,g5).call(this,t())}function gY(){let t=this.$props.step()/(0,o._)(this,gd).$state.duration()*100;return Number.isFinite(t)?t:1}function gJ(){let t=this.$props.keyStep()/(0,o._)(this,gd).$state.duration()*100;return Number.isFinite(t)?t:1}function gZ(t){return eh(t,3)}function g0(){let{disabled:t}=this.$props,{canSeek:e}=(0,o._)(this,gd).$state;return t()||!e()}function g1(){let{value:t}=this.$state;return Math.round(t())}function g2(){let t=(0,_._)(this,gD,g3).call(this,this.$state.value()),{duration:e}=(0,o._)(this,gd).$state;return Number.isFinite(t)?"".concat(hS(t)," out of ").concat(hS(e())):"live"}function g3(t){let{duration:e}=(0,o._)(this,gd).$state;return eh(t/100*e(),5)}function g5(t){let{liveEdge:e,duration:i}=(0,o._)(this,gd).$state,s=Math.max(0,Math.min(1,e()?1:Math.min(t,i())/i()));return Number.isNaN(s)?0:Number.isFinite(s)?100*s:100}function g4(t){let e=(0,_._)(this,gD,g3).call(this,t),{live:i,duration:s}=(0,o._)(this,gd).$state;return Number.isFinite(e)?(i()?e-s():e).toFixed(0):"LIVE"}function g9(t,e){let i=(0,_._)(this,gD,g3).call(this,t),{live:s,duration:n}=(0,o._)(this,gd).$state,a=s()?i-n():i;return Number.isFinite(i)?"".concat(a<0?"-":"").concat(hy(Math.abs(a),e)):"LIVE"}gF.props={...f$.props,step:.1,keyStep:5,shiftKeyMultiplier:2,pauseWhileDragging:!1,noSwipeGesture:!1,seekingRequestThrottle:100},gF.state=p_;var g8=new WeakMap,g6=new WeakMap,g7=new WeakMap,mt=new WeakMap,me=new WeakMap,mi=new WeakMap,ms=new WeakMap,mn=new WeakMap,ma=new WeakMap,ml=new WeakMap,mh=new WeakSet,mr=new WeakSet,mo=new WeakSet,mu=new WeakSet,mc=new WeakSet,md=new WeakSet,m_=new WeakSet,mp=new WeakSet,mf=new WeakSet,mv=new WeakSet,mw=new WeakSet,mg=new WeakMap,mm=new WeakMap,mk=new WeakSet,mb=new WeakSet,my=new WeakSet,mS=new WeakSet,mW=new WeakSet,m$=new WeakSet,mM=new WeakSet,mx=new WeakMap,mT=new WeakSet,mP=new WeakSet,mA=new WeakSet;class mC extends v.Component{get cues(){return(0,o._)(this,ms).call(this)}get activeCue(){return(0,o._)(this,ms).call(this)[(0,o._)(this,mn).call(this)]||null}get activePointerCue(){return(0,o._)(this,ms).call(this)[(0,o._)(this,ma).call(this)]||null}onSetup(){(0,c._)(this,g8,tK()),(0,c._)(this,g6,(0,v.useState)(gF.state))}onAttach(t){to((0,o._)(this,g8).textTracks,"chapters",(0,_._)(this,mh,mE).bind(this)),(0,v.effect)((0,_._)(this,mW,mH).bind(this))}onConnect(){(0,v.onDispose)(()=>(0,_._)(this,mr,mq).bind(this))}onDestroy(){(0,_._)(this,mh,mE).call(this,null)}setRefs(t){var e;if((0,c._)(this,me,t),null==(e=(0,o._)(this,g7))||e.dispose(),1===(0,o._)(this,me).length){let t=(0,o._)(this,me)[0];t.style.width="100%",t.style.setProperty("--chapter-fill","var(--slider-fill)"),t.style.setProperty("--chapter-progress","var(--slider-progress)")}else(0,o._)(this,me).length>0&&(0,v.scoped)(()=>(0,_._)(this,mo,mD).call(this),(0,c._)(this,g7,(0,v.createScope)()))}constructor(...t){super(...t),(0,p._)(this,mh),(0,p._)(this,mr),(0,p._)(this,mo),(0,p._)(this,mu),(0,p._)(this,mc),(0,p._)(this,md),(0,p._)(this,m_),(0,p._)(this,mp),(0,p._)(this,mf),(0,p._)(this,mv),(0,p._)(this,mw),(0,p._)(this,mk),(0,p._)(this,mb),(0,p._)(this,my),(0,p._)(this,mS),(0,p._)(this,mW),(0,p._)(this,m$),(0,p._)(this,mM),(0,p._)(this,mT),(0,p._)(this,mP),(0,p._)(this,mA),(0,u._)(this,g8,{writable:!0,value:void 0}),(0,u._)(this,g6,{writable:!0,value:void 0}),(0,u._)(this,g7,{writable:!0,value:void 0}),(0,u._)(this,mt,{writable:!0,value:void 0}),(0,u._)(this,me,{writable:!0,value:void 0}),(0,u._)(this,mi,{writable:!0,value:void 0}),(0,u._)(this,ms,{writable:!0,value:void 0}),(0,u._)(this,mn,{writable:!0,value:void 0}),(0,u._)(this,ma,{writable:!0,value:void 0}),(0,u._)(this,ml,{writable:!0,value:void 0}),(0,u._)(this,mg,{writable:!0,value:void 0}),(0,u._)(this,mm,{writable:!0,value:void 0}),(0,u._)(this,mx,{writable:!0,value:void 0}),(0,c._)(this,mt,null),(0,c._)(this,me,[]),(0,c._)(this,mi,(0,v.signal)(null)),(0,c._)(this,ms,(0,v.signal)([])),(0,c._)(this,mn,(0,v.signal)(-1)),(0,c._)(this,ma,(0,v.signal)(-1)),(0,c._)(this,ml,0),(0,c._)(this,mg,(0,v.animationFrameThrottle)(t=>{let e,i=(0,o._)(this,ms).call(this),{seekableStart:s}=(0,o._)(this,g8).$state,n=s(),a=(0,_._)(this,mb,mK).call(this,i);for(let s=(0,o._)(this,ml);s<(0,o._)(this,me).length;s++){var l;if(e=(0,_._)(this,my,mU).call(this,i[s],t,n,a),null==(l=(0,o._)(this,me)[s])||l.style.setProperty("--chapter-progress",e+"%"),e<100){(0,c._)(this,ml,s);break}}})),(0,c._)(this,mm,(0,v.computed)((0,_._)(this,mk,mj).bind(this))),(0,c._)(this,mx,(0,v.functionDebounce)(()=>{let t=(0,v.peek)((0,o._)(this,mi));this.scope&&t&&t.cues.length&&((0,o._)(this,ms).set((0,_._)(this,mS,mB).call(this,t.cues)),(0,o._)(this,mn).set(0),(0,c._)(this,ml,0))},150,!0))}}function mE(t){(0,v.peek)((0,o._)(this,mi))!==t&&((0,_._)(this,mr,mq).call(this),(0,o._)(this,mi).set(t))}function mq(){var t;(0,c._)(this,me,[]),(0,o._)(this,ms).set([]),(0,o._)(this,mn).set(-1),(0,o._)(this,ma).set(-1),(0,c._)(this,ml,0),null==(t=(0,o._)(this,g7))||t.dispose()}function mD(){(0,o._)(this,me).length&&(0,v.effect)((0,_._)(this,mu,mO).bind(this))}function mO(){let{hidden:t}=(0,o._)(this,g6);t()||((0,v.effect)((0,_._)(this,mc,mL).bind(this)),(0,v.effect)((0,_._)(this,md,mI).bind(this)),(0,v.effect)((0,_._)(this,m_,mF).bind(this)),(0,v.effect)((0,_._)(this,mw,mG).bind(this)))}function mL(){let t=(0,o._)(this,ms).call(this);if(!t.length)return;let e,{seekableStart:i,seekableEnd:s}=(0,o._)(this,g8).$state,n=i(),a=(s()||t[t.length-1].endTime)-n,l=100;for(let i=0;i<t.length;i++)if(e=t[i],(0,o._)(this,me)[i]){let s=i===t.length-1?l:eh((e.endTime-Math.max(n,e.startTime))/a*100,3);(0,o._)(this,me)[i].style.width=s+"%",l-=s}}function mI(){let{liveEdge:t,seekableStart:e,seekableEnd:i}=(0,o._)(this,g8).$state,{fillPercent:s,value:n}=(0,o._)(this,g6),a=(0,o._)(this,ms).call(this),l=t(),h=(0,v.peek)((0,o._)(this,mn)),r=a[h],u=l?(0,o._)(this,ms).length-1:(0,_._)(this,mv,mN).call(this,r&&r.startTime/i()*100<=(0,v.peek)(n)?h:0,s());l||!r?(0,_._)(this,mp,mV).call(this,0,a.length,100):u>h?(0,_._)(this,mp,mV).call(this,h,u,100):u<h&&(0,_._)(this,mp,mV).call(this,u+1,h+1,0);let c=l?100:(0,_._)(this,my,mU).call(this,a[u],s(),e(),(0,_._)(this,mb,mK).call(this,a));(0,_._)(this,mf,mR).call(this,(0,o._)(this,me)[u],c),(0,o._)(this,mn).set(u)}function mF(){let{hidden:t,pointerPercent:e}=(0,o._)(this,g6);if(t())return void(0,o._)(this,ma).set(-1);let i=(0,_._)(this,mv,mN).call(this,0,e());(0,o._)(this,ma).set(i)}function mV(t,e,i){for(let s=t;s<e;s++)(0,_._)(this,mf,mR).call(this,(0,o._)(this,me)[s],i)}function mR(t,e){t&&(t.style.setProperty("--chapter-fill",e+"%"),(0,v.setAttribute)(t,"data-active",e>0&&e<100),(0,v.setAttribute)(t,"data-ended",100===e))}function mN(t,e){let i=0,s=(0,o._)(this,ms).call(this);if(0===e)return 0;if(100===e)return s.length-1;let{seekableStart:n}=(0,o._)(this,g8).$state,a=n(),l=(0,_._)(this,mb,mK).call(this,s);for(let n=t;n<s.length;n++)if((i=(0,_._)(this,my,mU).call(this,s[n],e,a,l))>=0&&i<100)return n;return 0}function mG(){(0,o._)(this,mg).call(this,(0,o._)(this,mm).call(this))}function mj(){let{bufferedEnd:t,duration:e}=(0,o._)(this,g8).$state;return 100*eh(Math.min(t()/Math.max(e(),1),1),3)}function mK(t){var e;let{seekableEnd:i}=(0,o._)(this,g8).$state,s=i();return Number.isFinite(s)?s:(null==(e=t[t.length-1])?void 0:e.endTime)||0}function mU(t,e,i,s){if(!t||0===(0,o._)(this,ms).call(this).length)return 0;let n=s-i,a=Math.max(0,t.startTime-i),l=Math.min(s,t.endTime)-i,h=a/n,r=100*h,u=100*Math.min(1,h+(l-a)/n);return Math.max(0,eh(e>=u?100:(e-r)/(u-r)*100,3))}function mB(t){let e=[],{seekableStart:i,seekableEnd:s,duration:n}=(0,o._)(this,g8).$state,a=i(),l=s(),h=(t=t.filter(t=>t.startTime<=l&&t.endTime>=a))[0];h&&h.startTime>a&&e.push(new window.VTTCue(a,h.startTime,""));for(let i=0;i<t.length-1;i++){let s=t[i],n=t[i+1];if(e.push(s),n){let t=n.startTime-s.endTime;t>0&&e.push(new window.VTTCue(s.endTime,s.endTime+t,""))}}let r=t[t.length-1];if(r){e.push(r);let t=n();t>=0&&t-r.endTime>1&&e.push(new window.VTTCue(r.endTime,n(),""))}return e}function mH(){let{source:t}=(0,o._)(this,g8).$state;t(),(0,_._)(this,m$,mQ).call(this)}function mQ(){if(!this.scope)return;let{disabled:t}=this.$props;if(t()){(0,o._)(this,ms).set([]),(0,o._)(this,mn).set(0),(0,c._)(this,ml,0);return}let e=(0,o._)(this,mi).call(this);if(e){let t=(0,o._)(this,mx).bind(this);t(),new v.EventsController(e).add("add-cue",t).add("remove-cue",t),(0,v.effect)((0,_._)(this,mM,mz).bind(this))}return(0,c._)(this,mt,(0,_._)(this,mA,mJ).call(this)),(0,o._)(this,mt)&&(0,v.effect)((0,_._)(this,mT,mX).bind(this)),()=>{(0,o._)(this,mt)&&((0,o._)(this,mt).textContent="",(0,c._)(this,mt,null))}}function mz(){(0,o._)(this,g8).$state.duration(),(0,o._)(this,mx).call(this)}function mX(){let t=this.activePointerCue||this.activeCue;(0,o._)(this,mt)&&((0,o._)(this,mt).textContent=(null==t?void 0:t.text)||"")}function mY(){let t=this.el;for(;t&&"slider"!==t.getAttribute("role");)t=t.parentElement;return t}function mJ(){let t=(0,_._)(this,mP,mY).call(this);return t?t.querySelector('[data-part="chapter-title"]'):null}mC.props={disabled:!1};let mZ=mC.prototype;(0,v.prop)(mZ,"cues"),(0,v.prop)(mZ,"activeCue"),(0,v.prop)(mZ,"activePointerCue"),(0,v.method)(mZ,"setRefs");let m0=(0,v.createContext)(),m1=["a[href]","[tabindex]","input","select","button"].map(t=>"".concat(t,":not([aria-hidden='true'])")).join(","),m2=new Set(["Escape","Tab","ArrowUp","ArrowDown","Home","PageUp","End","PageDown","Enter"," "]);var m3=new WeakMap,m5=new WeakMap,m4=new WeakMap,m9=new WeakMap,m8=new WeakSet,m6=new WeakSet,m7=new WeakSet,kt=new WeakSet,ke=new WeakSet,ki=new WeakSet,ks=new WeakSet,kn=new WeakSet;class ka{get items(){return(0,o._)(this,m4)}attachMenu(t){(0,v.listenEvent)(t,"focus",(0,_._)(this,m7,kr).bind(this)),(0,c._)(this,m5,t),(0,v.onDispose)(()=>{(0,c._)(this,m5,null)})}listen(){(0,o._)(this,m5)&&(this.update(),new v.EventsController((0,o._)(this,m5)).add("keyup",(0,_._)(this,ke,ku).bind(this)).add("keydown",(0,_._)(this,ki,kc).bind(this)),(0,v.onDispose)(()=>{(0,c._)(this,m3,-1),(0,c._)(this,m4,[])}))}update(){(0,c._)(this,m3,0),(0,c._)(this,m4,(0,_._)(this,kn,k_).call(this))}scroll(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_._)(this,m6,kh).call(this),e=(0,o._)(this,m4)[t];e&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i={scrollMode:"if-needed",block:"center",inline:"center",...e};for(let{el:e,top:s,left:n}of(0,v.r)(t,i))e.scroll({top:s,left:n,behavior:i.behavior})}(e,{behavior:"smooth",boundary:t=>!t.hasAttribute("data-root")})})})}focusActive(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],e=(0,_._)(this,m6,kh).call(this);(0,_._)(this,m8,kl).call(this,e>=0?e:0,t)}constructor(t){(0,p._)(this,m8),(0,p._)(this,m6),(0,p._)(this,m7),(0,p._)(this,kt),(0,p._)(this,ke),(0,p._)(this,ki),(0,p._)(this,ks),(0,p._)(this,kn),(0,u._)(this,m3,{writable:!0,value:void 0}),(0,u._)(this,m5,{writable:!0,value:void 0}),(0,u._)(this,m4,{writable:!0,value:void 0}),(0,u._)(this,m9,{writable:!0,value:void 0}),(0,c._)(this,m3,-1),(0,c._)(this,m5,null),(0,c._)(this,m4,[]),(0,c._)(this,m9,t)}}function kl(t){let e=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if((0,c._)(this,m3,t),(0,o._)(this,m4)[t])(0,o._)(this,m4)[t].focus({preventScroll:!0}),e&&this.scroll(t);else{var i;null==(i=(0,o._)(this,m5))||i.focus({preventScroll:!0})}}function kh(){return(0,o._)(this,m4).findIndex(t=>document.activeElement===t||"menuitemradio"===t.getAttribute("role")&&"true"===t.getAttribute("aria-checked"))}function kr(){(0,o._)(this,m3)>=0||(this.update(),this.focusActive())}function ko(t){let e=t.target;if((0,v.wasEnterKeyPressed)(t)&&e instanceof Element){let t=e.getAttribute("role");return!/a|input|select|button/.test(e.localName)&&!t}return m2.has(t.key)}function ku(t){(0,_._)(this,kt,ko).call(this,t)&&(t.stopPropagation(),t.preventDefault())}function kc(t){if((0,_._)(this,kt,ko).call(this,t))switch(t.stopPropagation(),t.preventDefault(),t.key){case"Escape":(0,o._)(this,m9).closeMenu(t);break;case"Tab":(0,_._)(this,m8,kl).call(this,(0,_._)(this,ks,kd).call(this,t.shiftKey?-1:1));break;case"ArrowUp":(0,_._)(this,m8,kl).call(this,(0,_._)(this,ks,kd).call(this,-1));break;case"ArrowDown":(0,_._)(this,m8,kl).call(this,(0,_._)(this,ks,kd).call(this,1));break;case"Home":case"PageUp":(0,_._)(this,m8,kl).call(this,0);break;case"End":case"PageDown":(0,_._)(this,m8,kl).call(this,(0,o._)(this,m4).length-1)}}function kd(t){var e;let i=(0,o._)(this,m3);do i=(i+t+(0,o._)(this,m4).length)%(0,o._)(this,m4).length;while((null==(e=(0,o._)(this,m4)[i])?void 0:e.offsetParent)===null);return i}function k_(){if(!(0,o._)(this,m5))return[];let t=(0,o._)(this,m5).querySelectorAll(m1),e=[],i=t=>"menu"===t.getAttribute("role");for(let s of t)eb(s)&&null!==s.offsetParent&&ev((0,o._)(this,m5),s,i)&&e.push(s);return e}var kp=Object.defineProperty,kf=Object.getOwnPropertyDescriptor,kv=(t,e,i,s)=>{for(var n,a=kf(e,i),l=t.length-1;l>=0;l--)(n=t[l])&&(a=n(e,i,a)||a);return a&&kp(e,i,a),a};let kw=0;var kg=new WeakMap,km=new WeakMap,kk=new WeakMap,kb=new WeakMap,ky=new WeakMap,kS=new WeakMap,kW=new WeakMap,k$=new WeakMap,kM=new WeakMap,kx=new WeakMap,kT=new WeakMap,kP=new WeakMap,kA=new WeakMap,kC=new WeakMap,kE=new WeakMap,kq=new WeakSet,kD=new WeakSet,kO=new WeakSet,kL=new WeakSet,kI=new WeakSet,kF=new WeakSet,kV=new WeakSet,kR=new WeakMap,kN=new WeakSet,kG=new WeakSet,kj=new WeakSet,kK=new WeakSet,kU=new WeakSet,kB=new WeakSet,kH=new WeakSet,kQ=new WeakSet,kz=new WeakSet,kX=new WeakSet,kY=new WeakMap,kJ=new WeakSet,kZ=new WeakMap,k0=new WeakMap,k1=new WeakSet,k2=new WeakMap,k3=new WeakSet,k5=new WeakMap,k4=new WeakMap,k9=new WeakSet;class k8 extends v.Component{get triggerElement(){return(0,o._)(this,kS).call(this)}get contentElement(){return(0,o._)(this,kW).call(this)}get isSubmenu(){return!!(0,o._)(this,k$)}onSetup(){(0,c._)(this,kg,tK());let t=++kw;(0,c._)(this,km,"media-menu-".concat(t)),(0,c._)(this,kk,"media-menu-button-".concat(t)),(0,c._)(this,kP,new ka({closeMenu:this.close.bind(this)})),(0,v.hasProvidedContext)(m0)&&(0,c._)(this,k$,(0,v.useContext)(m0)),(0,_._)(this,kq,k6).call(this),this.setAttributes({"data-open":(0,o._)(this,kb),"data-root":!this.isSubmenu,"data-submenu":this.isSubmenu,"data-disabled":(0,_._)(this,kK,br).bind(this)}),(0,v.provideContext)(m0,{button:(0,o._)(this,kS),content:(0,o._)(this,kW),expanded:(0,o._)(this,kb),hint:(0,v.signal)(""),submenu:!!(0,o._)(this,k$),disable:(0,_._)(this,kU,bo).bind(this),attachMenuButton:(0,_._)(this,kO,bt).bind(this),attachMenuItems:(0,_._)(this,kL,be).bind(this),attachObserver:(0,_._)(this,kI,bi).bind(this),disableMenuButton:(0,_._)(this,kV,bn).bind(this),addSubmenu:(0,_._)(this,kX,bp).bind(this),onTransitionEvent:t=>{(0,o._)(this,kE).add(t),(0,v.onDispose)(()=>{(0,o._)(this,kE).delete(t)})}})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){if((0,v.effect)((0,_._)(this,kD,k7).bind(this)),this.isSubmenu){var e;null==(e=(0,o._)(this,k$))||e.addSubmenu(this)}}onDestroy(){(0,o._)(this,kS).set(null),(0,o._)(this,kW).set(null),(0,c._)(this,kx,null),(0,o._)(this,kE).clear()}open(t){(0,v.peek)((0,o._)(this,kb))||((0,o._)(this,kT).show(t),(0,v.tick)())}close(t){(0,v.peek)((0,o._)(this,kb))&&((0,o._)(this,kT).hide(t),(0,v.tick)())}constructor(){super(),(0,p._)(this,kq),(0,p._)(this,kD),(0,p._)(this,kO),(0,p._)(this,kL),(0,p._)(this,kI),(0,p._)(this,kF),(0,p._)(this,kV),(0,p._)(this,kN),(0,p._)(this,kG),(0,p._)(this,kj),(0,p._)(this,kK),(0,p._)(this,kU),(0,p._)(this,kB),(0,p._)(this,kH),(0,p._)(this,kQ),(0,p._)(this,kz),(0,p._)(this,kX),(0,p._)(this,kJ),(0,p._)(this,k1),(0,p._)(this,k3),(0,p._)(this,k9),(0,u._)(this,kg,{writable:!0,value:void 0}),(0,u._)(this,km,{writable:!0,value:void 0}),(0,u._)(this,kk,{writable:!0,value:void 0}),(0,u._)(this,kb,{writable:!0,value:void 0}),(0,u._)(this,ky,{writable:!0,value:void 0}),(0,u._)(this,kS,{writable:!0,value:void 0}),(0,u._)(this,kW,{writable:!0,value:void 0}),(0,u._)(this,k$,{writable:!0,value:void 0}),(0,u._)(this,kM,{writable:!0,value:void 0}),(0,u._)(this,kx,{writable:!0,value:void 0}),(0,u._)(this,kT,{writable:!0,value:void 0}),(0,u._)(this,kP,{writable:!0,value:void 0}),(0,u._)(this,kA,{writable:!0,value:void 0}),(0,u._)(this,kC,{writable:!0,value:void 0}),(0,u._)(this,kE,{writable:!0,value:void 0}),(0,u._)(this,kR,{writable:!0,value:void 0}),(0,u._)(this,kY,{writable:!0,value:void 0}),(0,u._)(this,kZ,{writable:!0,value:void 0}),(0,u._)(this,k0,{writable:!0,value:void 0}),(0,u._)(this,k2,{writable:!0,value:void 0}),(0,u._)(this,k5,{writable:!0,value:void 0}),(0,u._)(this,k4,{writable:!0,value:void 0}),(0,c._)(this,kb,(0,v.signal)(!1)),(0,c._)(this,ky,(0,v.signal)(!1)),(0,c._)(this,kS,(0,v.signal)(null)),(0,c._)(this,kW,(0,v.signal)(null)),(0,c._)(this,kM,new Set),(0,c._)(this,kx,null),(0,c._)(this,kA,!1),(0,c._)(this,kC,(0,v.signal)(!1)),(0,c._)(this,kE,new Set),(0,c._)(this,kR,!1),(0,c._)(this,kY,(0,_._)(this,kJ,bf).bind(this)),(0,c._)(this,kZ,!1),(0,c._)(this,k0,(0,_._)(this,k1,bv).bind(this)),(0,c._)(this,k2,(0,_._)(this,k3,bw).bind(this)),(0,c._)(this,k5,(0,v.animationFrameThrottle)(()=>{let t=(0,v.peek)((0,o._)(this,kW));if(!t||m)return;let e=0,i=getComputedStyle(t),s=[...t.children];for(let t of["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])e+=parseFloat(i[t])||0;for(let t of s)if(eb(t)&&"contents"===t.style.display)s.push(...t.children);else if(3===t.nodeType)e+=parseFloat(getComputedStyle(t).fontSize);else if(eb(t)){if(!ep(t))continue;let i=getComputedStyle(t);e+=t.offsetHeight+(parseFloat(i.marginTop)||0)+(parseFloat(i.marginBottom)||0)}(0,v.setStyle)(t,"--menu-height",e+"px")})),(0,c._)(this,k4,!1);let{showDelay:t}=this.$props;(0,c._)(this,kT,new dC({trigger:(0,o._)(this,kS),content:(0,o._)(this,kW),showDelay:t,listen:(t,e,i)=>{ew(t,t=>{(0,o._)(this,kb).call(this)?i(t):e(t)});let s=(0,_._)(this,kQ,bd).call(this);s&&ew(s,t=>{t.stopPropagation(),i(t)})},onChange:(0,_._)(this,kN,ba).bind(this)}))}}function k6(){let t=-1,e=(0,v.hasProvidedContext)(pb)?(0,v.useContext)(pb):null;(0,v.provideContext)(pb,{onDragStart:()=>{var i;null==e||null==(i=e.onDragStart)||i.call(e),window.clearTimeout(t),t=-1,(0,c._)(this,kA,!0)},onDragEnd:()=>{var i;null==e||null==(i=e.onDragEnd)||i.call(e),t=window.setTimeout(()=>{(0,c._)(this,kA,!1),t=-1},300)}})}function k7(){let t=(0,_._)(this,kj,bh).call(this);this.isSubmenu||(0,o._)(this,k5).call(this),(0,_._)(this,kF,bs).call(this,t),t&&((0,v.effect)(()=>{let{height:t}=(0,o._)(this,kg).$state,e=(0,o._)(this,kW).call(this);e&&(0,v.setStyle)(e,"--player-height",t()+"px")}),(0,o._)(this,kP).listen(),this.listen("pointerup",(0,_._)(this,kB,bu).bind(this)),(0,v.listenEvent)(window,"pointerup",(0,_._)(this,kH,bc).bind(this)))}function bt(t){let e=t.el,i=this.isSubmenu,s=hK((0,_._)(this,kK,br).bind(this));ed(e,"tabindex",i?"-1":"0"),ed(e,"role",i?"menuitem":"button"),(0,v.setAttribute)(e,"id",(0,o._)(this,kk)),(0,v.setAttribute)(e,"aria-haspopup","menu"),(0,v.setAttribute)(e,"aria-expanded","false"),(0,v.setAttribute)(e,"data-root",!this.isSubmenu),(0,v.setAttribute)(e,"data-submenu",this.isSubmenu);let n=()=>{(0,v.setAttribute)(e,"data-open",(0,o._)(this,kb).call(this)),(0,v.setAttribute)(e,"aria-disabled",s())};m?n():(0,v.effect)(n),(0,o._)(this,kS).set(e),(0,v.onDispose)(()=>{(0,o._)(this,kS).set(null)})}function be(t){let e=t.el;e.style.setProperty("display","none"),(0,v.setAttribute)(e,"id",(0,o._)(this,km)),ed(e,"role","menu"),ed(e,"tabindex","-1"),(0,v.setAttribute)(e,"data-root",!this.isSubmenu),(0,v.setAttribute)(e,"data-submenu",this.isSubmenu),(0,o._)(this,kW).set(e),(0,v.onDispose)(()=>(0,o._)(this,kW).set(null));let i=()=>(0,v.setAttribute)(e,"data-open",(0,o._)(this,kb).call(this));m?i():(0,v.effect)(i),(0,o._)(this,kP).attachMenu(e),(0,_._)(this,kF,bs).call(this,!1);let s=(0,_._)(this,k9,bg).bind(this);if(this.isSubmenu){var n;null==(n=(0,o._)(this,k$))||n.onTransitionEvent(s)}else t.listen("transitionstart",s),t.listen("transitionend",s),t.listen("animationend",(0,o._)(this,k5)),t.listen("vds-menu-resize",(0,o._)(this,k5))}function bi(t){(0,c._)(this,kx,t)}function bs(t){let e=(0,v.peek)((0,o._)(this,kW));e&&(0,v.setAttribute)(e,"aria-hidden",(0,v.ariaBool)(!t))}function bn(t){(0,o._)(this,kC).set(t)}function ba(t,e){var i,s,n,a,l,h;if((0,c._)(this,kR,(0,v.isKeyboardEvent)(e)),null==e||e.stopPropagation(),(0,o._)(this,kb).call(this)===t)return;if((0,_._)(this,kK,br).call(this)){t&&(0,o._)(this,kT).hide(e);return}null==(i=this.el)||i.dispatchEvent(new Event("vds-menu-resize",{bubbles:!0,composed:!0}));let r=(0,o._)(this,kS).call(this),u=(0,o._)(this,kW).call(this);if(r&&((0,v.setAttribute)(r,"aria-controls",t&&(0,o._)(this,km)),(0,v.setAttribute)(r,"aria-expanded",(0,v.ariaBool)(t))),u&&(0,v.setAttribute)(u,"aria-labelledby",t&&(0,o._)(this,kk)),(0,o._)(this,kb).set(t),(0,_._)(this,kz,b_).call(this,e),(0,v.tick)(),(0,o._)(this,kR))for(let e of(t?null==u||u.focus():null==r||r.focus(),[this.el,u]))e&&e.setAttribute("data-keyboard","");else for(let t of[this.el,u])t&&t.removeAttribute("data-keyboard");if(this.dispatch(t?"open":"close",{trigger:e}),t)this.isSubmenu||(0,o._)(this,kg).activeMenu===this||(null==(a=(0,o._)(this,kg).activeMenu)||a.close(e),(0,o._)(this,kg).activeMenu=this),null==(n=(0,o._)(this,kx))||null==(s=n.onOpen)||s.call(n,e);else{if(this.isSubmenu)for(let t of(0,o._)(this,kM))t.close(e);else(0,o._)(this,kg).activeMenu=null;null==(h=(0,o._)(this,kx))||null==(l=h.onClose)||l.call(h,e)}t&&requestAnimationFrame((0,_._)(this,kG,bl).bind(this))}function bl(){(0,o._)(this,k4)||(0,o._)(this,kZ)||((0,o._)(this,kP).update(),requestAnimationFrame(()=>{(0,o._)(this,kR)?(0,o._)(this,kP).focusActive():(0,o._)(this,kP).scroll()}))}function bh(){return!(0,_._)(this,kK,br).call(this)&&(0,o._)(this,kb).call(this)}function br(){return(0,o._)(this,ky).call(this)||(0,o._)(this,kC).call(this)}function bo(t){(0,o._)(this,ky).set(t)}function bu(t){let e=(0,o._)(this,kW).call(this);(0,o._)(this,kA)||e&&eu(e,t)||t.stopPropagation()}function bc(t){let e=(0,o._)(this,kW).call(this);(0,o._)(this,kA)||e&&eu(e,t)||this.close(t)}function bd(){var t;let e=null==(t=this.el)?void 0:t.querySelector('[data-part="close-target"]');return this.el&&e&&ev(this.el,e,t=>"menu"===t.getAttribute("role"))?e:null}function b_(t){this.isSubmenu||((0,o._)(this,kb).call(this)?(0,o._)(this,kg).remote.pauseControls(t):(0,o._)(this,kg).remote.resumeControls(t))}function bp(t){(0,o._)(this,kM).add(t),new v.EventsController(t).add("open",(0,o._)(this,k0)).add("close",(0,o._)(this,k2)),(0,v.onDispose)((0,o._)(this,kY))}function bf(t){(0,o._)(this,kM).delete(t)}function bv(t){(0,c._)(this,kZ,!0);let e=(0,o._)(this,kW).call(this);if(this.isSubmenu){var i;null==(i=this.triggerElement)||i.setAttribute("aria-hidden","true")}for(let e of(0,o._)(this,kM))if(e!==t.target)for(let t of[e.el,e.triggerElement])null==t||t.setAttribute("aria-hidden","true");if(e){let i=t.target.el;for(let t of e.children)t.contains(i)?t.setAttribute("data-open",""):t!==i&&t.setAttribute("data-hidden","")}}function bw(t){(0,c._)(this,kZ,!1);let e=(0,o._)(this,kW).call(this);if(this.isSubmenu){var i;null==(i=this.triggerElement)||i.setAttribute("aria-hidden","false")}for(let t of(0,o._)(this,kM))for(let e of[t.el,t.triggerElement])null==e||e.setAttribute("aria-hidden","false");if(e)for(let t of e.children)t.removeAttribute("data-open"),t.removeAttribute("data-hidden")}function bg(t){let e=(0,o._)(this,kW).call(this);for(let i of(e&&"height"===t.propertyName&&((0,c._)(this,k4,"transitionstart"===t.type),(0,v.setAttribute)(e,"data-transition",(0,o._)(this,k4)?"height":null),(0,o._)(this,kb).call(this)&&(0,_._)(this,kG,bl).call(this)),(0,o._)(this,kE)))i(t)}k8.props={showDelay:0},kv([v.prop],k8.prototype,"triggerElement"),kv([v.prop],k8.prototype,"contentElement"),kv([v.prop],k8.prototype,"isSubmenu"),kv([v.method],k8.prototype,"open"),kv([v.method],k8.prototype,"close");var bm=new WeakMap,bk=new WeakMap,bb=new WeakSet,by=new WeakSet,bS=new WeakSet;class bW extends v.Component{get expanded(){var t,e;return null!=(e=null==(t=(0,o._)(this,bm))?void 0:t.expanded())&&e}onSetup(){(0,c._)(this,bm,(0,v.useContext)(m0))}onAttach(t){(0,o._)(this,bm).attachMenuButton(this),(0,v.effect)((0,_._)(this,bb,b$).bind(this)),ed(t,"type","button")}onConnect(t){(0,v.effect)((0,_._)(this,by,bM).bind(this)),(0,_._)(this,bS,bx).call(this);let e=new MutationObserver((0,_._)(this,bS,bx).bind(this));e.observe(t,{attributeFilter:["data-part"],childList:!0,subtree:!0}),(0,v.onDispose)(()=>e.disconnect()),ew(t,t=>{this.dispatch("select",{trigger:t})})}constructor(){super(),(0,p._)(this,bb),(0,p._)(this,by),(0,p._)(this,bS),(0,u._)(this,bm,{writable:!0,value:void 0}),(0,u._)(this,bk,{writable:!0,value:void 0}),(0,c._)(this,bk,(0,v.signal)(null)),new up}}function b$(){(0,o._)(this,bm).disableMenuButton(this.$props.disabled())}function bM(){let t=(0,o._)(this,bk).call(this);t&&(0,v.effect)(()=>{let e=(0,o._)(this,bm).hint();e&&(t.textContent=e)})}function bx(){var t;let e=null==(t=this.el)?void 0:t.querySelector('[data-part="hint"]');(0,o._)(this,bk).set(null!=e?e:null)}bW.props={disabled:!1};let bT=bW.prototype;(0,v.prop)(bT,"expanded");class bP extends bW{}var bA=new WeakMap,bC=new WeakMap,bE=new WeakSet,bq=new WeakSet,bD=new WeakSet,bO=new WeakSet;class bL extends v.Component{onSetup(){(0,c._)(this,bC,tK()),(0,v.provideContext)(bN,{attach:(0,_._)(this,bE,bI).bind(this)})}onAttach(t){t.style.setProperty("display","contents")}onConnect(t){}onDestroy(){var t;null==(t=(0,o._)(this,bA))||t.remove(),(0,c._)(this,bA,null)}constructor(...t){super(...t),(0,p._)(this,bE),(0,p._)(this,bq),(0,p._)(this,bD),(0,p._)(this,bO),(0,u._)(this,bA,{writable:!0,value:void 0}),(0,u._)(this,bC,{writable:!0,value:void 0}),(0,c._)(this,bA,null)}}function bI(t){(0,_._)(this,bD,bV).call(this,!1),(0,c._)(this,bA,t),em(()=>{em(()=>{this.connectScope&&(0,v.effect)((0,_._)(this,bq,bF).bind(this))})})}function bF(){let{fullscreen:t}=(0,o._)(this,bC).$state,{disabled:e}=this.$props;(0,_._)(this,bD,bV).call(this,"fullscreen"===e()?!t():!e())}function bV(t){if(!(0,o._)(this,bA))return;let e=(0,_._)(this,bO,bR).call(this,this.$props.container());if(!e)return;let i=(0,o._)(this,bA).parentElement===e;if((0,v.setAttribute)((0,o._)(this,bA),"data-portal",t),t)i||((0,o._)(this,bA).remove(),e.append((0,o._)(this,bA)));else if(i&&(0,o._)(this,bA).parentElement===e){var s;(0,o._)(this,bA).remove(),null==(s=this.el)||s.append((0,o._)(this,bA))}}function bR(t){return eb(t)?t:t?document.querySelector(t):document.body}bL.props={container:null,disabled:!1};let bN=(0,v.createContext)();var bG=new WeakMap,bj=new WeakSet,bK=new WeakSet,bU=new WeakSet;class bB extends v.Component{onAttach(t){if((0,c._)(this,bG,(0,v.useContext)(m0)),(0,o._)(this,bG).attachMenuItems(this),(0,v.hasProvidedContext)(bN)){let e=(0,v.useContext)(bN);e&&((0,v.provideContext)(bN,null),e.attach(t),(0,v.onDispose)(()=>e.attach(null)))}}onConnect(t){(0,v.effect)((0,_._)(this,bj,bH).bind(this))}constructor(){super(),(0,p._)(this,bj),(0,p._)(this,bK),(0,p._)(this,bU),(0,u._)(this,bG,{writable:!0,value:void 0}),new up;let{placement:t}=this.$props;this.setAttributes({"data-placement":t})}}function bH(){let{expanded:t}=(0,o._)(this,bG);if(!this.el||!t())return;let e=this.$props.placement();if(!e)return;Object.assign(this.el.style,{position:"absolute",top:0,left:0,width:"max-content"});let{offset:i,alignOffset:s}=this.$props;(0,v.onDispose)(ek(this.el,(0,_._)(this,bU,bz).call(this),e,{offsetVarName:"media-menu",xOffset:s(),yOffset:i()})),(0,v.onDispose)((0,_._)(this,bK,bQ).bind(this))}function bQ(){this.el&&(this.el.removeAttribute("style"),this.el.style.display="none")}function bz(){return(0,o._)(this,bG).button()}bB.props={placement:null,offset:0,alignOffset:0};let bX=(0,v.createContext)();var bY=new WeakMap,bJ=new WeakMap,bZ=new WeakMap,b0=new WeakSet,b1=new WeakSet,b2=new WeakMap,b3=new WeakSet,b5=new WeakSet;class b4 extends v.ViewController{get values(){return Array.from((0,o._)(this,bY)).map(t=>t.value())}get value(){return(0,o._)(this,bJ).call(this)}set value(t){(0,_._)(this,b3,b6).call(this,t)}onSetup(){(0,v.provideContext)(bX,{add:(0,_._)(this,b0,b9).bind(this),remove:(0,_._)(this,b1,b8).bind(this)})}onAttach(t){(0,v.hasProvidedContext)(m0)||ed(t,"role","radiogroup"),this.setAttributes({value:(0,o._)(this,bJ)})}onDestroy(){(0,o._)(this,bY).clear()}constructor(...t){super(...t),(0,p._)(this,b0),(0,p._)(this,b1),(0,p._)(this,b3),(0,p._)(this,b5),(0,u._)(this,bY,{writable:!0,value:void 0}),(0,u._)(this,bJ,{writable:!0,value:void 0}),(0,u._)(this,bZ,{writable:!0,value:void 0}),(0,u._)(this,b2,{writable:!0,value:void 0}),(0,c._)(this,bY,new Set),(0,c._)(this,bJ,(0,v.signal)("")),(0,c._)(this,bZ,null),(0,c._)(this,b2,(0,_._)(this,b3,b6).bind(this))}}function b9(t){(0,o._)(this,bY).has(t)||((0,o._)(this,bY).add(t),t.onCheck=(0,o._)(this,b2),t.check(t.value()===(0,o._)(this,bJ).call(this)))}function b8(t){t.onCheck=null,(0,o._)(this,bY).delete(t)}function b6(t,e){var i;let s=(0,v.peek)((0,o._)(this,bJ));if(!t||t===s)return;let n=(0,_._)(this,b5,b7).call(this,s),a=(0,_._)(this,b5,b7).call(this,t);null==n||n.check(!1,e),null==a||a.check(!0,e),(0,o._)(this,bJ).set(t),null==(i=this.onValueChange)||i.call(this,t,e)}function b7(t){for(let e of(0,o._)(this,bY))if(t===(0,v.peek)(e.value))return e;return null}var yt=new WeakMap,ye=new WeakSet,yi=new WeakSet;class ys extends v.Component{get values(){return(0,o._)(this,yt).values}get value(){return(0,o._)(this,yt).value}set value(t){(0,o._)(this,yt).value=t}onSetup(){m?(0,_._)(this,ye,yn).call(this):(0,v.effect)((0,_._)(this,ye,yn).bind(this))}constructor(){super(),(0,p._)(this,ye),(0,p._)(this,yi),(0,u._)(this,yt,{writable:!0,value:void 0}),(0,c._)(this,yt,new b4),(0,o._)(this,yt).onValueChange=(0,_._)(this,yi,ya).bind(this)}}function yn(){(0,o._)(this,yt).value=this.$props.value()}function ya(t,e){let i=this.createEvent("change",{detail:t,trigger:e});this.dispatch(i)}ys.props={value:""};let yl=ys.prototype;(0,v.prop)(yl,"values"),(0,v.prop)(yl,"value");var yh=new WeakMap,yr=new WeakMap,yo=new WeakSet,yu=new WeakSet,yc=new WeakSet,yd=new WeakSet,y_=new WeakSet,yp=new WeakSet,yf=new WeakSet;class yv extends v.Component{get checked(){return(0,o._)(this,yh).call(this)}onSetup(){this.setAttributes({value:this.$props.value,"data-checked":(0,o._)(this,yh),"aria-checked":hK((0,o._)(this,yh))})}onAttach(t){let e=(0,v.hasProvidedContext)(m0);ed(t,"tabindex",e?"-1":"0"),ed(t,"role",e?"menuitemradio":"radio"),(0,v.effect)((0,_._)(this,yc,ym).bind(this))}onConnect(t){(0,_._)(this,yu,yg).call(this),ew(t,(0,_._)(this,yd,yk).bind(this)),(0,v.onDispose)((0,_._)(this,yo,yw).bind(this))}constructor(){super(),(0,p._)(this,yo),(0,p._)(this,yu),(0,p._)(this,yc),(0,p._)(this,yd),(0,p._)(this,y_),(0,p._)(this,yp),(0,p._)(this,yf),(0,u._)(this,yh,{writable:!0,value:void 0}),(0,u._)(this,yr,{writable:!0,value:void 0}),(0,c._)(this,yh,(0,v.signal)(!1)),(0,c._)(this,yr,{value:this.$props.value,check:(0,_._)(this,y_,yb).bind(this),onCheck:null}),new up}}function yw(){(0,v.scoped)(()=>{(0,v.useContext)(bX).remove((0,o._)(this,yr))},this.connectScope)}function yg(){(0,v.useContext)(bX).add((0,o._)(this,yr))}function ym(){let{value:t}=this.$props,e=t();if((0,v.peek)((0,o._)(this,yh))){var i,s;null==(i=(s=(0,o._)(this,yr)).onCheck)||i.call(s,e)}}function yk(t){var e,i;(0,v.peek)((0,o._)(this,yh))||((0,_._)(this,yp,yy).call(this,!0,t),(0,_._)(this,yf,yS).call(this,t),null==(e=(i=(0,o._)(this,yr)).onCheck)||e.call(i,(0,v.peek)(this.$props.value),t))}function yb(t,e){(0,v.peek)((0,o._)(this,yh))!==t&&(0,_._)(this,yp,yy).call(this,t,e)}function yy(t,e){(0,o._)(this,yh).set(t),this.dispatch("change",{detail:t,trigger:e})}function yS(t){this.dispatch("select",{trigger:t})}yv.props={value:""};let yW=yv.prototype;(0,v.prop)(yW,"checked");var y$=new WeakMap,yM=new WeakMap,yx=new WeakSet,yT=new WeakMap,yP=new WeakMap,yA=new WeakSet,yC=new WeakSet,yE=new WeakSet,yq=new WeakSet,yD=new WeakSet;class yO extends v.Component{onSetup(){(0,c._)(this,y$,tK());let{event:t,action:e}=this.$props;this.setAttributes({event:t,action:e})}onAttach(t){t.setAttribute("data-media-gesture",""),t.style.setProperty("pointer-events","none")}onConnect(t){var e;(0,c._)(this,yM,null==(e=(0,o._)(this,y$).player.el)?void 0:e.querySelector("[data-media-provider]")),(0,v.effect)((0,_._)(this,yx,yL).bind(this))}constructor(...t){super(...t),(0,p._)(this,yx),(0,p._)(this,yA),(0,p._)(this,yC),(0,p._)(this,yE),(0,p._)(this,yq),(0,p._)(this,yD),(0,u._)(this,y$,{writable:!0,value:void 0}),(0,u._)(this,yM,{writable:!0,value:void 0}),(0,u._)(this,yT,{writable:!0,value:void 0}),(0,u._)(this,yP,{writable:!0,value:void 0}),(0,c._)(this,yM,null),(0,c._)(this,yT,0),(0,c._)(this,yP,-1)}}function yL(){let t=this.$props.event(),e=this.$props.disabled();(0,o._)(this,yM)&&t&&!e&&(/^dbl/.test(t)&&(t=t.split(/^dbl/)[1]),("pointerup"===t||"pointerdown"===t)&&"coarse"===(0,o._)(this,y$).$state.pointer()&&(t="pointerup"===t?"touchend":"touchstart"),(0,v.listenEvent)((0,o._)(this,yM),t,(0,_._)(this,yA,yI).bind(this),{passive:!1}))}function yI(t){if(this.$props.disabled()||(0,v.isPointerEvent)(t)&&(0!==t.button||(0,o._)(this,y$).activeMenu)||(0,v.isTouchEvent)(t)&&(0,o._)(this,y$).activeMenu||eg(t)||!(0,_._)(this,yE,yV).call(this,t))return;t.MEDIA_GESTURE=!0,t.preventDefault();let e=(0,v.peek)(this.$props.event);if(null==e?void 0:e.startsWith("dbl")){if(1===(0,o._)(this,yT)){queueMicrotask(()=>(0,_._)(this,yC,yF).call(this,t)),clearTimeout((0,o._)(this,yP)),(0,c._)(this,yT,0);return}}else 0===(0,o._)(this,yT)&&setTimeout(()=>{1===(0,o._)(this,yT)&&(0,_._)(this,yC,yF).call(this,t)},250);0===(0,o._)(this,yT)&&(0,c._)(this,yP,window.setTimeout(()=>{(0,c._)(this,yT,0)},275)),(0,d._)(this,yT).value++}function yF(t){this.el.setAttribute("data-triggered",""),requestAnimationFrame(()=>{(0,_._)(this,yq,yR).call(this)&&(0,_._)(this,yD,yN).call(this,(0,v.peek)(this.$props.action),t),requestAnimationFrame(()=>{this.el.removeAttribute("data-triggered")})})}function yV(t){if(!this.el)return!1;if((0,v.isPointerEvent)(t)||(0,v.isMouseEvent)(t)||(0,v.isTouchEvent)(t)){var e,i,s;let n=(0,v.isTouchEvent)(t)?null!=(e=t.changedTouches[0])?e:t.touches[0]:void 0,a=null!=(i=null==n?void 0:n.clientX)?i:t.clientX,l=null!=(s=null==n?void 0:n.clientY)?s:t.clientY,h=this.el.getBoundingClientRect(),r=l>=h.top&&l<=h.bottom&&a>=h.left&&a<=h.right;return t.type.includes("leave")?!r:r}return!0}function yR(){return Array.from((0,o._)(this,y$).player.el.querySelectorAll("[data-media-gesture][data-triggered]")).sort((t,e)=>getComputedStyle(e).zIndex-getComputedStyle(t).zIndex)[0]===this.el}function yN(t,e){if(!t)return;let i=new v.DOMEvent("will-trigger",{detail:t,cancelable:!0,trigger:e});if(this.dispatchEvent(i),i.defaultPrevented)return;let[s,n]=t.replace(/:([a-z])/,"-$1").split(":");t.includes(":fullscreen")?(0,o._)(this,y$).remote.toggleFullscreen("prefer-media",e):t.includes("seek:")?(0,o._)(this,y$).remote.seek((0,v.peek)((0,o._)(this,y$).$state.currentTime)+(+n||0),e):(0,o._)(this,y$).remote[(0,v.kebabToCamelCase)(s)](e),this.dispatch("trigger",{detail:t,trigger:e})}yO.props={disabled:!1,event:void 0,action:void 0};var yG=new WeakMap,yj=new WeakMap,yK=new WeakMap,yU=new WeakSet;class yB{attach(){}canRender(){return!0}detach(){var t;null==(t=(0,o._)(this,yK))||t.abort(),(0,c._)(this,yK,void 0),(0,o._)(this,yj).reset(),(0,c._)(this,yG,null)}changeTrack(t){var e;t&&(0,o._)(this,yG)!==t&&(null==(e=(0,o._)(this,yK))||e.abort(),(0,c._)(this,yK,new v.EventsController(t)),t.readyState<2?((0,o._)(this,yj).reset(),(0,o._)(this,yK).add("load",()=>(0,_._)(this,yU,yH).call(this,t),{once:!0})):(0,_._)(this,yU,yH).call(this,t),(0,o._)(this,yK).add("add-cue",t=>{(0,o._)(this,yj).addCue(t.detail)}).add("remove-cue",t=>{(0,o._)(this,yj).removeCue(t.detail)}),(0,c._)(this,yG,t))}constructor(t){(0,p._)(this,yU),(0,u._)(this,yG,{writable:!0,value:void 0}),(0,u._)(this,yj,{writable:!0,value:void 0}),(0,u._)(this,yK,{writable:!0,value:void 0}),this.priority=10,(0,c._)(this,yG,null),(0,c._)(this,yj,t)}}function yH(t){(0,o._)(this,yj).changeTrack({cues:[...t.cues],regions:[...t.regions]})}var yQ=new WeakMap,yz=new WeakSet,yX=new WeakSet,yY=new WeakSet,yJ=new WeakSet,yZ=new WeakSet,y0=new WeakSet,y1=new WeakSet,y2=new WeakSet,y3=new WeakSet,y5=new WeakSet,y4=new WeakSet,y9=new WeakSet,y8=new WeakMap,y6=new WeakSet,y7=new WeakSet,St=new WeakSet,Se=new WeakSet;class Si extends v.Component{onSetup(){(0,c._)(this,yQ,tK()),this.setAttributes({"aria-hidden":hK((0,_._)(this,yz,Ss).bind(this))})}onAttach(t){t.style.setProperty("pointer-events","none")}onConnect(t){Si.lib()||i.e(298).then(i.bind(i,1298)).then(t=>Si.lib.set(t)),(0,v.effect)((0,_._)(this,yX,Sn).bind(this))}constructor(...t){super(...t),(0,p._)(this,yz),(0,p._)(this,yX),(0,p._)(this,yY),(0,p._)(this,yJ),(0,p._)(this,yZ),(0,p._)(this,y0),(0,p._)(this,y1),(0,p._)(this,y2),(0,p._)(this,y3),(0,p._)(this,y5),(0,p._)(this,y4),(0,p._)(this,y9),(0,p._)(this,y6),(0,p._)(this,y7),(0,p._)(this,St),(0,p._)(this,Se),(0,u._)(this,yQ,{writable:!0,value:void 0}),(0,u._)(this,y8,{writable:!0,value:void 0}),(0,c._)(this,y8,-1)}}function Ss(){let{textTrack:t,remotePlaybackState:e,iOSControls:i}=(0,o._)(this,yQ).$state,s=t();return i()||"connected"===e()||!s||!tq(s)}function Sn(){if(!Si.lib())return;let{viewType:t}=(0,o._)(this,yQ).$state;return"audio"===t()?(0,_._)(this,yY,Sa).call(this):(0,_._)(this,y1,So).call(this)}function Sa(){return(0,v.effect)((0,_._)(this,yJ,Sl).bind(this)),(0,_._)(this,y5,Sd).call(this,null),()=>{this.el.textContent=""}}function Sl(){if((0,_._)(this,yz,Ss).call(this))return;(0,_._)(this,yZ,Sh).call(this);let{textTrack:t}=(0,o._)(this,yQ).$state;(0,v.listenEvent)(t(),"cue-change",(0,_._)(this,yZ,Sh).bind(this)),(0,v.effect)((0,_._)(this,y0,Sr).bind(this))}function Sh(){this.el.textContent="",(0,o._)(this,y8)>=0&&(0,_._)(this,y7,Sv).call(this);let{realCurrentTime:t,textTrack:e}=(0,o._)(this,yQ).$state,{renderVTTCueString:i}=Si.lib(),s=(0,v.peek)(t);for(let t of(0,v.peek)(e).activeCues){let e=(0,_._)(this,St,Sw).call(this),n=(0,_._)(this,Se,Sg).call(this);n.innerHTML=i(t,s),e.append(n),this.el.append(n)}}function Sr(){let{realCurrentTime:t}=(0,o._)(this,yQ).$state,{updateTimedVTTCueNodes:e}=Si.lib();e(this.el,t())}function So(){let{CaptionsRenderer:t}=Si.lib(),e=new t(this.el),i=new yB(e);return(0,o._)(this,yQ).textRenderers.add(i),(0,v.effect)((0,_._)(this,y2,Su).bind(this,e)),(0,v.effect)((0,_._)(this,y3,Sc).bind(this,e)),(0,_._)(this,y5,Sd).call(this,e),()=>{this.el.textContent="",(0,o._)(this,yQ).textRenderers.remove(i),e.destroy()}}function Su(t){t.dir=this.$props.textDir()}function Sc(t){var e;if((0,_._)(this,yz,Ss).call(this))return;let{realCurrentTime:i,textTrack:s}=(0,o._)(this,yQ).$state;t.currentTime=i(),(0,o._)(this,y8)>=0&&(null==(e=s())?void 0:e.activeCues[0])&&(0,_._)(this,y7,Sv).call(this)}function Sd(t){let e=(0,o._)(this,yQ).player;if(!e)return;let i=(0,_._)(this,y4,S_).bind(this,t);(0,v.listenEvent)(e,"vds-font-change",i)}function S_(t){var e;if((0,o._)(this,y8)>=0)return void(0,_._)(this,y6,Sf).call(this);let{textTrack:i}=(0,o._)(this,yQ).$state;(null==(e=i())?void 0:e.activeCues[0])?null==t||t.update(!0):(0,_._)(this,y9,Sp).call(this)}function Sp(){var t,e;let i=(0,_._)(this,St,Sw).call(this);(0,v.setAttribute)(i,"data-example","");let s=(0,_._)(this,Se,Sg).call(this);(0,v.setAttribute)(s,"data-example",""),s.textContent=this.$props.exampleText(),null==i||i.append(s),null==(t=this.el)||t.append(i),null==(e=this.el)||e.setAttribute("data-example",""),(0,_._)(this,y6,Sf).call(this)}function Sf(){window.clearTimeout((0,o._)(this,y8)),(0,c._)(this,y8,window.setTimeout((0,_._)(this,y7,Sv).bind(this),2500))}function Sv(){var t,e;null==(t=this.el)||t.removeAttribute("data-example"),(null==(e=this.el)?void 0:e.querySelector("[data-example]"))&&(this.el.textContent=""),(0,c._)(this,y8,-1)}function Sw(){let t=document.createElement("div");return(0,v.setAttribute)(t,"data-part","cue-display"),t}function Sg(){let t=document.createElement("div");return(0,v.setAttribute)(t,"data-part","cue"),t}Si.props={textDir:"ltr",exampleText:"Captions look like this."},Si.lib=(0,v.signal)(null);var Sm=new WeakMap,Sk=new WeakSet,Sb=new WeakSet,Sy=new WeakSet,SS=new WeakSet,SW=new WeakSet,S$=new WeakMap,SM=new WeakSet,Sx=new WeakSet,ST=new WeakSet,SP=new WeakSet,SA=new WeakSet,SC=new WeakSet;class SE extends v.Component{onSetup(){(0,c._)(this,Sm,tK()),(0,_._)(this,SM,SF).call(this),(0,_._)(this,Sx,SV).call(this),(0,_._)(this,ST,SR).call(this),(0,_._)(this,Sy,SO).call(this)}onAttach(t){t.style.setProperty("pointer-events","none"),(0,v.effect)((0,_._)(this,SW,SI).bind(this)),(0,v.effect)((0,_._)(this,SM,SF).bind(this)),(0,v.effect)((0,_._)(this,Sx,SV).bind(this)),(0,v.effect)((0,_._)(this,ST,SR).bind(this)),(0,v.effect)((0,_._)(this,Sy,SO).bind(this));let{started:e}=(0,o._)(this,Sm).$state;this.setAttributes({"data-visible":()=>!e()&&!this.$state.hidden(),"data-loading":(0,_._)(this,SS,SL).bind(this),"data-error":(0,_._)(this,Sk,Sq).bind(this),"data-hidden":this.$state.hidden})}onConnect(t){(0,v.effect)((0,_._)(this,Sb,SD).bind(this)),(0,v.effect)((0,_._)(this,SP,SN).bind(this))}constructor(...t){super(...t),(0,p._)(this,Sk),(0,p._)(this,Sb),(0,p._)(this,Sy),(0,p._)(this,SS),(0,p._)(this,SW),(0,p._)(this,SM),(0,p._)(this,Sx),(0,p._)(this,ST),(0,p._)(this,SP),(0,p._)(this,SA),(0,p._)(this,SC),(0,u._)(this,Sm,{writable:!0,value:void 0}),(0,u._)(this,S$,{writable:!0,value:void 0}),(0,c._)(this,S$,"")}}function Sq(){let{error:t}=this.$state;return!(0,v.isNull)(t())}function SD(){let{canLoadPoster:t,poster:e}=(0,o._)(this,Sm).$state;!t()&&e()&&Y(e(),"preconnect")}function SO(){let{src:t}=this.$props,{poster:e,nativeControls:i}=(0,o._)(this,Sm).$state;this.el&&(0,v.setAttribute)(this.el,"display",i()?"none":null),this.$state.hidden.set((0,_._)(this,Sk,Sq).call(this)||!(t()||e())||i())}function SL(){let{loading:t,hidden:e}=this.$state;return!e()&&t()}function SI(){let t=this.$state.img();t&&(new v.EventsController(t).add("load",(0,_._)(this,SA,SG).bind(this)).add("error",(0,_._)(this,SC,Sj).bind(this)),t.complete&&(0,_._)(this,SA,SG).call(this))}function SF(){let{poster:t}=(0,o._)(this,Sm).$props,{canLoadPoster:e,providedPoster:i,inferredPoster:s}=(0,o._)(this,Sm).$state,n=this.$props.src()||"",a=n||t()||s();(0,o._)(this,S$)===i()&&i.set(n),this.$state.src.set(e()&&a.length?a:null),(0,c._)(this,S$,n)}function SV(){let{src:t}=this.$props,{alt:e}=this.$state,{poster:i}=(0,o._)(this,Sm).$state;e.set(t()||i()?this.$props.alt():null)}function SR(){let{crossOrigin:t}=this.$props,{crossOrigin:e}=this.$state,{crossOrigin:i,poster:s}=(0,o._)(this,Sm).$state,n=null!==t()?t():i();e.set(/ytimg\.com|vimeo/.test(s()||"")?null:!0===n?"anonymous":n)}function SN(){let{loading:t,error:e}=this.$state,{canLoadPoster:i,poster:s}=(0,o._)(this,Sm).$state;t.set(i()&&!!s()),e.set(null)}function SG(){let{loading:t,error:e}=this.$state;t.set(!1),e.set(null)}function Sj(t){let{loading:e,error:i}=this.$state;e.set(!1),i.set(t)}SE.props={src:null,alt:null,crossOrigin:null},SE.state=new v.State({img:null,src:null,alt:null,crossOrigin:null,loading:!0,error:null,hidden:!1});var SK=new WeakMap,SU=new WeakMap,SB=new WeakMap,SH=new WeakMap,SQ=new WeakSet,Sz=new WeakSet,SX=new WeakSet,SY=new WeakSet,SJ=new WeakSet,SZ=new WeakSet,S0=new WeakSet,S1=new WeakSet;class S2 extends v.Component{onSetup(){(0,c._)(this,SK,tK()),(0,_._)(this,SY,S9).call(this);let{type:t}=this.$props;this.setAttributes({"data-type":t,"data-remainder":(0,_._)(this,S0,S7).bind(this)}),new pg({callback:(0,_._)(this,SQ,S3).bind(this)}).attach(this)}onAttach(t){t.hasAttribute("role")||(0,v.effect)((0,_._)(this,SJ,S8).bind(this)),(0,v.effect)((0,_._)(this,SY,S9).bind(this))}onConnect(t){(0,v.onDispose)(ef(t,(0,o._)(this,SB).set)),(0,v.effect)((0,_._)(this,Sz,S5).bind(this)),(0,v.effect)((0,_._)(this,SX,S4).bind(this))}constructor(...t){super(...t),(0,p._)(this,SQ),(0,p._)(this,Sz),(0,p._)(this,SX),(0,p._)(this,SY),(0,p._)(this,SJ),(0,p._)(this,SZ),(0,p._)(this,S0),(0,p._)(this,S1),(0,u._)(this,SK,{writable:!0,value:void 0}),(0,u._)(this,SU,{writable:!0,value:void 0}),(0,u._)(this,SB,{writable:!0,value:void 0}),(0,u._)(this,SH,{writable:!0,value:void 0}),(0,c._)(this,SU,(0,v.signal)(null)),(0,c._)(this,SB,(0,v.signal)(!0)),(0,c._)(this,SH,(0,v.signal)(!0))}}function S3(t){(0,o._)(this,SH).set(t[0].isIntersecting)}function S5(){let{hidden:t}=this.$props;this.$state.hidden.set(t()||!(0,o._)(this,SB).call(this)||!(0,o._)(this,SH).call(this))}function S4(){if(!this.$props.toggle())return void(0,o._)(this,SU).set(null);this.el&&ew(this.el,(0,_._)(this,S1,Wt).bind(this))}function S9(){let{hidden:t,timeText:e}=this.$state,{duration:i}=(0,o._)(this,SK).$state;if(t())return;let{type:s,padHours:n,padMinutes:a,showHours:l}=this.$props,h=(0,_._)(this,SZ,S6).call(this,s()),r=i(),u=(0,_._)(this,S0,S7).call(this);if(!Number.isFinite(h+r))return void e.set("LIVE");let c=hy(u?Math.max(0,r-h):h,{padHrs:n(),padMins:a(),showHrs:l()});e.set((u?"-":"")+c)}function S8(){if(!this.el)return;let{toggle:t}=this.$props;(0,v.setAttribute)(this.el,"role",t()?"timer":null),(0,v.setAttribute)(this.el,"tabindex",t()?0:null)}function S6(t){let{bufferedEnd:e,duration:i,currentTime:s}=(0,o._)(this,SK).$state;switch(t){case"buffered":return e();case"duration":return i();default:return s()}}function S7(){return this.$props.remainder()&&!1!==(0,o._)(this,SU).call(this)}function Wt(t){if(t.preventDefault(),null===(0,o._)(this,SU).call(this))return void(0,o._)(this,SU).set(!this.$props.remainder());(0,o._)(this,SU).set(t=>!t)}S2.props={type:"current",showHours:!1,padHours:null,padMinutes:null,remainder:!1,toggle:!1,hidden:!1},S2.state=new v.State({timeText:"",hidden:!1});class We extends uQ{}class Wi extends cY{}class Ws extends _a{}class Wn extends _I{}class Wa extends _U{}class Wl extends pc{}class Wh extends _Z{}class Wr extends _8{}class Wo extends _A{}class Wu extends _d{}class Wc extends pa{}class Wd extends fF{}class W_ extends gF{}class Wp extends wr{}class Wf extends vP{}class Wv extends v3{}class Ww extends vG{}class Wg extends v8{}class Wm extends mC{}class Wk extends k8{}class Wb extends bW{}class Wy extends bB{}class WS extends bP{}class WW extends ys{}class W$ extends yv{}class WM extends yO{}class Wx extends SE{}class WT extends vf{}class WP extends S2{}let WA=f.forwardRef((t,e)=>{let{children:i,...s}=t,n=f.Children.toArray(i),a=n.find(Wq);if(a){let t=a.props.children,i=n.map(e=>e!==a?e:f.Children.count(t)>1?f.Children.only(null):f.isValidElement(t)?t.props.children:null);return f.createElement(WC,{...s,ref:e},f.isValidElement(t)?f.cloneElement(t,void 0,i):null)}return f.createElement(WC,{...s,ref:e},i)});WA.displayName="Slot";let WC=f.forwardRef((t,e)=>{let{children:i,...s}=t;return f.isValidElement(i)?f.cloneElement(i,{...function(t,e){let i={...e};for(let s in e){let n=t[s],a=e[s];/^on[A-Z]/.test(s)?n&&a?i[s]=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];a(...e),n(...e)}:n&&(i[s]=n):"style"===s?i[s]={...n,...a}:"className"===s&&(i[s]=[n,a].filter(Boolean).join(" "))}return{...t,...i}}(s,i.props),ref:e?(0,v.composeRefs)(e,i.ref):i.ref}):f.Children.count(i)>1?f.Children.only(null):null});WC.displayName="SlotClone";let WE=t=>{let{children:e}=t;return f.createElement(f.Fragment,null,e)};function Wq(t){return f.isValidElement(t)&&t.type===WE}let WD=["button","div","span","img","video","audio"].reduce((t,e)=>{let i=f.forwardRef((t,i)=>{let{asChild:s,...n}=t,a=s?WA:e;return f.createElement(a,{...n,ref:i})});return i.displayName="Primitive.".concat(e),{...t,[e]:i}},{});function WO(t){return(null==t?void 0:t.$$PROVIDER_TYPE)==="REMOTION"}function WL(t){return(null==t?void 0:t.type)==="video/remotion"}let WI=Wd.state.record,WF=Object.keys(WI).reduce((t,e)=>({...t,[e]:()=>WI[e]}),{});function WV(t,e){var i;let s=(0,v.useStateContext)(p_);return(0,v.useSignal)(((null==e||null==(i=e.current)?void 0:i.$state)||s||WF)[t])}let WR=We.state.record,WN=Object.keys(WR).reduce((t,e)=>({...t,[e]:()=>WR[e]}),{});function WG(t,e){var i;let s=(0,v.useStateContext)(tD);return(0,v.useSignal)(((null==e||null==(i=e.current)?void 0:i.$state)||s||WN)[t])}}}]);