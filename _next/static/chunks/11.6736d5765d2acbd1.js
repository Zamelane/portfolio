"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{9011:(t,i,e)=>{e.r(i),e.d(i,{HLSProvider:()=>to});var s=e(4971),n=e(4096),a=e(6266),l=e(3169),h=e(3893),r=e(8979),o=e(1386);e(2115);var _=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,v=new WeakMap,p=new WeakSet,w=new WeakSet,f=new WeakSet,k=new WeakSet,S=new WeakSet,b=new WeakSet,g=new WeakSet,E=new WeakSet,y=new WeakSet,W=new WeakSet,T=new WeakSet,L=new WeakSet,m=new WeakSet,M=new WeakSet,D=new WeakSet;class O{get instance(){return(0,s._)(this,d)}setup(t){let{streamType:i}=(0,s._)(this,c).$state,e=(0,r.peek)(i).includes("live"),n=(0,r.peek)(i).includes("ll-");(0,a._)(this,d,new t({lowLatencyMode:n,backBufferLength:n?4:e?8:void 0,renderTextTracksNatively:!1,...this.config}));let h=(0,l._)(this,k,C).bind(this);for(let i of Object.values(t.Events))(0,s._)(this,d).on(i,h);for(let i of((0,s._)(this,d).on(t.Events.ERROR,(0,l._)(this,T,V).bind(this)),(0,s._)(this,v)))i((0,s._)(this,d));(0,s._)(this,c).player.dispatch("hls-instance",{detail:(0,s._)(this,d)}),(0,s._)(this,d).attachMedia((0,s._)(this,_)),(0,s._)(this,d).on(t.Events.AUDIO_TRACK_SWITCHED,(0,l._)(this,g,j).bind(this)),(0,s._)(this,d).on(t.Events.LEVEL_SWITCHED,(0,l._)(this,E,R).bind(this)),(0,s._)(this,d).on(t.Events.LEVEL_LOADED,(0,l._)(this,W,$).bind(this)),(0,s._)(this,d).on(t.Events.LEVEL_UPDATED,(0,l._)(this,y,P).bind(this)),(0,s._)(this,d).on(t.Events.NON_NATIVE_TEXT_TRACKS_FOUND,(0,l._)(this,S,A).bind(this)),(0,s._)(this,d).on(t.Events.CUES_PARSED,(0,l._)(this,b,N).bind(this)),(0,s._)(this,c).qualities[o.kW.enableAuto]=(0,l._)(this,m,U).bind(this),(0,r.listenEvent)((0,s._)(this,c).qualities,"change",(0,l._)(this,M,F).bind(this)),(0,r.listenEvent)((0,s._)(this,c).audioTracks,"change",(0,l._)(this,D,B).bind(this)),(0,a._)(this,u,(0,r.effect)((0,l._)(this,w,H).bind(this)))}onInstance(t){return(0,s._)(this,v).add(t),()=>(0,s._)(this,v).delete(t)}loadSource(t){var i;(0,r.isString)(t.src)&&(null==(i=(0,s._)(this,d))||i.loadSource(t.src))}destroy(){var t,i;null==(t=(0,s._)(this,d))||t.destroy(),(0,a._)(this,d,null),null==(i=(0,s._)(this,u))||i.call(this),(0,a._)(this,u,null)}constructor(t,i){(0,h._)(this,p),(0,h._)(this,w),(0,h._)(this,f),(0,h._)(this,k),(0,h._)(this,S),(0,h._)(this,b),(0,h._)(this,g),(0,h._)(this,E),(0,h._)(this,y),(0,h._)(this,W),(0,h._)(this,T),(0,h._)(this,L),(0,h._)(this,m),(0,h._)(this,M),(0,h._)(this,D),(0,n._)(this,_,{writable:!0,value:void 0}),(0,n._)(this,c,{writable:!0,value:void 0}),(0,n._)(this,d,{writable:!0,value:void 0}),(0,n._)(this,u,{writable:!0,value:void 0}),(0,n._)(this,v,{writable:!0,value:void 0}),(0,a._)(this,d,null),(0,a._)(this,u,null),this.config={},(0,a._)(this,v,new Set),(0,a._)(this,_,t),(0,a._)(this,c,i)}}function x(t,i){return new r.DOMEvent((0,r.camelToKebabCase)(t),{detail:i})}function H(){if(!(0,s._)(this,c).$state.live())return;let t=new o.e8((0,l._)(this,f,I).bind(this));return t.start(),t.stop.bind(t)}function I(){var t,i;(0,s._)(this,c).$state.liveSyncPosition.set(null!=(i=null==(t=(0,s._)(this,d))?void 0:t.liveSyncPosition)?i:1/0)}function C(t,i){var e;null==(e=(0,s._)(this,c).player)||e.dispatch((0,l._)(this,p,x).call(this,t,i))}function A(t,i){let e=(0,l._)(this,p,x).call(this,t,i),n=-1;for(let t=0;t<i.tracks.length;t++){var a;let l=i.tracks[t],h=null!=(a=l.subtitleTrack)?a:l.closedCaptions,r=new o.to({id:"hls-".concat(l.kind,"-").concat(t),src:null==h?void 0:h.url,label:l.label,language:null==h?void 0:h.lang,kind:l.kind,default:l.default});r[o.Hp.readyState]=2,r[o.Hp.onModeChange]=()=>{"showing"===r.mode?((0,s._)(this,d).subtitleTrack=t,n=t):n===t&&((0,s._)(this,d).subtitleTrack=-1,n=-1)},(0,s._)(this,c).textTracks.add(r,e)}}function N(t,i){var e;let n=null==(e=(0,s._)(this,d))?void 0:e.subtitleTrack,a=(0,s._)(this,c).textTracks.getById("hls-".concat(i.type,"-").concat(n));if(!a)return;let h=(0,l._)(this,p,x).call(this,t,i);for(let t of i.cues)t.positionAlign="auto",a.addCue(t,h)}function j(t,i){let e=(0,s._)(this,c).audioTracks[i.id];if(e){let n=(0,l._)(this,p,x).call(this,t,i);(0,s._)(this,c).audioTracks[o.jH.select](e,!0,n)}}function R(t,i){let e=(0,s._)(this,c).qualities[i.level];if(e){let n=(0,l._)(this,p,x).call(this,t,i);(0,s._)(this,c).qualities[o.jH.select](e,!0,n)}}function P(t,i){i.details.totalduration>0&&(0,s._)(this,c).$state.inferredLiveDVRWindow.set(i.details.totalduration)}function $(t,i){if((0,s._)(this,c).$state.canPlay())return;let{type:e,live:n,totalduration:a,targetduration:h}=i.details,_=(0,l._)(this,p,x).call(this,t,i);(0,s._)(this,c).notify("stream-type-change",n?"EVENT"===e&&Number.isFinite(a)&&h>=10?"live:dvr":"live":"on-demand",_),(0,s._)(this,c).notify("duration-change",a,_);let u=(0,s._)(this,d).media;for(let t of(-1===(0,s._)(this,d).currentLevel&&(0,s._)(this,c).qualities[o.kW.setAuto](!0,_),(0,s._)(this,d).audioTracks)){let i={id:t.id.toString(),label:t.name,language:t.lang||"",kind:"main"};(0,s._)(this,c).audioTracks[o.jH.add](i,_)}for(let t of(0,s._)(this,d).levels){var v,w;let i={id:null!=(w=null==(v=t.id)?void 0:v.toString())?w:t.height+"p",width:t.width,height:t.height,codec:t.codecSet,bitrate:t.bitrate};(0,s._)(this,c).qualities[o.jH.add](i,_)}u.dispatchEvent(new r.DOMEvent("canplay",{trigger:_}))}function V(t,i){if(i.fatal)if("mediaError"===i.type){var e;null==(e=(0,s._)(this,d))||e.recoverMediaError()}else(0,l._)(this,L,q).call(this,i.error)}function q(t){(0,s._)(this,c).notify("error",{message:t.message,code:1,error:t})}function U(){(0,s._)(this,d)&&((0,s._)(this,d).currentLevel=-1)}function F(){let{qualities:t}=(0,s._)(this,c);(0,s._)(this,d)&&!t.auto&&((0,s._)(this,d)[t.switch+"Level"]=t.selectedIndex,o.G_&&((0,s._)(this,_).currentTime=(0,s._)(this,_).currentTime))}function B(){let{audioTracks:t}=(0,s._)(this,c);(0,s._)(this,d)&&(0,s._)(this,d).audioTrack!==t.selectedIndex&&((0,s._)(this,d).audioTrack=t.selectedIndex)}var K=new WeakMap,G=new WeakMap,X=new WeakMap,Y=new WeakSet,z=new WeakSet,J=new WeakSet,Q=new WeakSet;class Z{constructor(t,i,e){(0,h._)(this,Y),(0,h._)(this,z),(0,h._)(this,J),(0,h._)(this,Q),(0,n._)(this,K,{writable:!0,value:void 0}),(0,n._)(this,G,{writable:!0,value:void 0}),(0,n._)(this,X,{writable:!0,value:void 0}),(0,a._)(this,K,t),(0,a._)(this,G,i),(0,a._)(this,X,e),(0,l._)(this,Y,tt).call(this)}}async function tt(){let t={onLoadStart:(0,l._)(this,z,ti).bind(this),onLoaded:(0,l._)(this,J,te).bind(this),onLoadError:(0,l._)(this,Q,ts).bind(this)},i=await ta((0,s._)(this,K),t);return((0,r.isUndefined)(i)&&!(0,r.isString)((0,s._)(this,K))&&(i=await tn((0,s._)(this,K),t)),i)?i.isSupported()?i:((0,s._)(this,G).player.dispatch(new r.DOMEvent("hls-unsupported")),(0,s._)(this,G).notify("error",{message:"[vidstack] `hls.js` is not supported in this environment",code:4}),null):null}function ti(){(0,s._)(this,G).player.dispatch(new r.DOMEvent("hls-lib-load-start"))}function te(t){(0,s._)(this,G).player.dispatch(new r.DOMEvent("hls-lib-loaded",{detail:t})),(0,s._)(this,X).call(this,t)}function ts(t){let i=(0,o.rv)(t);(0,s._)(this,G).player.dispatch(new r.DOMEvent("hls-lib-load-error",{detail:i})),(0,s._)(this,G).notify("error",{message:i.message,code:4,error:i})}async function tn(t){var i,e,s,n,a;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,r.isUndefined)(t)){if(null==(i=l.onLoadStart)||i.call(l),t.prototype&&t.prototype!==Function)return null==(e=l.onLoaded)||e.call(l,t),t;try{let i=null==(s=await t())?void 0:s.default;if(i&&i.isSupported)null==(n=l.onLoaded)||n.call(l,i);else throw Error("");return i}catch(t){null==(a=l.onLoadError)||a.call(l,t)}}}async function ta(t){var i,e,s;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,r.isString)(t)){null==(i=n.onLoadStart)||i.call(n);try{if(await (0,o.k0)(t),!(0,r.isFunction)(window.Hls))throw Error("");let i=window.Hls;return null==(e=n.onLoaded)||e.call(n,i),i}catch(t){null==(s=n.onLoadError)||s.call(n,t)}}}var tl=new WeakMap,th=new WeakMap,tr=new WeakMap;class to extends o.Nw{get ctor(){return(0,s._)(this,tl)}get instance(){return(0,s._)(this,th).instance}get type(){return"hls"}get canLiveSync(){return!0}get config(){return(0,s._)(this,th).config}set config(t){(0,s._)(this,th).config=t}get library(){return(0,s._)(this,tr)}set library(t){(0,a._)(this,tr,t)}preconnect(){(0,r.isString)((0,s._)(this,tr))&&(0,o.TB)((0,s._)(this,tr))}setup(){super.setup(),new Z((0,s._)(this,tr),this.ctx,t=>{(0,a._)(this,tl,t),(0,s._)(this,th).setup(t),this.ctx.notify("provider-setup",this);let i=(0,r.peek)(this.ctx.$state.source);i&&this.loadSource(i)})}async loadSource(t,i){if(!(0,r.isString)(t.src))return void this.removeSource();this.media.preload=i||"",this.appendSource(t,"application/x-mpegurl"),(0,s._)(this,th).loadSource(t),this.currentSrc=t}onInstance(t){let i=(0,s._)(this,th).instance;return i&&t(i),(0,s._)(this,th).onInstance(t)}destroy(){(0,s._)(this,th).destroy()}constructor(...t){super(...t),(0,n._)(this,tl,{writable:!0,value:void 0}),(0,n._)(this,th,{writable:!0,value:void 0}),(0,n._)(this,tr,{writable:!0,value:void 0}),this.$$PROVIDER_TYPE="HLS",(0,a._)(this,tl,null),(0,a._)(this,th,new O(this.video,this.ctx)),(0,a._)(this,tr,"".concat("https://cdn.jsdelivr.net","/npm/hls.js@^1.5.0/dist/hls",".min.js"))}}to.supported=(0,o.m0)()}}]);